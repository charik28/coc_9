<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="alpass.ipt.clr.pdr.aja.mapper.ClrRcoAudtMgmtMapper">

  <!--
    Voir la liste des Consulter la liste des demandes de RCO !== 원산지 사전판정신청 목록 조회 ==!
    (Song JunYoung)
    -->
  <select id="selectClrOrcyBfhnJdgnRqstComnList" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyBfhnJdgnRqstComnVo" resultType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyBfhnJdgnRqstComnVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRcoAudtMgmtMapper.selectClrOrcyBfhnJdgnRqstComnList */
    <include refid="pagination.header" ></include>
    SELECT
        A.ORCY_BFHN_JDGN_RQST_NO     /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
      , A.MDFY_DGCNT                 /** Fréquence de rectification !== 정정차수 ==! */
      , B.ORCY_BFHN_JDGN_PERM_NO     /** N° de l'autorisation de décision de RCO !== 원산지사전판정허가번호 ==! */
      , A.RQST_DT                    /** Date De Demande !== 신청일자 ==! */
      , A.DCER_CD                    /** Code Du Déclarant !== 신고인코드 ==! */
      , A.DCER_NM                    /** Nom Du Déclarant !== 신고인명 ==! */
      , A.DCER_POST_NO               /** ZIPCODE Demandeur !== 신고인우편번호 ==! */
      , A.DCER_ADDR                  /** Adresse Du Déclarant !== 신고인주소 ==! */
      , A.DCER_TLPH_NO               /** N° Tél. Du Dénonciateur  !== 신고인전화번호 ==! */
      , A.DCER_EML                   /** E-Mail Du Dénonciateur !== 신고인이메일 ==! */
      , A.POTX_IDFY_NO               /** Numéro d’identification fiscale !== 납세식별번호 ==! */
      , A.CMRC_REGS_NO               /** Numéro de registre du commerce !== 상업등기번호 ==! */
      , A.RGPN_NM                    /** Nom et prénom (s) ou raison sociale !== 권리자명 ==! */
      , A.RGPN_POST_NO               /** ZIPCODE Titulaire. !== 권리자우편번호 ==! */
      , A.RGPN_ADDR                  /** Adresse Titulaire. !== 권리자주소 ==! */
      , A.RGPN_TLPH_NO               /** N° tél Titulaire. !== 권리자전화번호 ==! */
      , A.RGPN_EML                   /** E-mail Titulaire. !== 권리자이메일 ==! */
      , A.RGPN_POTX_IDFY_NO          /** Numéro d’identification fiscale Titulaire !== 권리자납세식별번호 ==! */
      , A.RGPN_CMRC_REGS_NO          /** Numéro du registre du commerce Titulaire !== 권리자상업등기번호 ==! */
      , A.AEO_NO                     /** N° OEA !== AEO번호 ==! */
      , A.REPB_YN                    /** Rééimission d'un RCO ON !== 재발행여부 ==! */
      , A.BF_RCO_NO                  /** Numéro de RCO précédent !== 이전RCO번호 ==! */
      , A.WKNG_PT_CD                 /** Type D'Opération !== 작업유형코드 ==! */
      , A.PRVL_ORCY_YN               /** Origine préférentielle ON !== 특혜원산지여부 ==! */
      , A.PRVL_CNVN_CD               /** Code de l'accord préférentiel !== 특혜협정코드 ==! */
      , A.RCO_RUL_CN                 /** Régle à considérer de RCO !== RCO규칙내용 ==! */
      , A.HS_CD                      /** Code Sh !== HS코드 ==! */
      , A.PROD_MKNG_DESC_CN          /** Description de production de marchandise !== 상품제작설명내용 ==! */
      , A.ORCY_CNTY_CD               /** Code De Pays D'Origine !== 원산지국가코드 ==! */
      , A.IMP_CNTY_CD                /** Code de pays d'importation !== 수입국가코드 ==! */
      , A.EXP_CNTY_CD                /** Code De Pays Exportateur !== 수출국가코드 ==! */
      , A.PROD_NM                    /** Désignation des marchandises !== 상품명 ==! */
      , A.PROD_ADD_DESC_CN           /** Informations complémentaires des marchandises !== 상품부가설명내용 ==! */
      , A.BF_BFHN_JDGN_RQST_YN       /** Décision anticipée précédente ON !== 이전사전판정신청여부 ==! */
      , A.BF_RCO_REFF_NO             /** Référence du RCO précédente !== 이전RCO참조번호 ==! */
      , A.BF_BFHN_JDGN_RQST_CN       /** Contenus de la décision anticipée précédente !== 이전사전판정신청내용 ==! */
      , A.DESC_OFR_YN                /** Description ON !== 설명제공여부 ==! */
      , A.PAMP_OFR_YN                /** Brochures ON !== 팜플렛제공여부 ==! */
      , A.PHTO_OFR_YN                /** Photographies ON !== 사진제공여부 ==! */
      , A.RPDC_OFR_YN                /** Rapports/PV d'expertise ON !== 보고서제공여부 ==! */
      , A.USER_MANL_OFR_YN           /** Guide utilisateur ON !== 사용자매뉴얼제공여부 ==! */
      , A.OTHS_OFR_YN                /** Autre à founir O/N !== 기타제공여부 ==! */
      , A.OTHS_OFR_CN                /** Autres !== 기타제공내용 ==! */
      <!--      , A.SAMP_RFUN_YN               /** Restitution de l'échantillon ON !== 견본반환여부 ==! */-->
      , A.DESC_ATCH_FILE_ID          /** ID de la pièce jointe d’explication !== 설명첨부파일ID ==! */
      , A.PAMP_ATCH_FILE_ID          /** ID de la pièce jointe de brochure !== 팜플렛첨부파일ID ==! */
      , A.PHTO_ATCH_FILE_ID          /** ID de la pièce jointe de photo !== 사진첨부파일ID ==! */
      , A.RPDC_ATCH_FILE_ID          /** ID de la pièce jointe de rapport !== 보고서첨부파일ID ==! */
      , A.USER_MANL_ATCH_FILE_ID     /** ID de la pièce jointe de manuel d’utilisation !== 사용자매뉴얼첨부파일ID ==! */
      , A.OTHS_OFR_ATCH_FILE_ID      /** ID de l'autre pièce jointe !== 기타제공첨부파일ID ==! */
      , A.SAME_JDGN_YN               /** Que le même jugement !== 동일판정여부 ==! */
      , A.SAME_JDGN_CN               /** Même contenu de jugement !== 동일판정내용 ==! */
      , A.INFO_MAKE_CFRM_YN          /** Vérification de rédaction des informations O/N !== 정보작성확인여부 ==! */
      , A.LAST_YN                    /** Final On !== 최종여부 ==! */
      , A.DEL_YN                     /** Suppression On !== 삭제여부 ==! */
      , A.FRST_REGST_ID              /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , A.FRST_RGSR_DTTM             /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , A.LAST_CHPR_ID               /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , A.LAST_CHG_DTTM              /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , B.HIST_SRNO                  /** N° serie de l'historique !== 이력일련번호 ==! */
      , NVL(B.PRCS_STTS_CD, 'A01') AS PRCS_STTS_CD          /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , B.CSTM_CD                    /** Code douanier de réception !== 세관코드 ==! */
      , B.DEPT_CD                    /** Code de service !== 부서코드 ==! */
      , B.AUDT_EMP_ID                /** ID de l'insepcteur !== 심사직원ID ==! */
      , B.VALD_STRT_DT               /** Date de début de validité !== 유효시작일자 ==! */
      , B.VALD_END_DT                /** Date de fin de validité !== 유효종료일자 ==! */
      , C.SPLM_QRY_CN                /** Contenu de la demande de complément !== 보완요구내용 ==! */
      , C.SPLM_TKAC_CN               /** Mesures complémentaires !== 보완조치내용 ==! */
      , C.SPLM_TKAC_ATCH_FILE_ID     /** ID des pièces jointes des mesures complémentaires !== 보완조치첨부파일ID ==! */
    FROM   TB_CLRE_RCO_RQST A
         , TB_CLRI_RCO_AUDT B
         , TB_CLRI_BFHN_JDGN_SPLM_QRY C
    WHERE
        A.ORCY_BFHN_JDGN_RQST_NO = B.ORCY_BFHN_JDGN_RQST_NO (+)
    AND	A.ORCY_BFHN_JDGN_RQST_NO = C.BFHN_JDGN_RQST_NO (+)
    AND	A.MDFY_DGCNT = C.SPLM_QRY_DGCNT (+)   <!--외부 정정차수 = 보안요구 차수-->
    AND A.DEL_YN (+) = 'N'           /** Suppression ON !== 삭제여부 ==! */
    AND B.DEL_YN (+) = 'N'           /** Suppression ON !== 삭제여부 ==! */
    AND C.DEL_YN (+) = 'N'           /** Suppression ON !== 삭제여부 ==! */
    AND A.LAST_YN (+) = 'Y'          /** Final On !== 최종여부 ==! */
    AND B.LAST_YN (+) = 'Y'          /** Final On !== 최종여부 ==! */
    <if test="rqstDtFrom != null and rqstDtFrom != '' and rqstDtTo != null and rqstDtTo != ''">
      AND  A.RQST_DT BETWEEN TO_CHAR(TO_DATE(#{rqstDtFrom}, 'DD/MM/YYYY'), 'YYYYMMDD') AND TO_CHAR(TO_DATE(#{rqstDtTo}, 'DD/MM/YYYY'), 'YYYYMMDD') /** Date De Demande !== 신청일자 ==! */
    </if>
    <if test="hsCd != null and hsCd != ''">
      AND  A.HS_CD = #{hsCd}           /** Code Sh !== HS코드 ==! */
    </if>
    <if test="prodNm != null and prodNm != ''">
      AND  A.PROD_NM = #{prodNm}       /** Désignation des marchandises !== 상품명 ==! */
    </if>
    <if test="orcyBfhnJdgnRqstNo != null and orcyBfhnJdgnRqstNo != ''">
      AND  A.ORCY_BFHN_JDGN_RQST_NO = #{orcyBfhnJdgnRqstNo}       /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
    </if>
    <if test="orcyBfhnJdgnPermNo != null and orcyBfhnJdgnPermNo != ''">
      AND  B.ORCY_BFHN_JDGN_PERM_NO = #{orcyBfhnJdgnPermNo}       /** N° de l'autorisation de décision de RCO !== 원산지사전판정허가번호 ==! */
    </if>
    <choose>
      <when test="prcsSttsCd != null and prcsSttsCd != ''">
        AND B.PRCS_STTS_CD = #{prcsSttsCd}                 /** Code De Statut De Traitement !== 처리상태코드 ==! */
      </when>
      <otherwise>
        <choose>
          <when test="otrqTpCd != null and otrqTpCd != ''">
            AND C.OTRQ_TP_CD (+) = #{otrqTpCd}                 /** Code de division des autres demandes !== 기타신청구분코드(10:레짐신청,20:품목분류사전판정,30:원산지사전판정,40:특송물품,50:우편물) ==! */
            AND B.PRCS_STTS_CD IN ('A04', 'A06', 'J02', 'D01', 'B02')
          </when>
          <otherwise>
            AND B.PRCS_STTS_CD IN ('B02', 'D02', 'D05', 'F01', 'I01', 'I02', 'D08', 'D09', 'I03', 'G03', 'J04')
          </otherwise>
        </choose>
      </otherwise>
    </choose>
    ORDER BY A.ORCY_BFHN_JDGN_RQST_NO DESC
    <include refid="pagination.footer" ></include>
  </select>

  <!--
    Voir les détails de la Consulter la liste des demandes de RCO !==원산지 사전판정신청 상세 조회 ==!
    (Song JunYoung)
    -->
  <select id="selectClrOrcyBfhnJdgnRqstComn" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyBfhnJdgnRqstComnVo" resultType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyBfhnJdgnRqstComnVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRcoAudtMgmtMapper.selectClrOrcyBfhnJdgnRqstComn */
    WITH BF_RCO_SUBQ AS (
    SELECT A.ORCY_BFHN_JDGN_RQST_NO, A.PROD_NM, B.PROD_HS_CD, B.VALD_STRT_DT
    FROM TB_CLRE_RCO_RQST A
       , TB_CLRI_RCO_AUDT B
    WHERE A.ORCY_BFHN_JDGN_RQST_NO = (SELECT BF_RCO_NO FROM TB_CLRE_RCO_RQST WHERE ORCY_BFHN_JDGN_RQST_NO = #{orcyBfhnJdgnRqstNo} AND LAST_YN = 'Y')
    AND A.ORCY_BFHN_JDGN_RQST_NO = B.ORCY_BFHN_JDGN_RQST_NO
    AND A.DEL_YN = 'N'
    AND A.LAST_YN = 'Y'
    AND B.DEL_YN = 'N'
    AND B.LAST_YN = 'Y'
    )
    SELECT
        A.ORCY_BFHN_JDGN_RQST_NO     /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
      , A.MDFY_DGCNT                 /** Fréquence de rectification !== 정정차수 ==! */
      , B.ORCY_BFHN_JDGN_PERM_NO     /** N° de l'autorisation de décision de RCO !== 원산지사전판정허가번호 ==! */
      , A.RQST_DT                    /** Date De Demande !== 신청일자 ==! */
      , A.DCER_CD                    /** Code Du Déclarant !== 신고인코드 ==! */
      , A.DCER_NM                    /** Nom Du Déclarant !== 신고인명 ==! */
      , A.DCER_POST_NO               /** ZIPCODE Demandeur !== 신고인우편번호 ==! */
      , A.DCER_ADDR                  /** Adresse Du Déclarant !== 신고인주소 ==! */
      , A.DCER_TLPH_NO               /** N° Tél. Du Dénonciateur  !== 신고인전화번호 ==! */
      , A.DCER_EML                   /** E-Mail Du Dénonciateur !== 신고인이메일 ==! */
      , A.CMRC_REGS_NO               /** Numéro de registre du commerce !== 상업등기번호 ==! */
      , A.POTX_IDFY_NO               /** Numéro d’identification fiscale !== 납세식별번호 ==! */
      , A.RGPN_NM                    /** Nom et prénom (s) ou raison sociale !== 권리자명 ==! */
      , A.RGPN_POST_NO               /** ZIPCODE Titulaire. !== 권리자우편번호 ==! */
      , A.RGPN_ADDR                  /** Adresse Titulaire. !== 권리자주소 ==! */
      , A.RGPN_TLPH_NO               /** N° tél Titulaire. !== 권리자전화번호 ==! */
      , A.RGPN_EML                   /** E-mail Titulaire. !== 권리자이메일 ==! */
      , A.RGPN_CMRC_REGS_NO          /** Numéro du registre du commerce Titulaire !== 권리자상업등기번호 ==! */
      , A.RGPN_POTX_IDFY_NO          /** Numéro d’identification fiscale Titulaire !== 권리자납세식별번호 ==! */
      , A.AEO_NO                     /** N° OEA !== AEO번호 ==! */
      , A.REPB_YN                    /** Rééimission d'un RCO ON !== 재발행여부 ==! */
      , A.BF_RCO_NO                  /** Numéro de RCO précédent !== 이전RCO번호 ==! */
      , A.WKNG_PT_CD                 /** Type D'Opération !== 작업유형코드 ==! */
      , A.PRVL_ORCY_YN               /** Origine préférentielle ON !== 특혜원산지여부 ==! */
      , A.PRVL_CNVN_CD               /** Code de l'accord préférentiel !== 특혜협정코드 ==! */
      , A.RCO_RUL_CN                 /** Régle à considérer de RCO !== RCO규칙내용 ==! */
      , A.HS_CD                      /** Code Sh !== HS코드 ==! */
      , A.PROD_MKNG_DESC_CN          /** Description de production de marchandise !== 상품제작설명내용 ==! */
      , B.PROD_HS_CD                 /** Code SH du produit !== 상품HS코드 ==! */
      , A.ORCY_CNTY_CD               /** Code De Pays D'Origine !== 원산지국가코드 ==! */
      , A.IMP_CNTY_CD                /** Code de pays d'importation !== 수입국가코드 ==! */
      , A.EXP_CNTY_CD                /** Code De Pays Exportateur !== 수출국가코드 ==! */
      , A.PROD_NM                    /** Désignation des marchandises !== 상품명 ==! */
      , A.PROD_ADD_DESC_CN           /** Informations complémentaires des marchandises !== 상품부가설명내용 ==! */
      , A.BF_BFHN_JDGN_RQST_YN       /** Décision anticipée précédente ON !== 이전사전판정신청여부 ==! */
      , A.BF_BFHN_JDGN_RQST_CN       /** Contenus de la décision anticipée précédente !== 이전사전판정신청내용 ==! */
      , A.DESC_OFR_YN                /** Description ON !== 설명제공여부 ==! */
      , A.PAMP_OFR_YN                /** Brochures ON !== 팜플렛제공여부 ==! */
      , A.PHTO_OFR_YN                /** Photographies ON !== 사진제공여부 ==! */
      , A.RPDC_OFR_YN                /** Rapports/PV d'expertise ON !== 보고서제공여부 ==! */
      , A.USER_MANL_OFR_YN           /** Guide utilisateur ON !== 사용자매뉴얼제공여부 ==! */
      , A.OTHS_OFR_YN                /** Autre à founir O/N !== 기타제공여부 ==! */
      , A.OTHS_OFR_CN                /** Autres !== 기타제공내용 ==! */
      <!--      , A.SAMP_RFUN_YN               /** Restitution de l'échantillon ON !== 견본반환여부 ==! */-->
      , A.SAME_JDGN_YN               /** Que le même jugement !== 동일판정여부 ==! */
      , A.SAME_JDGN_CN               /** Même contenu de jugement !== 동일판정내용 ==! */
      , C.SPLM_QRY_CN                /** Contenu de la demande de complément !== 보완요구내용 ==! */
      , C.SPLM_TKAC_CN               /** Mesures complémentaires !== 보완조치내용 ==! */
      , C.SPLM_TKAC_ATCH_FILE_ID     /** ID des pièces jointes des mesures complémentaires !== 보완조치첨부파일ID ==! */
      , NVL(B.PRCS_STTS_CD, 'A01') AS PRCS_STTS_CD          /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , A.LAST_YN                    /** Final On !== 최종여부 ==! */
      , A.DEL_YN                     /** Suppression On !== 삭제여부 ==! */
      , A.FRST_REGST_ID              /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , A.FRST_RGSR_DTTM             /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , A.LAST_CHPR_ID               /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , A.LAST_CHG_DTTM              /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , A.DESC_ATCH_FILE_ID          /** ID de la pièce jointe d’explication !== 설명첨부파일ID ==! */
      , A.PAMP_ATCH_FILE_ID          /** ID de la pièce jointe de brochure !== 팜플렛첨부파일ID ==! */
      , A.PHTO_ATCH_FILE_ID          /** ID de la pièce jointe de photo !== 사진첨부파일ID ==! */
      , A.RPDC_ATCH_FILE_ID          /** ID de la pièce jointe de rapport !== 보고서첨부파일ID ==! */
      , A.USER_MANL_ATCH_FILE_ID     /** ID de la pièce jointe de manuel d’utilisation !== 사용자매뉴얼첨부파일ID ==! */
      , A.OTHS_OFR_ATCH_FILE_ID      /** ID de l'autre pièce jointe !== 기타제공첨부파일ID ==! */
      , A.INFO_MAKE_CFRM_YN          /** Vérification de rédaction des informations O/N !== 정보작성확인여부 ==! */
      , B.VALD_STRT_DT               /** Date de début de validité !== 유효시작일자 ==! */
      , B.CSTM_CD                    /** Code douanier de réception !== 세관코드 ==! */
      , B.DEPT_CD                    /** Code de service !== 부서코드 ==! */
      , B.AUDT_EMP_ID                /** ID de l'insepcteur !== 심사직원ID ==! */
      , B.CNCL_RSN_CD                /** Code du motif d'annulation !== 취소사유코드 ==! */
      , B.CNCL_RSN_CN                /** Contenus du motif d'annulation !== 취소사유내용 ==! */
      , B.PROD_HS_CD                 /** Code SH du produit !== 상품HS코드 ==! */
      , B.AUDT_ATCH_FILE_ID          /** ID du document joint pour le contrôle !== 심사첨부파일ID ==! */
      <if test="bfRcoNo != null and bfRcoNo != ''">
        , D.PROD_NM AS BF_PROD_NM
        , D.PROD_HS_CD AS BF_PROD_HS_CD
        , D.VALD_STRT_DT AS BF_VALD_STRT_DT
      </if>
    FROM  TB_CLRE_RCO_RQST A
        , TB_CLRI_RCO_AUDT B
        , TB_CLRI_BFHN_JDGN_SPLM_QRY C
      <if test="bfRcoNo != null and bfRcoNo != ''">
        , BF_RCO_SUBQ D
      </if>
    WHERE
        A.ORCY_BFHN_JDGN_RQST_NO = B.ORCY_BFHN_JDGN_RQST_NO (+)
    AND	A.ORCY_BFHN_JDGN_RQST_NO = C.BFHN_JDGN_RQST_NO (+)
    AND	A.MDFY_DGCNT = C.SPLM_QRY_DGCNT (+)   <!--외부 정정차수 = 보안요구 차수-->
    AND A.DEL_YN (+) = 'N'           /** Suppression ON !== 삭제여부 ==! */
    AND B.DEL_YN (+) = 'N'           /** Suppression ON !== 삭제여부 ==! */
    AND C.DEL_YN (+) = 'N'           /** Suppression ON !== 삭제여부 ==! */
    AND A.LAST_YN (+) = 'Y'          /** Final On !== 최종여부 ==! */
    AND B.LAST_YN (+) = 'Y'          /** Final On !== 최종여부 ==! */
    AND A.ORCY_BFHN_JDGN_RQST_NO = #{orcyBfhnJdgnRqstNo}           /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
    <if test="mdfyDgcnt != null">
      <if test="mdfyDgcnt != ''or mdfyDgcnt == 0">
        AND A.MDFY_DGCNT (+) = #{mdfyDgcnt}                          /** Fréquence de rectification !== 정정차수 ==! */
      </if>
    </if>
  </select>

  <!--
    Enregistrement de la Consulter la liste des demandes de RCO !== 원산지 사전판정신청 등록 ==!
    (Song JunYoung)
    -->
  <insert id="insertClrOrcyBfhnJdgnRqstComn" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyBfhnJdgnRqstComnVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRcoAudtMgmtMapper.insertClrOrcyBfhnJdgnRqstComn */
    <selectKey resultType="java.math.BigDecimal" keyProperty="mdfyDgcnt" order="BEFORE">
      SELECT NVL(MAX(MDFY_DGCNT), '0') + 1 FROM TB_CLRE_RCO_RQST WHERE ORCY_BFHN_JDGN_RQST_NO = #{orcyBfhnJdgnRqstNo} /** Fréquence de rectification !== 정정차수 ==! */
    </selectKey>
    INSERT INTO TB_CLRE_RCO_RQST
      (
        ORCY_BFHN_JDGN_RQST_NO       /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
      , MDFY_DGCNT                   /** Fréquence de rectification !== 정정차수 ==! */
      , RQST_DT                      /** Date De Demande !== 신청일자 ==! */
      , DCER_CD                      /** Code Du Déclarant !== 신고인코드 ==! */
      , DCER_NM                      /** Nom Du Déclarant !== 신고인명 ==! */
      , DCER_POST_NO                 /** ZIPCODE Demandeur !== 신고인우편번호 ==! */
      , DCER_ADDR                    /** Adresse Du Déclarant !== 신고인주소 ==! */
      , DCER_TLPH_NO                 /** N° Tél. Du Dénonciateur  !== 신고인전화번호 ==! */
      , DCER_EML                     /** E-Mail Du Dénonciateur !== 신고인이메일 ==! */
      , CMRC_REGS_NO                 /** Numéro de registre du commerce !== 상업등기번호 ==! */
      , POTX_IDFY_NO                 /** Numéro d’identification fiscale !== 납세식별번호 ==! */
      , RGPN_NM                      /** Nom et prénom (s) ou raison sociale !== 권리자명 ==! */
      , RGPN_POST_NO                 /** ZIPCODE Titulaire. !== 권리자우편번호 ==! */
      , RGPN_ADDR                    /** Adresse Titulaire. !== 권리자주소 ==! */
      , RGPN_TLPH_NO                 /** N° tél Titulaire. !== 권리자전화번호 ==! */
      , RGPN_EML                     /** E-mail Titulaire. !== 권리자이메일 ==! */
      , RGPN_CMRC_REGS_NO            /** Numéro du registre du commerce Titulaire !== 권리자상업등기번호 ==! */
      , RGPN_POTX_IDFY_NO            /** Numéro d’identification fiscale Titulaire !== 권리자납세식별번호 ==! */
      , AEO_NO                       /** N° OEA !== AEO번호 ==! */
      , REPB_YN                      /** Rééimission d'un RCO ON !== 재발행여부 ==! */
      , BF_RCO_NO                    /** Numéro de RCO précédent !== 이전RCO번호 ==! */
      , WKNG_PT_CD                   /** Type D'Opération !== 작업유형코드 ==! */
      , PRVL_ORCY_YN                 /** Origine préférentielle ON !== 특혜원산지여부 ==! */
      , PRVL_CNVN_CD                 /** Code de l'accord préférentiel !== 특혜협정코드 ==! */
      , RCO_RUL_CN                   /** Régle à considérer de RCO !== RCO규칙내용 ==! */
      , HS_CD                        /** Code Sh !== HS코드 ==! */
      , PROD_MKNG_DESC_CN            /** Description de production de marchandise !== 상품제작설명내용 ==! */
      , ORCY_CNTY_CD                 /** Code De Pays D'Origine !== 원산지국가코드 ==! */
      , IMP_CNTY_CD                  /** Code de pays d'importation !== 수입국가코드 ==! */
      , EXP_CNTY_CD                  /** Code De Pays Exportateur !== 수출국가코드 ==! */
      , PROD_NM                      /** Désignation des marchandises !== 상품명 ==! */
      , PROD_ADD_DESC_CN             /** Informations complémentaires des marchandises !== 상품부가설명내용 ==! */
      , BF_BFHN_JDGN_RQST_YN         /** Décision anticipée précédente ON !== 이전사전판정신청여부 ==! */
      , BF_BFHN_JDGN_RQST_CN         /** Contenus de la décision anticipée précédente !== 이전사전판정신청내용 ==! */
      , DESC_OFR_YN                  /** Description ON !== 설명제공여부 ==! */
      , PAMP_OFR_YN                  /** Brochures ON !== 팜플렛제공여부 ==! */
      , PHTO_OFR_YN                  /** Photographies ON !== 사진제공여부 ==! */
      , RPDC_OFR_YN                  /** Rapports/PV d'expertise ON !== 보고서제공여부 ==! */
      , USER_MANL_OFR_YN             /** Guide utilisateur ON !== 사용자매뉴얼제공여부 ==! */
      , OTHS_OFR_YN                  /** Autre à founir O/N !== 기타제공여부 ==! */
      , OTHS_OFR_CN                  /** Autres !== 기타제공내용 ==! */
      , SAME_JDGN_YN                 /** Que le même jugement !== 동일판정여부 ==! */
      , SAME_JDGN_CN                 /** Même contenu de jugement !== 동일판정내용 ==! */
      , LAST_YN                      /** Final On !== 최종여부 ==! */
      , DEL_YN                       /** Suppression On !== 삭제여부 ==! */
      , FRST_REGST_ID                /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , FRST_RGSR_DTTM               /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , LAST_CHPR_ID                 /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , LAST_CHG_DTTM                /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , DESC_ATCH_FILE_ID            /** ID de la pièce jointe d’explication !== 설명첨부파일ID ==! */
      , PAMP_ATCH_FILE_ID            /** ID de la pièce jointe de brochure !== 팜플렛첨부파일ID ==! */
      , PHTO_ATCH_FILE_ID            /** ID de la pièce jointe de photo !== 사진첨부파일ID ==! */
      , RPDC_ATCH_FILE_ID            /** ID de la pièce jointe de rapport !== 보고서첨부파일ID ==! */
      , USER_MANL_ATCH_FILE_ID       /** ID de la pièce jointe de manuel d’utilisation !== 사용자매뉴얼첨부파일ID ==! */
      , OTHS_OFR_ATCH_FILE_ID        /** ID de l'autre pièce jointe !== 기타제공첨부파일ID ==! */
      , INFO_MAKE_CFRM_YN            /** Vérification de rédaction des informations O/N !== 정보작성확인여부 ==! */
      )
    VALUES
      (
        #{orcyBfhnJdgnRqstNo}        /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
      , #{mdfyDgcnt}                 /** Fréquence de rectification !== 정정차수 ==! */
      , TO_CHAR(SYSDATE, 'YYYYMMDD') /** Date De Demande !== 신청일자 ==! */
      , #{dcerCd}                    /** Code Du Déclarant !== 신고인코드 ==! */
      , #{dcerNm}                    /** Nom Du Déclarant !== 신고인명 ==! */
      , #{dcerPostNo}                /** ZIPCODE Demandeur !== 신고인우편번호 ==! */
      , #{dcerAddr}                  /** Adresse Du Déclarant !== 신고인주소 ==! */
      , #{dcerTlphNo}                /** N° Tél. Du Dénonciateur  !== 신고인전화번호 ==! */
      , #{dcerEml}                   /** E-Mail Du Dénonciateur !== 신고인이메일 ==! */
      , #{cmrcRegsNo}                /** Numéro de registre du commerce !== 상업등기번호 ==! */
      , #{potxIdfyNo}                /** Numéro d’identification fiscale !== 납세식별번호 ==! */
      , #{rgpnNm}                    /** Nom et prénom (s) ou raison sociale !== 권리자명 ==! */
      , #{rgpnPostNo}                /** ZIPCODE Titulaire. !== 권리자우편번호 ==! */
      , #{rgpnAddr}                  /** Adresse Titulaire. !== 권리자주소 ==! */
      , #{rgpnTlphNo}                /** N° tél Titulaire. !== 권리자전화번호 ==! */
      , #{rgpnEml}                   /** E-mail Titulaire. !== 권리자이메일 ==! */
      , #{rgpnCmrcRegsNo}            /** Numéro du registre du commerce Titulaire !== 권리자상업등기번호 ==! */
      , #{rgpnPotxIdfyNo}            /** Numéro d’identification fiscale Titulaire !== 권리자납세식별번호 ==! */
      , #{aeoNo}                     /** N° OEA !== AEO번호 ==! */
      , #{repbYn}                    /** Rééimission d'un RCO ON !== 재발행여부 ==! */
      , #{bfRcoNo}                   /** Numéro de RCO précédent !== 이전RCO번호 ==! */
      , #{wkngPtCd}                  /** Type D'Opération !== 작업유형코드 ==! */
      , #{prvlOrcyYn}                /** Origine préférentielle ON !== 특혜원산지여부 ==! */
      , #{prvlCnvnCd}                /** Code de l'accord préférentiel !== 특혜협정코드 ==! */
      , #{rcoRulCn}                  /** Régle à considérer de RCO !== RCO규칙내용 ==! */
      , #{hsCd}                      /** Code Sh !== HS코드 ==! */
      , #{prodMkngDescCn}            /** Description de production de marchandise !== 상품제작설명내용 ==! */
      , #{orcyCntyCd}                /** Code De Pays D'Origine !== 원산지국가코드 ==! */
      , #{impCntyCd}                 /** Code de pays d'importation !== 수입국가코드 ==! */
      , #{expCntyCd}                 /** Code De Pays Exportateur !== 수출국가코드 ==! */
      , #{prodNm}                    /** Désignation des marchandises !== 상품명 ==! */
      , #{prodAddDescCn}             /** Informations complémentaires des marchandises !== 상품부가설명내용 ==! */
      , #{bfBfhnJdgnRqstYn}          /** Décision anticipée précédente ON !== 이전사전판정신청여부 ==! */
      , #{bfBfhnJdgnRqstCn}          /** Contenus de la décision anticipée précédente !== 이전사전판정신청내용 ==! */
      , #{descOfrYn}                 /** Description ON !== 설명제공여부 ==! */
      , #{pampOfrYn}                 /** Brochures ON !== 팜플렛제공여부 ==! */
      , #{phtoOfrYn}                 /** Photographies ON !== 사진제공여부 ==! */
      , #{rpdcOfrYn}                 /** Rapports/PV d'expertise ON !== 보고서제공여부 ==! */
      , #{userManlOfrYn}             /** Guide utilisateur ON !== 사용자매뉴얼제공여부 ==! */
      , #{othsOfrYn}                 /** Autre à founir O/N !== 기타제공여부 ==! */
      , #{othsOfrCn}                 /** Autres !== 기타제공내용 ==! */
      , #{sameJdgnYn}                /** Que le même jugement !== 동일판정여부 ==! */
      , #{sameJdgnCn}                /** Même contenu de jugement !== 동일판정내용 ==! */
      , #{lastYn}                    /** Final On !== 최종여부 ==! */
      , 'N'                          /** Suppression On !== 삭제여부 ==! */
      , #{frstRegstId}               /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , SYSTIMESTAMP                 /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , #{lastChprId}                /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , SYSTIMESTAMP                 /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , #{descAtchFileId}            /** ID de la pièce jointe d’explication !== 설명첨부파일ID ==! */
      , #{pampAtchFileId}            /** ID de la pièce jointe de brochure !== 팜플렛첨부파일ID ==! */
      , #{phtoAtchFileId}            /** ID de la pièce jointe de photo !== 사진첨부파일ID ==! */
      , #{rpdcAtchFileId}            /** ID de la pièce jointe de rapport !== 보고서첨부파일ID ==! */
      , #{userManlAtchFileId}        /** ID de la pièce jointe de manuel d’utilisation !== 사용자매뉴얼첨부파일ID ==! */
      , #{othsOfrAtchFileId}         /** ID de l'autre pièce jointe !== 기타제공첨부파일ID ==! */
      , #{infoMakeCfrmYn}            /** Vérification de rédaction des informations O/N !== 정보작성확인여부 ==! */
      )
  </insert>

  <!--
    Modifier la Consulter la liste des demandes de RCO !== 원산지 사전판정신청 목록조회 수정 ==!
    (Song JunYoung)
    -->
  <update id="updateClrOrcyBfhnJdgnRqstComn" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyBfhnJdgnRqstComnVo">
    /* alpass.ipt.clr.sdr.ajm.mapper.ClrRcoAudtMgmtMapper.updateClrOrcyBfhnJdgnRqstComn */
    UPDATE  TB_CLRE_RCO_RQST
    <trim prefixOverrides="," >
      <set>
        <if test="lastYn != null and lastYn != ''">
          , LAST_YN = #{lastYn}                        /** Final On !== 최종여부 ==! */
        </if>
      </set>
    </trim>
    WHERE  DEL_YN = 'N'                                /** Suppression ON !== 삭제여부 ==! */
    AND LAST_YN = 'Y'                                  /** Final On !== 최종여부 ==! */
    AND ORCY_BFHN_JDGN_RQST_NO = #{orcyBfhnJdgnRqstNo} /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
    AND MDFY_DGCNT = #{mdfyDgcnt}                      /** Fréquence de rectification !== 정정차수 ==! */
  </update>

  <!--
    Voir la liste des DETAIL DE DEMANDE DE CERTIFICAT d'ORIGINE !== 원산지식별정보 목록 조회 ==!
    (Song JunYoung)
    -->
  <select id="selectClrOrcyIdfyInfoList" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyIdfyInfoVo" resultType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyIdfyInfoVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRcoAudtMgmtMapper.selectClrOrcyIdfyInfoList */
    <include refid="pagination.header" ></include>
    SELECT
        A.ORCY_BFHN_JDGN_RQST_NO     /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
      , A.MDFY_DGCNT                 /** Fréquence de rectification !== 정정차수 ==! */
      , A.ORCY_IDFY_SRNO             /** N° de série de la détermination de l'origine !== 원산지식별일련번호 ==! */
      , A.HS_CD                      /** Code Sh !== HS코드 ==! */
      , A.ORCY_CNTY_CD               /** Code De Pays D'Origine !== 원산지국가코드 ==! */
      , A.AMT                        /** Montant !== 금액 ==! */
      , A.WGHT                       /** Poids !== 중량 ==! */
      , A.USE_MTRL_NM                /** Nom des matières utilisées !== 사용재료명 ==! */
      , A.DEL_YN                     /** Suppression On !== 삭제여부 ==! */
      , A.FRST_REGST_ID              /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , A.FRST_RGSR_DTTM             /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , A.LAST_CHPR_ID               /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , A.LAST_CHG_DTTM              /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
    FROM   TB_CLRE_ORCY_IDFY_INFO A
    <where>
      <if test="delYn != null and delYn != ''">
        AND DEL_YN = #{delYn}                                      /** Suppression ON !== 삭제여부 ==! */
      </if>
      <if test="orcyBfhnJdgnRqstNo != null and orcyBfhnJdgnRqstNo != ''">
        AND A.ORCY_BFHN_JDGN_RQST_NO = #{orcyBfhnJdgnRqstNo}       /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
      </if>
      <if test="orcyIdfySrno != null and orcyIdfySrno != ''">
        AND A.ORCY_IDFY_SRNO = #{orcyIdfySrno}                     /** N° De Séquence !== 일련번호 ==! */
      </if>
      <if test="mdfyDgcnt != null and mdfyDgcnt != ''">
        AND A.MDFY_DGCNT = #{mdfyDgcnt}                            /** Fréquence de rectification !== 정정차수 ==! */
      </if>
    </where>
    <include refid="pagination.footer" ></include>
  </select>

  <!--
     Enregistrement de la DETAIL DE DEMANDE DE CERTIFICAT d'ORIGINE !== 원산지식별정보 등록 ==!
     (Song JunYoung)
     -->
  <insert id="insertClrOrcyIdfyInfo" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyIdfyInfoVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRcoAudtMgmtMapper.insertClrOrcyIdfyInfo */
    INSERT INTO TB_CLRE_ORCY_IDFY_INFO
      (
        ORCY_BFHN_JDGN_RQST_NO       /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
      , MDFY_DGCNT                   /** Fréquence de rectification !== 정정차수 ==! */
      , ORCY_IDFY_SRNO               /** N° de série de la détermination de l'origine !== 원산지식별일련번호 ==! */
      , HS_CD                        /** Code Sh !== HS코드 ==! */
      , ORCY_CNTY_CD                 /** Code De Pays D'Origine !== 원산지국가코드 ==! */
      , AMT                          /** Montant !== 금액 ==! */
      , WGHT                         /** Poids !== 중량 ==! */
      , USE_MTRL_NM                  /** Nom des matières utilisées !== 사용재료명 ==! */
      , DEL_YN                       /** Suppression On !== 삭제여부 ==! */
      , FRST_REGST_ID                /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , FRST_RGSR_DTTM               /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , LAST_CHPR_ID                 /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , LAST_CHG_DTTM                /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      )
    VALUES
      (
        #{orcyBfhnJdgnRqstNo}        /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
      , #{mdfyDgcnt}                 /** Fréquence de rectification !== 정정차수 ==! */
      , #{orcyIdfySrno}              /** N° de série de la détermination de l'origine !== 원산지식별일련번호 ==! */
      , #{hsCd}                      /** Code Sh !== HS코드 ==! */
      , #{orcyCntyCd}                /** Code De Pays D'Origine !== 원산지국가코드 ==! */
      , #{amt}                       /** Montant !== 금액 ==! */
      , #{wght}                      /** Poids !== 중량 ==! */
      , #{useMtrlNm}                 /** Nom des matières utilisées !== 사용재료명 ==! */
      , 'N'                          /** Suppression On !== 삭제여부 ==! */
      , #{frstRegstId}               /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , SYSTIMESTAMP                 /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , #{lastChprId}                /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , SYSTIMESTAMP                 /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      )
  </insert>

  <!--
    Supprimer la DETAIL DE DEMANDE DE CERTIFICAT d'ORIGINE !== 원산지식별정보 삭제 ==!
    (Song JunYoung)
    -->
  <update id="deleteClrOrcyIdfyInfo" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyIdfyInfoVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRcoAudtMgmtMapper.updateDelYnClrOrcyIdfyInfo */
    UPDATE  TB_CLRE_ORCY_IDFY_INFO
    <set>
        DEL_YN = 'Y'                                  /** Suppression ON !== 삭제여부 ==! */
      , LAST_CHPR_ID = #{lastChprId}                  /** ID du modificateur final !== 최종변경자ID ==! */
      , LAST_CHG_DTTM = SYSTIMESTAMP                  /** Date et heure de modification finale !== 최종변경일시 ==! */
    </set>
    WHERE  DEL_YN = 'N'                               /** Suppression ON !== 삭제여부 ==! */
    AND  ORCY_BFHN_JDGN_RQST_NO = #{orcyBfhnJdgnRqstNo}       /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
  </update>

  <!--
    Voir la liste des DEMANDE DE RENSEIGNEMENT CONTRAIGNANT SUR l'ORIGINE COMMUNE !== 원산지사전판정심사공통 조회 ==!
    (Song JunYoung)
    -->
  <select id="selectClrOrcyBfhnJdgnAudtComn" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyBfhnJdgnAudtComnVo" resultType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyBfhnJdgnAudtComnVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRcoAudtMgmtMapper..selectClrOrcyBfhnJdgnAudtComn */
    SELECT
        A.ORCY_BFHN_JDGN_RQST_NO     /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
      , A.HIST_SRNO                  /** N° serie de l'historique !== 이력일련번호 ==! */
      , A.ORCY_BFHN_JDGN_PERM_NO     /** N° de l'autorisation de décision de RCO !== 원산지사전판정허가번호 ==! */
      , B.RQST_DT                    /** Date De Demande !== 신청일자 ==! */
      , B.DCER_CD                    /** Code Du Déclarant !== 신고인코드 ==! */
      , B.POTX_IDFY_NO               /** Numéro d’identification fiscale !== 납세식별번호 ==! */
      , B.RGPN_POTX_IDFY_NO          /** Numéro d’identification fiscale Titulaire !== 권리자납세식별번호 ==! */
      , B.AEO_NO                     /** N° OEA !== AEO번호 ==! */
      , A.VALD_STRT_DT               /** Date de début de validité !== 유효시작일자 ==! */
      , A.VALD_END_DT                /** Date de fin de validité !== 유효종료일자 ==! */
      , A.SAMP_OFR_YN                /** Echantillon offert ON !== 견본제공여부 ==! */
      , A.PROD_HS_CD                 /** Code SH du produit !== 상품HS코드 ==! */
      , A.PROD_DESC_CN               /** Contenu de description de marchandise !== 상품설명내용 ==! */
      , A.PROD_NM                    /** Désignation des marchandises !== 상품명 ==! */
      , A.PROD_ADD_DESC_CN           /** Informations complémentaires des marchandises !== 상품부가설명내용 ==! */
      , A.ORCY_DTRM_PROF_CN          /** Justificatifs de la détermination de l’origine de la marchandise !== 원산지결정증명내용 ==! */
      , A.AUDT_ATCH_FILE_ID          /** ID du document joint pour le contrôle !== 심사첨부파일ID ==! */
      , B.DESC_OFR_YN                /** Description ON !== 설명제공여부 ==! */
      , B.PAMP_OFR_YN                /** Brochures ON !== 팜플렛제공여부 ==! */
      , B.PHTO_OFR_YN                /** Photographies ON !== 사진제공여부 ==! */
      , B.RPDC_OFR_YN                /** Rapports/PV d'expertise ON !== 보고서제공여부 ==! */
      , B.USER_MANL_OFR_YN           /** Guide utilisateur ON !== 사용자매뉴얼제공여부 ==! */
      , B.OTHS_OFR_YN                /** Autre à founir O/N !== 기타제공여부 ==! */
      , A.MDFY_DGCNT                 /** Fréquence de rectification !== 정정차수 ==! */
      , A.PRCS_STTS_CD               /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , A.CSTM_CD                    /** Code douanier de réception !== 세관코드 ==! */
      , A.DEPT_CD                    /** Code de service !== 부서코드 ==! */
      , A.AUDT_DEPT_CD               /** Code de Section du contrôle !== 심사부서코드 ==! */
      , A.AUDT_EMP_ID                /** ID de l'insepcteur !== 심사직원ID ==! */
      , A.AUDT_PRCS_DTTM             /** Date et heure de traitement de contrôle !== 심사처리일시 ==! */
      , A.AUDT_RSLT_CD               /** Code De Résultat De La Vérification !== 심사결과코드 ==! */
      , A.AUDT_RSLT_CN               /** Contenu Du Résultat De La Vérification !== 심사결과내용 ==! */
      , A.CNCL_RSN_CD                /** Code du motif d'annulation !== 취소사유코드 ==! */
      , A.CNCL_RSN_CN                /** Contenus du motif d'annulation !== 취소사유내용 ==! */
      , A.LAST_YN                    /** Final On !== 최종여부 ==! */
      , A.DEL_YN                     /** Suppression On !== 삭제여부 ==! */
      , A.FRST_REGST_ID              /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , A.FRST_RGSR_DTTM             /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , A.LAST_CHPR_ID               /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , A.LAST_CHG_DTTM              /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , A.APRV_ID                    /** Id De L'Approbation !== 결재ID ==! */
      , B.RGPN_NM                    /** Nom et prénom (s) ou raison sociale !== 권리자명 ==! */
      , B.RGPN_POST_NO               /** ZIPCODE Titulaire. !== 권리자우편번호 ==! */
      , B.RGPN_ADDR                  /** Adresse Titulaire. !== 권리자주소 ==! */
      , B.RGPN_TLPH_NO               /** N° tél Titulaire. !== 권리자전화번호 ==! */
      , B.RGPN_EML                   /** E-mail Titulaire. !== 권리자이메일 ==! */
      , B.RGPN_CMRC_REGS_NO          /** Numéro du registre du commerce Titulaire !== 권리자상업등기번호 ==! */
      , B.RGPN_POTX_IDFY_NO          /** Numéro d’identification fiscale Titulaire !== 권리자납세식별번호 ==! */
      , B.AEO_NO                     /** N° OEA !== AEO번호 ==! */
      , B.HS_CD                      /** Code Sh !== HS코드 ==! */
      , B.PROD_MKNG_DESC_CN          /** Description de production de marchandise !== 상품제작설명내용 ==! */
      , B.PROD_NM AS RQST_PROD_NM                      /** Désignation des marchandises !== 상품명 ==! */
      , B.PROD_ADD_DESC_CN AS RQST_PROD_ADD_DESC_CN    /** Informations complémentaires des marchandises !== 상품부가설명내용 ==! */
    FROM TB_CLRI_RCO_AUDT A
       , TB_CLRE_RCO_RQST B
    WHERE
        A.ORCY_BFHN_JDGN_RQST_NO = B.ORCY_BFHN_JDGN_RQST_NO (+)
    AND A.DEL_YN (+) = 'N'           /** Suppression ON !== 삭제여부 ==! */
    AND A.LAST_YN (+) = 'Y'          /** Final On !== 최종여부 ==! */
    AND B.DEL_YN (+) = 'N'           /** Suppression ON !== 삭제여부 ==! */
    AND B.LAST_YN (+) = 'Y'          /** Final On !== 최종여부 ==! */
    <if test="orcyBfhnJdgnRqstNo != null and orcyBfhnJdgnRqstNo != ''">
      AND A.ORCY_BFHN_JDGN_RQST_NO = #{orcyBfhnJdgnRqstNo}       /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
    </if>
    <if test="orcyBfhnJdgnPermNo != null and orcyBfhnJdgnPermNo != ''">
      AND A.ORCY_BFHN_JDGN_PERM_NO = #{orcyBfhnJdgnPermNo}       /** N° de l'autorisation de décision de RCO !== 원산지사전판정허가번호 ==! */
    </if>
  </select>

  <!--
    Enregistrement de la DEMANDE DE RENSEIGNEMENT CONTRAIGNANT SUR l'ORIGINE COMMUNE !== 원산지사전판정심사공통 등록 ==!
    (Song JunYoung)
    -->
  <insert id="insertClrOrcyBfhnJdgnAudtComn" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyBfhnJdgnAudtComnVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRcoAudtMgmtMapper.insertClrOrcyBfhnJdgnAudtComn */
    <selectKey resultType="java.math.BigDecimal" keyProperty="histSrno" order="BEFORE">
      SELECT NVL(MAX(HIST_SRNO), '0') + 1 FROM TB_CLRI_RCO_AUDT WHERE ORCY_BFHN_JDGN_RQST_NO = #{orcyBfhnJdgnRqstNo}  /** N° serie de l'historique !== 이력일련번호 ==! */
    </selectKey>
    INSERT INTO TB_CLRI_RCO_AUDT
      (
        ORCY_BFHN_JDGN_RQST_NO       /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
      , HIST_SRNO                    /** N° serie de l'historique !== 이력일련번호 ==! */
      , ORCY_BFHN_JDGN_PERM_NO       /** N° de l'autorisation de décision de RCO !== 원산지사전판정허가번호 ==! */
      , VALD_STRT_DT                 /** Date de début de validité !== 유효시작일자 ==! */
      , VALD_END_DT                  /** Date de fin de validité !== 유효종료일자 ==! */
      , SAMP_OFR_YN                  /** Echantillon offert ON !== 견본제공여부 ==! */
      , PROD_HS_CD                   /** Code SH du produit !== 상품HS코드 ==! */
      , PROD_DESC_CN                 /** Contenu de description de marchandise !== 상품설명내용 ==! */
      , PROD_NM                      /** Désignation des marchandises !== 상품명 ==! */
      , PROD_ADD_DESC_CN             /** Informations complémentaires des marchandises !== 상품부가설명내용 ==! */
      , ORCY_DTRM_PROF_CN            /** Justificatifs de la détermination de l’origine de la marchandise !== 원산지결정증명내용 ==! */
      , AUDT_ATCH_FILE_ID            /** ID du document joint pour le contrôle !== 심사첨부파일ID ==! */
      , MDFY_DGCNT                   /** Fréquence de rectification !== 정정차수 ==! */
      , PRCS_STTS_CD                 /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , CSTM_CD                      /** Code douanier de réception !== 세관코드 ==! */
      , DEPT_CD                      /** Code de service !== 부서코드 ==! */
      , AUDT_DEPT_CD                 /** Code de Section du contrôle !== 심사부서코드 ==! */
      , AUDT_EMP_ID                  /** ID de l'insepcteur !== 심사직원ID ==! */
      , AUDT_PRCS_DTTM               /** Date et heure de traitement de contrôle !== 심사처리일시 ==! */
      , AUDT_RSLT_CD                 /** Code De Résultat De La Vérification !== 심사결과코드 ==! */
      , AUDT_RSLT_CN                 /** Contenu Du Résultat De La Vérification !== 심사결과내용 ==! */
      , CNCL_RSN_CD                  /** Code du motif d'annulation !== 취소사유코드 ==! */
      , CNCL_RSN_CN                  /** Contenus du motif d'annulation !== 취소사유내용 ==! */
      , LAST_YN                      /** Final On !== 최종여부 ==! */
      , DEL_YN                       /** Suppression On !== 삭제여부 ==! */
      , FRST_REGST_ID                /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , FRST_RGSR_DTTM               /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , LAST_CHPR_ID                 /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , LAST_CHG_DTTM                /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , APRV_ID                      /** Id De L'Approbation !== 결재ID ==! */
      )
    VALUES
      (
        #{orcyBfhnJdgnRqstNo}        /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
      , #{histSrno}                  /** N° serie de l'historique !== 이력일련번호 ==! */
      , #{orcyBfhnJdgnPermNo}        /** N° de l'autorisation de décision de RCO !== 원산지사전판정허가번호 ==! */
      , #{valdStrtDt}                /** Date de début de validité !== 유효시작일자 ==! */
      , #{valdEndDt}                 /** Date de fin de validité !== 유효종료일자 ==! */
      , #{sampOfrYn}                 /** Echantillon offert ON !== 견본제공여부 ==! */
      , #{prodHsCd}                  /** Code SH du produit !== 상품HS코드 ==! */
      , #{prodDescCn}                /** Contenu de description de marchandise !== 상품설명내용 ==! */
      , #{prodNm}                    /** Désignation des marchandises !== 상품명 ==! */
      , #{prodAddDescCn}             /** Informations complémentaires des marchandises !== 상품부가설명내용 ==! */
      , #{orcyDtrmProfCn}            /** Justificatifs de la détermination de l’origine de la marchandise !== 원산지결정증명내용 ==! */
      , #{audtAtchFileId}            /** ID de pièce jointe à l'examen !== 심사첨부파일ID ==! */
      , (SELECT NVL(MAX(MDFY_DGCNT), '-1') + 1 FROM TB_CLRI_RCO_AUDT WHERE ORCY_BFHN_JDGN_RQST_NO = #{orcyBfhnJdgnRqstNo})  /** Fréquence de rectification !== 정정차수 ==! */
      , #{prcsSttsCd}                /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , #{cstmCd}                    /** Code douanier de réception !== 세관코드 ==! */
      , #{deptCd}                    /** Code de service !== 부서코드 ==! */
      , #{audtDeptCd}                /** Code de Section du contrôle !== 심사부서코드 ==! */
      , #{audtEmpId}                 /** ID de l'insepcteur !== 심사직원ID ==! */
      , SYSTIMESTAMP                 /** Date et heure de traitement de contrôle !== 심사처리일시 ==! */
      , #{audtRsltCd}                /** Code De Résultat De La Vérification !== 심사결과코드 ==! */
      , #{audtRsltCn}                /** Contenu Du Résultat De La Vérification !== 심사결과내용 ==! */
      , #{cnclRsnCd}                 /** Code du motif d'annulation !== 취소사유코드 ==! */
      , #{cnclRsnCn}                 /** Contenus du motif d'annulation !== 취소사유내용 ==! */
      , 'Y'                          /** Final On !== 최종여부 ==! */
      , 'N'                          /** Suppression On !== 삭제여부 ==! */
      , #{frstRegstId}               /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , SYSTIMESTAMP                 /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , #{lastChprId}                /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , SYSTIMESTAMP                 /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , #{aprvId}                    /** Id De L'Approbation !== 결재ID ==! */
      )
  </insert>

  <!--
    Modifier la DEMANDE DE RENSEIGNEMENT CONTRAIGNANT SUR l'ORIGINE COMMUNE !== 원산지사전판정심사공통 수정 ==!
    (Song JunYoung)
    -->
  <update id="updateClrOrcyBfhnJdgnAudtComn" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyBfhnJdgnAudtComnVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrOrcyBfhnJdgnAudtComnMapper.updateClrOrcyBfhnJdgnAudtComn */
    UPDATE  TB_CLRI_RCO_AUDT SET
    <trim prefixOverrides="," >
        ORCY_BFHN_JDGN_PERM_NO = #{orcyBfhnJdgnPermNo}       /** N° de l'autorisation de décision de RCO !== 원산지사전판정허가번호 ==! */
      , VALD_STRT_DT = #{valdStrtDt}                /** Date de début de validité !== 유효시작일자 ==! */
      , VALD_END_DT = #{valdEndDt}                  /** Date de fin de validité !== 유효종료일자 ==! */
      , SAMP_OFR_YN = #{sampOfrYn}                  /** Echantillon offert ON !== 견본제공여부 ==! */
      , PROD_HS_CD = #{prodHsCd}                    /** Code SH du produit !== 상품HS코드 ==! */
      , PROD_DESC_CN = #{prodDescCn}                /** Contenu de description de marchandise !== 상품설명내용 ==! */
      , PROD_NM = #{prodNm}                         /** Désignation des marchandises !== 상품명 ==! */
      , PROD_ADD_DESC_CN = #{prodAddDescCn}         /** Informations complémentaires des marchandises !== 상품부가설명내용 ==! */
      , ORCY_DTRM_PROF_CN = #{orcyDtrmProfCn}       /** Justificatifs de la détermination de l’origine de la marchandise !== 원산지결정증명내용 ==! */
      , AUDT_ATCH_FILE_ID = #{audtAtchFileId}       /** ID du document joint pour le contrôle !== 심사첨부파일ID ==! */
      , PRCS_STTS_CD = #{prcsSttsCd}                /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , CSTM_CD = #{cstmCd}                         /** Code douanier de réception !== 세관코드 ==! */
      , DEPT_CD = #{deptCd}                         /** Code de service !== 부서코드 ==! */
      , AUDT_DEPT_CD = #{audtDeptCd}                /** Code de Section du contrôle !== 심사부서코드 ==! */
      , AUDT_EMP_ID = #{audtEmpId}                  /** ID de l'insepcteur !== 심사직원ID ==! */
      , AUDT_PRCS_DTTM = #{audtPrcsDttm}            /** Date et heure de traitement de contrôle !== 심사처리일시 ==! */
      , AUDT_RSLT_CD = #{audtRsltCd}                /** Code De Résultat De La Vérification !== 심사결과코드 ==! */
      , AUDT_RSLT_CN = #{audtRsltCn}                /** Contenu Du Résultat De La Vérification !== 심사결과내용 ==! */
      , CNCL_RSN_CD = #{cnclRsnCd}                  /** Code du motif d'annulation !== 취소사유코드 ==! */
      , CNCL_RSN_CN = #{cnclRsnCn}                  /** Contenus du motif d'annulation !== 취소사유내용 ==! */
      , LAST_YN = #{lastYn}                         /** Final On !== 최종여부 ==! */
      , LAST_CHPR_ID = #{lastChprId}                /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , LAST_CHG_DTTM = SYSTIMESTAMP                /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , APRV_ID = #{aprvId}                         /** Id De L'Approbation !== 결재ID ==! */
    </trim>
    WHERE  DEL_YN = 'N'                                       /** Suppression ON !== 삭제여부 ==! */
    AND  ORCY_BFHN_JDGN_RQST_NO = #{orcyBfhnJdgnRqstNo}       /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
    AND  ORCY_BFHN_JDGN_PERM_NO = #{orcyBfhnJdgnPermNo}       /** N° de l'autorisation de décision de RCO !== 원산지사전판정허가번호 ==! */
  </update>

  <!--
    Modification de l'état de traitement du contrôle RCO !== 원산지사전판정심사 상태 수정 ==!
    (Park Byoungkyu)
    -->
  <update id="updateClrOrcyBfhnJdgnAudtComnStts" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyBfhnJdgnAudtComnVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrOrcyBfhnJdgnAudtComnMapper.updateClrOrcyBfhnJdgnAudtComnStts */
    UPDATE  TB_CLRI_RCO_AUDT
    <set>
        ORCY_BFHN_JDGN_PERM_NO = COALESCE(#{orcyBfhnJdgnPermNo}, ORCY_BFHN_JDGN_PERM_NO)                  /** N° de l'autorisation de décision de RCO !== 원산지사전판정허가번호 ==! */
      <if test="prcsSttsCd == 'D08' or prcsSttsCd == 'D09' or prcsSttsCd == 'G03' or prcsSttsCd == 'I01' or prcsSttsCd == 'I02' or prcsSttsCd == 'I03' or prcsSttsCd == 'I05' or prcsSttsCd == 'I06'">
        , VALD_STRT_DT = COALESCE(#{valdStrtDt}, VALD_STRT_DT)   /** Date de début de validité !== 유효시작일자 ==! */
        , VALD_END_DT = COALESCE(#{valdEndDt}, VALD_END_DT)      /** Date de fin de validité !== 유효종료일자 ==! */
      </if>
      <if test="prcsSttsCd != 'D08' and prcsSttsCd != 'D09' and prcsSttsCd != 'G03' and prcsSttsCd != 'I01' and prcsSttsCd != 'I02' and prcsSttsCd != 'I03' and prcsSttsCd != 'I05' and prcsSttsCd != 'I06'">
        , VALD_STRT_DT = COALESCE(TO_CHAR(TO_DATE(#{valdStrtDt},'DD/MM/YYYY'), 'YYYYMMDD'), VALD_STRT_DT)   /** Date de début de validité !== 유효시작일자 ==! */
        , VALD_END_DT = COALESCE(TO_CHAR(TO_DATE(#{valdEndDt},'DD/MM/YYYY'), 'YYYYMMDD'), VALD_END_DT)      /** Date de fin de validité !== 유효종료일자 ==! */
      </if>
      , SAMP_OFR_YN = COALESCE(#{sampOfrYn}, SAMP_OFR_YN)                     /** Echantillon offert ON !== 견본제공여부 ==! */
      , PROD_HS_CD = COALESCE(#{prodHsCd}, PROD_HS_CD)                        /** Code SH du produit !== 상품HS코드 ==! */
      , PROD_DESC_CN = COALESCE(#{prodDescCn}, PROD_DESC_CN)                  /** Contenu de description de marchandise !== 상품설명내용 ==! */
      , PROD_NM = COALESCE(#{prodNm}, PROD_NM)                                /** Désignation des marchandises !== 상품명 ==! */
      , PROD_ADD_DESC_CN = COALESCE(#{prodAddDescCn}, PROD_ADD_DESC_CN)       /** Informations complémentaires des marchandises !== 상품부가설명내용 ==! */
      , ORCY_DTRM_PROF_CN = COALESCE(#{orcyDtrmProfCn}, ORCY_DTRM_PROF_CN)    /** Justificatifs de la détermination de l’origine de la marchandise !== 원산지결정증명내용 ==! */
      , AUDT_ATCH_FILE_ID = COALESCE(#{audtAtchFileId}, AUDT_ATCH_FILE_ID)    /** ID de pièce jointe à l'examen !== 심사첨부파일ID ==! */
      , CSTM_CD = COALESCE(#{cstmCd}, CSTM_CD)                                /** Code douanier de réception !== 세관코드 ==! */
      , DEPT_CD = COALESCE(#{deptCd}, DEPT_CD)                                /** Code de service !== 부서코드 ==! */
      , AUDT_DEPT_CD = COALESCE(#{audtDeptCd}, AUDT_DEPT_CD)                  /** Code de Section du contrôle !== 심사부서코드 ==! */
      , AUDT_EMP_ID = COALESCE(#{audtEmpId}, AUDT_EMP_ID)                     /** ID de l'insepcteur !== 심사직원ID ==! */
      , AUDT_PRCS_DTTM = SYSTIMESTAMP                                         /** Date et heure de traitement de contrôle !== 심사처리일시 ==! */
      , AUDT_RSLT_CD = COALESCE(#{audtRsltCd}, AUDT_RSLT_CD)                  /** Code De Résultat De La Vérification !== 심사결과코드 ==! */
      , AUDT_RSLT_CN = COALESCE(#{audtRsltCn}, AUDT_RSLT_CN)                  /** Contenu Du Résultat De La Vérification !== 심사결과내용 ==! */
      , CNCL_RSN_CD = COALESCE(#{cnclRsnCd}, CNCL_RSN_CD)                     /** Code du motif d'annulation !== 취소사유코드 ==! */
      , CNCL_RSN_CN = COALESCE(#{cnclRsnCn}, CNCL_RSN_CN)                     /** Contenus du motif d'annulation !== 취소사유내용 ==! */
      , PRCS_STTS_CD = COALESCE(#{prcsSttsCd}, PRCS_STTS_CD)                  /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , LAST_YN = COALESCE(#{lastYn}, LAST_YN)                                /** Final On !== 최종여부 ==! */
      , LAST_CHPR_ID = #{lastChprId}                                          /** ID du modificateur final !== 최종변경자ID ==! */
      , LAST_CHG_DTTM = SYSTIMESTAMP                                          /** Date et heure de modification finale !== 최종변경일시 ==! */
      , APRV_ID = COALESCE(#{aprvId}, APRV_ID)                                /** Id De L'Approbation !== 결재ID ==! */
    </set>
    WHERE DEL_YN = 'N'                                          /** Suppression ON !== 삭제여부 ==! */
    AND   LAST_YN = 'Y'                                         /** Final On !== 최종여부 ==! */
    AND   ORCY_BFHN_JDGN_RQST_NO = #{orcyBfhnJdgnRqstNo}        /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
  </update>

  <!--
    Annulation de la décision précédemment délivrée !== 기존 발행건 취소 처리 ==!
    (Park Byoungkyu)
    -->
  <update id="updateClrOrcyBfhnJdgnAudtComnCancel" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyBfhnJdgnAudtComnVo">
    /* updateClrOrcyBfhnJdgnAudtComnCancel */
    UPDATE  TB_CLRI_RCO_AUDT SET
        LAST_YN = 'N'                                         /** Final On !== 최종여부 ==! */
      , LAST_CHPR_ID = #{lastChprId}                          /** ID du modificateur final !== 최종변경자ID ==! */
      , LAST_CHG_DTTM = SYSTIMESTAMP                          /** Date et heure de modification finale !== 최종변경일시 ==! */
    WHERE DEL_YN = 'N'                                        /** Suppression ON !== 삭제여부 ==! */
    AND   LAST_YN = 'Y'                                       /** Final On !== 최종여부 ==! */
    AND   ORCY_BFHN_JDGN_RQST_NO = #{orcyBfhnJdgnRqstNo}      /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
    AND   ORCY_BFHN_JDGN_PERM_NO = #{orcyBfhnJdgnPermNo}      /** N° de l'autorisation de décision de RCO !== 원산지사전판정허가번호 ==! */
  </update>

  <!--
    Supprimer la DEMANDE DE RENSEIGNEMENT CONTRAIGNANT SUR l'ORIGINE COMMUNE !== 원산지사전판정심사공통 삭제 ==!
    (Song JunYoung)
    -->
  <update id="deleteClrOrcyBfhnJdgnAudtComn" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyBfhnJdgnAudtComnVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrOrcyBfhnJdgnAudtComnMapper.deleteClrOrcyBfhnJdgnAudtComn */
    UPDATE  TB_CLRI_RCO_AUDT SET
        DEL_YN = 'Y'                                          /** Suppression ON !== 삭제여부 ==! */
      , LAST_CHPR_ID = #{lastChprId}                          /** ID du modificateur final !== 최종변경자ID ==! */
      , LAST_CHG_DTTM = SYSTIMESTAMP                          /** Date et heure de modification finale !== 최종변경일시 ==! */
    WHERE  DEL_YN = 'N'                                       /** Suppression ON !== 삭제여부 ==! */
    AND  ORCY_BFHN_JDGN_RQST_NO = #{orcyBfhnJdgnRqstNo}       /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
    AND  ORCY_BFHN_JDGN_PERM_NO = #{orcyBfhnJdgnPermNo}       /** N° de l'autorisation de décision de RCO !== 원산지사전판정허가번호 ==! */
  </update>

  <!--
    Consultation de paramètre de la période de validité de RCO !== RCO 유효기간 파라미터 조회 ==!
    (Park Byoungkyu)
    -->
  <select id="selectRcoValdRange" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyBfhnJdgnAudtComnVo" resultType="int">
    /* selectRcoValdRange */
    SELECT TO_NUMBER(PRMT_VAL_CN)
    FROM   TB_COM_PRMT
    WHERE PRMT_ID = 'CLR_0015'
  </select>

  <!--
    Consultation de la liste de l'historique de renseignement contraignant sur l'origine !== 원산지 사전판정 이력 목록 조회 ==!
    (Park Byoungkyu)
    -->
  <select id="selectClrOrcyBfhnJdgnHistList" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyBfhnJdgnRqstComnVo" resultType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyBfhnJdgnRqstComnVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRcoAudtMgmtMapper.selectClrOrcyBfhnJdgnHistList */
    <include refid="pagination.header" ></include>
    SELECT
        A.ORCY_BFHN_JDGN_RQST_NO     /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
      , A.MDFY_DGCNT                 /** Fréquence de rectification !== 정정차수 ==! */
      , B.HIST_SRNO                  /** N° serie de l'historique !== 이력일련번호 ==! */
      , B.ORCY_BFHN_JDGN_PERM_NO     /** N° de l'autorisation de décision de RCO !== 원산지사전판정허가번호 ==! */
      , A.RQST_DT                    /** Date De Demande !== 신청일자 ==! */
      , A.DCER_CD                    /** Code Du Déclarant !== 신고인코드 ==! */
      , A.DCER_NM                    /** Nom Du Déclarant !== 신고인명 ==! */
      , NVL(A.LAST_CHG_DTTM, B.LAST_CHG_DTTM) AS LAST_CHG_DTTM				 /** Date et heure de modification finale !== 최종변경일시 ==! */
      , A.RGPN_NM                    /** Nom et prénom (s) ou raison sociale !== 권리자명 ==! */
      , NVL(B.PRCS_STTS_CD, 'A01') AS PRCS_STTS_CD          /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , B.CSTM_CD                    /** Code douanier de réception !== 세관코드 ==! */
      , B.DEPT_CD                    /** Code de service !== 부서코드 ==! */
      , B.AUDT_EMP_ID                /** ID de l'insepcteur !== 심사직원ID ==! */
      , B.VALD_STRT_DT               /** Date de début de validité !== 유효시작일자 ==! */
      , B.VALD_END_DT                /** Date de fin de validité !== 유효종료일자 ==! */
    FROM TB_CLRE_RCO_RQST A
       , TB_CLRI_RCO_AUDT B
    WHERE
        A.ORCY_BFHN_JDGN_RQST_NO = B.ORCY_BFHN_JDGN_RQST_NO
    AND (A.MDFY_DGCNT = B.MDFY_DGCNT(+) OR A.MDFY_DGCNT = B.HIST_SRNO(+))
    AND A.DEL_YN (+) = 'N'           /** Suppression ON !== 삭제여부 ==! */
    AND B.DEL_YN (+) = 'N'           /** Suppression ON !== 삭제여부 ==! */
    AND A.ORCY_BFHN_JDGN_RQST_NO = #{orcyBfhnJdgnRqstNo}       /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
    ORDER BY A.MDFY_DGCNT DESC, B.HIST_SRNO DESC
    <include refid="pagination.footer" ></include>
  </select>

  <!--
    Consultation des détails de l'historique de renseignement contraignent sur l'origine !== 원산지 사전판정 이력 상세 조회 ==!
    (Park Byoungkyu)
    -->
  <select id="selectClrOrcyBfhnJdgnRqstComnHist" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyBfhnJdgnRqstComnVo" resultType="alpass.ipt.clr.pdr.aja.vo.ClrOrcyBfhnJdgnRqstComnVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRcoAudtMgmtMapper.selectClrOrcyBfhnJdgnRqstComnHist */
    WITH BF_RCO_SUBQ AS (
    SELECT A.ORCY_BFHN_JDGN_RQST_NO, A.PROD_NM, B.PROD_HS_CD, B.VALD_STRT_DT
    FROM TB_CLRE_RCO_RQST A
       , TB_CLRI_RCO_AUDT B
    WHERE A.ORCY_BFHN_JDGN_RQST_NO = (SELECT BF_RCO_NO FROM TB_CLRE_RCO_RQST WHERE ORCY_BFHN_JDGN_RQST_NO = #{orcyBfhnJdgnRqstNo} AND LAST_YN = 'Y')
    AND A.ORCY_BFHN_JDGN_RQST_NO = B.ORCY_BFHN_JDGN_RQST_NO
    AND A.DEL_YN = 'N'
    AND A.LAST_YN = 'Y'
    AND B.DEL_YN = 'N'
    AND B.LAST_YN = 'Y'
    )
    SELECT
        A.ORCY_BFHN_JDGN_RQST_NO     /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
      , A.MDFY_DGCNT                 /** Fréquence de rectification !== 정정차수 ==! */
      , B.ORCY_BFHN_JDGN_PERM_NO     /** N° de l'autorisation de décision de RCO !== 원산지사전판정허가번호 ==! */
      , A.RQST_DT                    /** Date De Demande !== 신청일자 ==! */
      , A.DCER_CD                    /** Code Du Déclarant !== 신고인코드 ==! */
      , A.DCER_NM                    /** Nom Du Déclarant !== 신고인명 ==! */
      , A.DCER_POST_NO               /** ZIPCODE Demandeur !== 신고인우편번호 ==! */
      , A.DCER_ADDR                  /** Adresse Du Déclarant !== 신고인주소 ==! */
      , A.DCER_TLPH_NO               /** N° Tél. Du Dénonciateur  !== 신고인전화번호 ==! */
      , A.DCER_EML                   /** E-Mail Du Dénonciateur !== 신고인이메일 ==! */
      , A.CMRC_REGS_NO               /** Numéro de registre du commerce !== 상업등기번호 ==! */
      , A.POTX_IDFY_NO               /** Numéro d’identification fiscale !== 납세식별번호 ==! */
      , A.RGPN_NM                    /** Nom et prénom (s) ou raison sociale !== 권리자명 ==! */
      , A.RGPN_POST_NO               /** ZIPCODE Titulaire. !== 권리자우편번호 ==! */
      , A.RGPN_ADDR                  /** Adresse Titulaire. !== 권리자주소 ==! */
      , A.RGPN_TLPH_NO               /** N° tél Titulaire. !== 권리자전화번호 ==! */
      , A.RGPN_EML                   /** E-mail Titulaire. !== 권리자이메일 ==! */
      , A.RGPN_CMRC_REGS_NO          /** Numéro du registre du commerce Titulaire !== 권리자상업등기번호 ==! */
      , A.RGPN_POTX_IDFY_NO          /** Numéro d’identification fiscale Titulaire !== 권리자납세식별번호 ==! */
      , A.AEO_NO                     /** N° OEA !== AEO번호 ==! */
      , A.REPB_YN                    /** Rééimission d'un RCO ON !== 재발행여부 ==! */
      , A.BF_RCO_NO                  /** Numéro de RCO précédent !== 이전RCO번호 ==! */
      , A.WKNG_PT_CD                 /** Type D'Opération !== 작업유형코드 ==! */
      , A.PRVL_ORCY_YN               /** Origine préférentielle ON !== 특혜원산지여부 ==! */
      , A.PRVL_CNVN_CD               /** Code de l'accord préférentiel !== 특혜협정코드 ==! */
      , A.RCO_RUL_CN                 /** Régle à considérer de RCO !== RCO규칙내용 ==! */
      , A.HS_CD                      /** Code Sh !== HS코드 ==! */
      , A.PROD_MKNG_DESC_CN          /** Description de production de marchandise !== 상품제작설명내용 ==! */
      , B.PROD_HS_CD                 /** Code SH du produit !== 상품HS코드 ==! */
      , A.ORCY_CNTY_CD               /** Code De Pays D'Origine !== 원산지국가코드 ==! */
      , A.IMP_CNTY_CD                /** Code de pays d'importation !== 수입국가코드 ==! */
      , A.EXP_CNTY_CD                /** Code De Pays Exportateur !== 수출국가코드 ==! */
      , A.PROD_NM                    /** Désignation des marchandises !== 상품명 ==! */
      , A.PROD_ADD_DESC_CN           /** Informations complémentaires des marchandises !== 상품부가설명내용 ==! */
      , A.BF_BFHN_JDGN_RQST_YN       /** Décision anticipée précédente ON !== 이전사전판정신청여부 ==! */
      , A.BF_BFHN_JDGN_RQST_CN       /** Contenus de la décision anticipée précédente !== 이전사전판정신청내용 ==! */
      , A.DESC_OFR_YN                /** Description ON !== 설명제공여부 ==! */
      , A.PAMP_OFR_YN                /** Brochures ON !== 팜플렛제공여부 ==! */
      , A.PHTO_OFR_YN                /** Photographies ON !== 사진제공여부 ==! */
      , A.RPDC_OFR_YN                /** Rapports/PV d'expertise ON !== 보고서제공여부 ==! */
      , A.USER_MANL_OFR_YN           /** Guide utilisateur ON !== 사용자매뉴얼제공여부 ==! */
      , A.OTHS_OFR_YN                /** Autre à founir O/N !== 기타제공여부 ==! */
      , A.OTHS_OFR_CN                /** Autres !== 기타제공내용 ==! */
      <!--      , A.SAMP_RFUN_YN               /** Restitution de l'échantillon ON !== 견본반환여부 ==! */-->
      , A.SAME_JDGN_YN               /** Que le même jugement !== 동일판정여부 ==! */
      , A.SAME_JDGN_CN               /** Même contenu de jugement !== 동일판정내용 ==! */
      , C.SPLM_QRY_CN                /** Contenu de la demande de complément !== 보완요구내용 ==! */
      , C.SPLM_TKAC_CN               /** Mesures complémentaires !== 보완조치내용 ==! */
      , C.SPLM_TKAC_ATCH_FILE_ID     /** ID des pièces jointes des mesures complémentaires !== 보완조치첨부파일ID ==! */
      , NVL(B.PRCS_STTS_CD, 'A01') AS PRCS_STTS_CD          /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , A.LAST_YN                    /** Final On !== 최종여부 ==! */
      , A.DEL_YN                     /** Suppression On !== 삭제여부 ==! */
      , A.FRST_REGST_ID              /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , A.FRST_RGSR_DTTM             /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , A.LAST_CHPR_ID               /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , A.LAST_CHG_DTTM              /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , A.DESC_ATCH_FILE_ID          /** ID de la pièce jointe d’explication !== 설명첨부파일ID ==! */
      , A.PAMP_ATCH_FILE_ID          /** ID de la pièce jointe de brochure !== 팜플렛첨부파일ID ==! */
      , A.PHTO_ATCH_FILE_ID          /** ID de la pièce jointe de photo !== 사진첨부파일ID ==! */
      , A.RPDC_ATCH_FILE_ID          /** ID de la pièce jointe de rapport !== 보고서첨부파일ID ==! */
      , A.USER_MANL_ATCH_FILE_ID     /** ID de la pièce jointe de manuel d’utilisation !== 사용자매뉴얼첨부파일ID ==! */
      , A.OTHS_OFR_ATCH_FILE_ID      /** ID de l'autre pièce jointe !== 기타제공첨부파일ID ==! */
      , A.INFO_MAKE_CFRM_YN          /** Vérification de rédaction des informations O/N !== 정보작성확인여부 ==! */
      , B.VALD_STRT_DT               /** Date de début de validité !== 유효시작일자 ==! */
      , B.CSTM_CD                    /** Code douanier de réception !== 세관코드 ==! */
      , B.DEPT_CD                    /** Code de service !== 부서코드 ==! */
      , B.AUDT_EMP_ID                /** ID de l'insepcteur !== 심사직원ID ==! */
      , B.CNCL_RSN_CD                /** Code du motif d'annulation !== 취소사유코드 ==! */
      , B.CNCL_RSN_CN                /** Contenus du motif d'annulation !== 취소사유내용 ==! */
      , B.PROD_HS_CD                 /** Code SH du produit !== 상품HS코드 ==! */
      , B.AUDT_ATCH_FILE_ID          /** ID du document joint pour le contrôle !== 심사첨부파일ID ==! */
      <if test="bfRcoNo != null and bfRcoNo != ''">
        , D.PROD_NM AS BF_PROD_NM
        , D.PROD_HS_CD AS BF_PROD_HS_CD
        , D.VALD_STRT_DT AS BF_VALD_STRT_DT
      </if>
    FROM  TB_CLRE_RCO_RQST A
        , TB_CLRI_RCO_AUDT B
        , TB_CLRI_BFHN_JDGN_SPLM_QRY C
      <if test="bfRcoNo != null and bfRcoNo != ''">
        , BF_RCO_SUBQ D
      </if>
    WHERE
        A.ORCY_BFHN_JDGN_RQST_NO = B.ORCY_BFHN_JDGN_RQST_NO (+)
    AND	A.ORCY_BFHN_JDGN_RQST_NO = C.BFHN_JDGN_RQST_NO (+)
    AND	A.MDFY_DGCNT = C.SPLM_QRY_DGCNT (+)   <!--외부 정정차수 = 보안요구 차수-->
    AND A.MDFY_DGCNT = B.MDFY_DGCNT (+)
    AND A.DEL_YN (+) = 'N'           /** Suppression ON !== 삭제여부 ==! */
    AND B.DEL_YN (+) = 'N'           /** Suppression ON !== 삭제여부 ==! */
    AND C.DEL_YN (+) = 'N'           /** Suppression ON !== 삭제여부 ==! */
    AND B.LAST_YN (+) = 'Y'          /** Final On !== 최종여부 ==! */
    AND A.ORCY_BFHN_JDGN_RQST_NO = #{orcyBfhnJdgnRqstNo}            /** N° de demande de RCO !== 원산지사전판정신청번호 ==! */
    <if test="mdfyDgcnt != null">
      <if test="mdfyDgcnt != ''or mdfyDgcnt == 0">
        AND A.MDFY_DGCNT (+) = #{mdfyDgcnt}                          /** Fréquence de rectification !== 정정차수 ==! */
      </if>
    </if>
  </select>

</mapper>
