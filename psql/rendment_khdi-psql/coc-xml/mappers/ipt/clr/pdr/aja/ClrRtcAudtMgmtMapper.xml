<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="alpass.ipt.clr.pdr.aja.mapper.ClrRtcAudtMgmtMapper">

  <!--
    Voir la liste des Consulter la liste des demandes de RTC !== 품목분류 사전판정신청 목록 조회 ==!
    (Song JunYoung)
    -->
  <select id="selectClrPdlsClsfBfhnJdgnRqstList" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnRqstVo" resultType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnRqstVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRtcAudtMgmtMapper.selectClrPdlsClsfBfhnJdgnRqstList */
    <include refid="pagination.header" ></include>
    SELECT
        A.PDLS_CLSF_BFHN_JDGN_RQST_NO    /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
      , A.MDFY_DGCNT                     /** Fréquence de rectification !== 정정차수 ==! */
      , B.PDLS_CLSF_BFHN_JDGN_PN         /** N° de l'autorisation de décision de RTC !== 품목분류사전판정허가번호 ==! */
      , A.RQST_DT                        /** Date De Demande !== 신청일자 ==! */
      , A.DCER_CD                        /** Code Du Déclarant !== 신고인코드 ==! */
      , A.DCER_NM                        /** Nom Du Déclarant !== 신고인명 ==! */
      , A.DCER_POST_NO                   /** ZIPCODE Demandeur !== 신고인우편번호 ==! */
      , A.DCER_ADDR                      /** Adresse Du Déclarant !== 신고인주소 ==! */
      , A.DCER_TLPH_NO                   /** N° Tél. Du Dénonciateur  !== 신고인전화번호 ==! */
      , A.DCER_EML                       /** E-Mail Du Dénonciateur !== 신고인이메일 ==! */
      , A.CMRC_REGS_NO                   /** Numéro de registre du commerce !== 상업등기번호 ==! */
      , A.POTX_IDFY_NO                   /** Numéro d’identification fiscale !== 납세식별번호 ==! */
      , A.RGPN_NM                        /** Nom et prénom (s) ou raison sociale !== 권리자명 ==! */
      , A.RGPN_POST_NO                   /** ZIPCODE Titulaire. !== 권리자우편번호 ==! */
      , A.RGPN_ADDR                      /** Adresse Titulaire. !== 권리자주소 ==! */
      , A.RGPN_TLPH_NO                   /** N° tél Titulaire. !== 권리자전화번호 ==! */
      , A.RGPN_EML                       /** E-mail Titulaire. !== 권리자이메일 ==! */
      , A.RGPN_CMRC_REGS_NO              /** Numéro du registre du commerce Titulaire !== 권리자상업등기번호 ==! */
      , A.RGPN_POTX_IDFY_NO              /** Numéro d’identification fiscale Titulaire !== 권리자납세식별번호 ==! */
      , A.AEO_NO                         /** N° OEA !== AEO번호 ==! */
      , A.REPB_YN                        /** Rééimission d'un RCO ON !== 재발행여부 ==! */
      , A.BF_RTC_NO                      /** Réémission d’un RTC !== 이전RTC번호 ==! */
      , A.WKNG_PT_CD                     /** Type D'Opération !== 작업유형코드 ==! */
      , A.TM_NM                          /** Nom De Marque !== 상표명 ==! */
      , A.ORCY_CNTY_CD                   /** Code De Pays D'Origine !== 원산지국가코드 ==! */
      , A.AMT                            /** Montant !== 금액 ==! */
      , A.CURR_CD                        /** Code De Devise !== 통화코드 ==! */
      , A.WGHT                           /** Poids !== 중량 ==! */
      , A.WGHT_UT_CD                     /** Unité De Poids !== 중량단위코드 ==! */
      , A.EXPC_HS_CD                     /** Sous position tarifaire prévue !== 예상HS코드 ==! */
      , B.PROD_HS_CD                     /** Code SH du produit !== 상품HS코드 ==! */
      , A.HS_CLSF_RGLT_CN                /** Règlements !== HS규정내용 ==! */
      , A.CMDT_DESC_CN                   /** Description de la marchandise !== 물품설명내용 ==! */
      , A.DESC_OFR_YN                    /** Description ON !== 설명제공여부 ==! */
      , B.SAMP_OFR_YN                    /** Echantillon offert ON !== 견본제공여부 ==! */
      , A.PAMP_OFR_YN                    /** Brochures ON !== 팜플렛제공여부 ==! */
      , A.PHTO_OFR_YN                    /** Photographies ON !== 사진제공여부 ==! */
      , A.RPDC_OFR_YN                    /** Rapports/PV d'expertise ON !== 보고서제공여부 ==! */
      , A.USER_MANL_OFR_YN               /** Guide utilisateur ON !== 사용자매뉴얼제공여부 ==! */
      , A.OTHS_OFR_YN                    /** Autre à founir O/N !== 기타제공여부 ==! */
      , A.OTHS_OFR_CN                    /** Autres !== 기타제공내용 ==! */
      , A.OTHS_REQST_YN                  /** Autres demandes RTC YN !== 기타요청여부 ==! */
      , A.OTHS_REQST_CN                  /** Description de autres demandes RTC !== 기타요청내용 ==! */
      , A.RTC_REFF_NO                    /** Référence du RTC !== RTC참조번호 ==! */
      , A.SAME_JDGN_YN                   /** Que le même jugement !== 동일판정여부 ==! */
      , A.SAME_JDGN_CN                   /** Même contenu de jugement !== 동일판정내용 ==! */
      , C.SPLM_QRY_CN                    /** Contenu de la demande de complément !== 보완요구내용 ==! */
      , C.SPLM_TKAC_CN                   /** Mesures complémentaires !== 보완조치내용 ==! */
      , C.SPLM_TKAC_ATCH_FILE_ID         /** ID des pièces jointes des mesures complémentaires !== 보완조치첨부파일ID ==! */
      , NVL(B.PRCS_STTS_CD, 'A01') AS PRCS_STTS_CD       /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , A.LAST_YN                        /** Final On !== 최종여부 ==! */
      , A.DEL_YN                         /** Suppression On !== 삭제여부 ==! */
      , A.FRST_REGST_ID                  /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , A.FRST_RGSR_DTTM                 /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , A.LAST_CHPR_ID                   /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , A.LAST_CHG_DTTM                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , A.DESC_ATCH_FILE_ID              /** ID de la pièce jointe d’explication !== 설명첨부파일ID ==! */
      , A.PAMP_ATCH_FILE_ID              /** ID de la pièce jointe de brochure !== 팜플렛첨부파일ID ==! */
      , A.PHTO_ATCH_FILE_ID              /** ID de la pièce jointe de photo !== 사진첨부파일ID ==! */
      , A.RPDC_ATCH_FILE_ID              /** ID de la pièce jointe de rapport !== 보고서첨부파일ID ==! */
      , A.USER_MANL_ATCH_FILE_ID         /** ID de la pièce jointe de manuel d’utilisation !== 사용자매뉴얼첨부파일ID ==! */
      , A.OTHS_OFR_ATCH_FILE_ID          /** ID de l'autre pièce jointe !== 기타제공첨부파일ID ==! */
      , A.INFO_MAKE_CFRM_YN              /** Vérification de rédaction des informations O/N !== 정보작성확인여부 ==! */
      , B.HIST_SRNO                      /** N° serie de l'historique !== 이력일련번호 ==! */
      , B.CSTM_CD                        /** Code douanier de réception !== 세관코드 ==! */
      , B.DEPT_CD                        /** Code de service !== 부서코드 ==! */
      , B.AUDT_EMP_ID                    /** ID de l'insepcteur !== 심사직원ID ==! */
      , B.CNCL_RSN_CD                    /** Code du motif d'annulation !== 취소사유코드 ==! */
      , B.CNCL_RSN_CN                    /** Contenus du motif d'annulation !== 취소사유내용 ==! */
      , B.VALD_STRT_DT                   /** Date de début de validité !== 유효시작일자 ==! */
      , B.VALD_END_DT                    /** Date de fin de validité !== 유효종료일자 ==! */
    FROM  TB_CLRE_RTC_RQST A
        , TB_CLRI_RTC_AUDT B
        , TB_CLRI_BFHN_JDGN_SPLM_QRY C
    WHERE
        A.PDLS_CLSF_BFHN_JDGN_RQST_NO = B.PDLS_CLSF_BFHN_JDGN_RQST_NO (+)
    AND	A.PDLS_CLSF_BFHN_JDGN_RQST_NO = C.BFHN_JDGN_RQST_NO (+)
    AND	A.MDFY_DGCNT = C.SPLM_QRY_DGCNT (+)   <!--외부 정정차수 = 보안요구 차수-->
    AND A.DEL_YN (+) = 'N'                    /** Suppression ON !== 삭제여부 ==! */
    AND B.DEL_YN (+) = 'N'                    /** Suppression ON !== 삭제여부 ==! */
    AND C.DEL_YN (+) = 'N'                    /** Suppression ON !== 삭제여부 ==! */
    AND A.LAST_YN (+) = 'Y'                   /** Final On !== 최종여부 ==! */
    AND B.LAST_YN (+) = 'Y'                   /** Final On !== 최종여부 ==! */
    <if test="rqstDtFrom != null and rqstDtFrom != '' and rqstDtTo != null and rqstDtTo != ''">
      AND  A.RQST_DT BETWEEN TO_CHAR(TO_DATE(#{rqstDtFrom}, 'DD/MM/YYYY'), 'YYYYMMDD') AND TO_CHAR(TO_DATE(#{rqstDtTo}, 'DD/MM/YYYY'), 'YYYYMMDD') /** Date De Demande !== 신청일자 ==! */
    </if>
    <choose>
      <when test="prcsSttsCd != null and prcsSttsCd != ''">
        AND B.PRCS_STTS_CD = #{prcsSttsCd}                 /** Code De Statut De Traitement !== 처리상태코드 ==! */
      </when>
      <otherwise>
        <choose>
          <when test="otrqTpCd != null and otrqTpCd != ''">
            AND C.OTRQ_TP_CD (+) = #{otrqTpCd}                 /** Code de division des autres demandes !== 기타신청구분코드(10:레짐신청,20:품목분류사전판정,30:원산지사전판정,40:특송물품,50:우편물) ==! */
            AND B.PRCS_STTS_CD IN ('A04', 'A06', 'J02', 'D01', 'B02')
          </when>
          <otherwise>
            AND B.PRCS_STTS_CD IN ('B02', 'D02', 'D05', 'F01', 'I01', 'I02', 'D08', 'D09', 'I03', 'I05', 'I06', 'G03', 'J04')
          </otherwise>
        </choose>
      </otherwise>
    </choose>
    <if test="hsCd != null and hsCd != ''">
      AND  A.EXPC_HS_CD = #{hsCd}       /** Code Sh !== HS코드 ==! */
    </if>
    <if test="tmNm != null and tmNm != ''">
      AND  A.TM_NM = #{tmNm}            /** Nom De Marque !== 상표명 ==! */
    </if>
    <if test="dcerCd != null and dcerCd != ''">
      AND  A.DCER_CD = #{dcerCd}        /** Code Du Déclarant !== 신고인코드 ==! */
    </if>
    <if test="rgpnPotxIdfyNo != null and rgpnPotxIdfyNo != ''">
      AND  A.RGPN_POTX_IDFY_NO = #{rgpnPotxIdfyNo}        /** Numéro d’identification fiscale Titulaire !== 권리자납세식별번호 ==! */
    </if>
    <if test="pdlsClsfBfhnJdgnRqstNo != null and pdlsClsfBfhnJdgnRqstNo != ''">
      AND  A.PDLS_CLSF_BFHN_JDGN_RQST_NO = #{pdlsClsfBfhnJdgnRqstNo}       /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
    </if>
    <if test="pdlsClsfBfhnJdgnPn != null and pdlsClsfBfhnJdgnPn != ''">
      AND  B.PDLS_CLSF_BFHN_JDGN_PN = #{pdlsClsfBfhnJdgnPn}       /** N° de demande de RTC !== 품목분류사전판정허가번호 ==! */
    </if>
    <if test="valdDt != null and valdDt != ''">
      AND  TO_CHAR(TO_DATE(#{valdDt}, 'DD/MM/YYYY'), 'YYYYMMDD') BETWEEN B.VALD_STRT_DT AND B.VALD_END_DT     /** Date de la validité !== 유효일자 ==! */
    </if>
    <if test="audtEmpId != null and audtEmpId != ''">
      AND  B.AUDT_EMP_ID = #{audtEmpId} 			/**  ID de l'insepcteur  !== 심사직원ID ==!  */
    </if>
    ORDER BY A.PDLS_CLSF_BFHN_JDGN_RQST_NO DESC
    <include refid="pagination.footer" ></include>
  </select>

  <!--
    Voir les détails de la Consulter la liste des demandes de RTC !== 품목분류 사전판정신청 상세 조회 ==!
    (Song JunYoung)
    -->
  <select id="selectClrPdlsClsfBfhnJdgnRqst" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnRqstVo" resultType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnRqstVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRtcAudtMgmtMapper.selectClrPdlsClsfBfhnJdgnRqst */
    WITH BF_RTC_SUBQ AS (
    SELECT A.PDLS_CLSF_BFHN_JDGN_RQST_NO, A.TM_NM, B.PROD_HS_CD, B.VALD_STRT_DT
    FROM TB_CLRE_RTC_RQST A
       , TB_CLRI_RTC_AUDT B
    WHERE A.PDLS_CLSF_BFHN_JDGN_RQST_NO = (SELECT BF_RTC_NO FROM TB_CLRE_RTC_RQST WHERE PDLS_CLSF_BFHN_JDGN_RQST_NO = #{pdlsClsfBfhnJdgnRqstNo} AND LAST_YN = 'Y')
    AND A.PDLS_CLSF_BFHN_JDGN_RQST_NO = B.PDLS_CLSF_BFHN_JDGN_RQST_NO
    AND A.DEL_YN = 'N'
    AND A.LAST_YN = 'Y'
    AND B.DEL_YN = 'N'
    AND B.LAST_YN = 'Y'
    ),
    RTC_REFF_SUBQ AS (
    SELECT A.PDLS_CLSF_BFHN_JDGN_RQST_NO, A.RQST_DT, A.TM_NM, B.PROD_HS_CD, B.VALD_STRT_DT
    FROM TB_CLRE_RTC_RQST A
       , TB_CLRI_RTC_AUDT B
    WHERE A.PDLS_CLSF_BFHN_JDGN_RQST_NO = (SELECT RTC_REFF_NO FROM TB_CLRE_RTC_RQST WHERE PDLS_CLSF_BFHN_JDGN_RQST_NO = #{pdlsClsfBfhnJdgnRqstNo} AND LAST_YN = 'Y')
    AND A.PDLS_CLSF_BFHN_JDGN_RQST_NO = B.PDLS_CLSF_BFHN_JDGN_RQST_NO
    AND A.DEL_YN = 'N'
    AND A.LAST_YN = 'Y'
    AND B.DEL_YN = 'N'
    AND B.LAST_YN = 'Y'
    )
    SELECT
        A.PDLS_CLSF_BFHN_JDGN_RQST_NO    /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
      , A.MDFY_DGCNT                     /** Fréquence de rectification !== 정정차수 ==! */
      , B.PDLS_CLSF_BFHN_JDGN_PN         /** N° de l'autorisation de décision de RTC !== 품목분류사전판정허가번호 ==! */
      , A.RQST_DT                        /** Date De Demande !== 신청일자 ==! */
      , A.DCER_CD                        /** Code Du Déclarant !== 신고인코드 ==! */
      , A.DCER_NM                        /** Nom Du Déclarant !== 신고인명 ==! */
      , A.DCER_POST_NO                   /** ZIPCODE Demandeur !== 신고인우편번호 ==! */
      , A.DCER_ADDR                      /** Adresse Du Déclarant !== 신고인주소 ==! */
      , A.DCER_TLPH_NO                   /** N° Tél. Du Dénonciateur  !== 신고인전화번호 ==! */
      , A.DCER_EML                       /** E-Mail Du Dénonciateur !== 신고인이메일 ==! */
      , A.CMRC_REGS_NO                   /** Numéro de registre du commerce !== 상업등기번호 ==! */
      , A.POTX_IDFY_NO                   /** Numéro d’identification fiscale !== 납세식별번호 ==! */
      , A.RGPN_NM                        /** Nom et prénom (s) ou raison sociale !== 권리자명 ==! */
      , A.RGPN_POST_NO                   /** ZIPCODE Titulaire. !== 권리자우편번호 ==! */
      , A.RGPN_ADDR                      /** Adresse Titulaire. !== 권리자주소 ==! */
      , A.RGPN_TLPH_NO                   /** N° tél Titulaire. !== 권리자전화번호 ==! */
      , A.RGPN_EML                       /** E-mail Titulaire. !== 권리자이메일 ==! */
      , A.RGPN_CMRC_REGS_NO              /** Numéro du registre du commerce Titulaire !== 권리자상업등기번호 ==! */
      , A.RGPN_POTX_IDFY_NO              /** Numéro d’identification fiscale Titulaire !== 권리자납세식별번호 ==! */
      , A.AEO_NO                         /** N° OEA !== AEO번호 ==! */
      , A.REPB_YN                        /** Rééimission d'un RCO ON !== 재발행여부 ==! */
      , A.BF_RTC_NO                      /** Réémission d’un RTC !== 이전RTC번호 ==! */
      , A.WKNG_PT_CD                     /** Type D'Opération !== 작업유형코드 ==! */
      , A.TM_NM                          /** Nom De Marque !== 상표명 ==! */
      , A.ORCY_CNTY_CD                   /** Code De Pays D'Origine !== 원산지국가코드 ==! */
      , A.AMT                            /** Montant !== 금액 ==! */
      , A.CURR_CD                        /** Code De Devise !== 통화코드 ==! */
      , A.WGHT                           /** Poids !== 중량 ==! */
      , A.WGHT_UT_CD                     /** Unité De Poids !== 중량단위코드 ==! */
      , A.EXPC_HS_CD                     /** Sous position tarifaire prévue !== 예상HS코드 ==! */
      , B.PROD_HS_CD                     /** Code SH du produit !== 상품HS코드 ==! */
      , A.HS_CLSF_RGLT_CN                /** Règlements !== HS규정내용 ==! */
      , A.CMDT_DESC_CN                   /** Description de la marchandise !== 물품설명내용 ==! */
      , A.DESC_OFR_YN                    /** Description ON !== 설명제공여부 ==! */
      , B.SAMP_OFR_YN                    /** Echantillon offert ON !== 견본제공여부 ==! */
      , A.PAMP_OFR_YN                    /** Brochures ON !== 팜플렛제공여부 ==! */
      , A.PHTO_OFR_YN                    /** Photographies ON !== 사진제공여부 ==! */
      , A.RPDC_OFR_YN                    /** Rapports/PV d'expertise ON !== 보고서제공여부 ==! */
      , A.USER_MANL_OFR_YN               /** Guide utilisateur ON !== 사용자매뉴얼제공여부 ==! */
      , A.OTHS_OFR_YN                    /** Autre à founir O/N !== 기타제공여부 ==! */
      , A.OTHS_OFR_CN                    /** Autres !== 기타제공내용 ==! */
      , A.OTHS_REQST_YN                  /** Autres demandes RTC YN !== 기타요청여부 ==! */
      , A.OTHS_REQST_CN                  /** Description de autres demandes RTC !== 기타요청내용 ==! */
      , A.RTC_REFF_NO                    /** Référence du RTC !== RTC참조번호 ==! */
      , A.SAME_JDGN_YN                   /** Que le même jugement !== 동일판정여부 ==! */
      , A.SAME_JDGN_CN                   /** Même contenu de jugement !== 동일판정내용 ==! */
      , C.SPLM_QRY_CN                    /** Contenu de la demande de complément !== 보완요구내용 ==! */
      , C.SPLM_TKAC_CN                   /** Mesures complémentaires !== 보완조치내용 ==! */
      , C.SPLM_TKAC_ATCH_FILE_ID         /** ID des pièces jointes des mesures complémentaires !== 보완조치첨부파일ID ==! */
      , NVL(B.PRCS_STTS_CD, 'A01') AS PRCS_STTS_CD       /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , A.LAST_YN                        /** Final On !== 최종여부 ==! */
      , A.DEL_YN                         /** Suppression On !== 삭제여부 ==! */
      , A.FRST_REGST_ID                  /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , A.FRST_RGSR_DTTM                 /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , A.LAST_CHPR_ID                   /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , A.LAST_CHG_DTTM                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , A.DESC_ATCH_FILE_ID              /** ID de la pièce jointe d’explication !== 설명첨부파일ID ==! */
      , A.PAMP_ATCH_FILE_ID              /** ID de la pièce jointe de brochure !== 팜플렛첨부파일ID ==! */
      , A.PHTO_ATCH_FILE_ID              /** ID de la pièce jointe de photo !== 사진첨부파일ID ==! */
      , A.RPDC_ATCH_FILE_ID              /** ID de la pièce jointe de rapport !== 보고서첨부파일ID ==! */
      , A.USER_MANL_ATCH_FILE_ID         /** ID de la pièce jointe de manuel d’utilisation !== 사용자매뉴얼첨부파일ID ==! */
      , A.OTHS_OFR_ATCH_FILE_ID          /** ID de l'autre pièce jointe !== 기타제공첨부파일ID ==! */
      , A.INFO_MAKE_CFRM_YN              /** Vérification de rédaction des informations O/N !== 정보작성확인여부 ==! */
      , B.CSTM_CD                        /** Code douanier de réception !== 세관코드 ==! */
      , B.VALD_STRT_DT                   /** Date de début de validité !== 유효시작일자 ==! */
      , B.DEPT_CD                        /** Code de service !== 부서코드 ==! */
      , B.AUDT_EMP_ID                    /** ID de l'insepcteur !== 심사직원ID ==! */
      , B.APRV_ID                        /** Id De L'Approbation !== 결재ID ==! */
      , B.CNCL_RSN_CD                    /** Code du motif d'annulation !== 취소사유코드 ==! */
      , B.CNCL_RSN_CN                    /** Contenus du motif d'annulation !== 취소사유내용 ==! */
      , B.AUDT_ATCH_FILE_ID              /** ID du document joint pour le contrôle !== 심사첨부파일ID ==! */
      <if test="bfRtcNo != null and bfRtcNo != ''">
        , D.TM_NM AS BF_TM_NM
        , D.PROD_HS_CD AS BF_PROD_HS_CD
        , D.VALD_STRT_DT AS BF_VALD_STRT_DT
      </if>
      <if test="rtcReffNo != null and rtcReffNo != ''">
        , E.TM_NM AS REFF_TM_NM
        , E.PROD_HS_CD AS REFF_PROD_HS_CD
        , E.VALD_STRT_DT AS REFF_VALD_STRT_DT
        , E.RQST_DT AS REFF_RQST_DT
      </if>
    FROM  TB_CLRE_RTC_RQST A
        , TB_CLRI_RTC_AUDT B
        , TB_CLRI_BFHN_JDGN_SPLM_QRY C
      <if test="bfRtcNo != null and bfRtcNo != ''">
        , BF_RTC_SUBQ D
      </if>
      <if test="rtcReffNo != null and rtcReffNo != ''">
        , RTC_REFF_SUBQ E
      </if>
    WHERE
        A.PDLS_CLSF_BFHN_JDGN_RQST_NO = B.PDLS_CLSF_BFHN_JDGN_RQST_NO (+)
    AND	A.PDLS_CLSF_BFHN_JDGN_RQST_NO = C.BFHN_JDGN_RQST_NO (+)
    AND	A.MDFY_DGCNT = C.SPLM_QRY_DGCNT (+)   <!--외부 정정차수 = 보안요구 차수-->
    AND A.DEL_YN (+) = 'N'                    /** Suppression ON !== 삭제여부 ==! */
    AND B.DEL_YN (+) = 'N'                    /** Suppression ON !== 삭제여부 ==! */
    AND C.DEL_YN (+) = 'N'                    /** Suppression ON !== 삭제여부 ==! */
    AND A.LAST_YN (+) = 'Y'                   /** Final On !== 최종여부 ==! */
    AND B.LAST_YN (+) = 'Y'                   /** Final On !== 최종여부 ==! */
    AND A.PDLS_CLSF_BFHN_JDGN_RQST_NO (+) = #{pdlsClsfBfhnJdgnRqstNo}       /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
    <if test="mdfyDgcnt != null">
      <if test="mdfyDgcnt != ''or mdfyDgcnt == 0">
        AND A.MDFY_DGCNT (+) = #{mdfyDgcnt}                          /** Fréquence de rectification !== 정정차수 ==! */
      </if>
    </if>
  </select>

  <!--
    Enregistrement de la Consulter la liste des demandes de RTC !== 품목분류 사전판정신청 등록 ==!
    (Song JunYoung)
    -->
  <insert id="insertClrPdlsClsfBfhnJdgnRqst" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnRqstVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRtcAudtMgmtMapper.insertClrPdlsClsfBfhnJdgnRqst */
    <selectKey resultType="java.math.BigDecimal" keyProperty="mdfyDgcnt" order="BEFORE">
      SELECT NVL(MAX(MDFY_DGCNT), '-1') + 1 FROM TB_CLRE_RTC_RQST WHERE PDLS_CLSF_BFHN_JDGN_RQST_NO = #{pdlsClsfBfhnJdgnRqstNo} /** Fréquence de rectification !== 정정차수 ==! */
    </selectKey>
    INSERT INTO TB_CLRE_RTC_RQST
      (
        PDLS_CLSF_BFHN_JDGN_RQST_NO    /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
      , MDFY_DGCNT                     /** Fréquence de rectification !== 정정차수 ==! */
      , RQST_DT                        /** Date De Demande !== 신청일자 ==! */
      , DCER_CD                        /** Code Du Déclarant !== 신고인코드 ==! */
      , DCER_NM                        /** Nom Du Déclarant !== 신고인명 ==! */
      , DCER_POST_NO                   /** ZIPCODE Demandeur !== 신고인우편번호 ==! */
      , DCER_ADDR                      /** Adresse Du Déclarant !== 신고인주소 ==! */
      , DCER_TLPH_NO                   /** N° Tél. Du Dénonciateur  !== 신고인전화번호 ==! */
      , DCER_EML                       /** E-Mail Du Dénonciateur !== 신고인이메일 ==! */
      , CMRC_REGS_NO                   /** Numéro de registre du commerce !== 상업등기번호 ==! */
      , POTX_IDFY_NO                   /** Numéro d’identification fiscale !== 납세식별번호 ==! */
      , RGPN_NM                        /** Nom et prénom (s) ou raison sociale !== 권리자명 ==! */
      , RGPN_POST_NO                   /** ZIPCODE Titulaire. !== 권리자우편번호 ==! */
      , RGPN_ADDR                      /** Adresse Titulaire. !== 권리자주소 ==! */
      , RGPN_TLPH_NO                   /** N° tél Titulaire. !== 권리자전화번호 ==! */
      , RGPN_EML                       /** E-mail Titulaire. !== 권리자이메일 ==! */
      , RGPN_CMRC_REGS_NO              /** Numéro du registre du commerce Titulaire !== 권리자상업등기번호 ==! */
      , RGPN_POTX_IDFY_NO              /** Numéro d’identification fiscale Titulaire !== 권리자납세식별번호 ==! */
      , AEO_NO                         /** N° OEA !== AEO번호 ==! */
      , REPB_YN                        /** Rééimission d'un RCO ON !== 재발행여부 ==! */
      , BF_RTC_NO                      /** Réémission d’un RTC !== 이전RTC번호 ==! */
      , WKNG_PT_CD                     /** Type D'Opération !== 작업유형코드 ==! */
      , TM_NM                          /** Nom De Marque !== 상표명 ==! */
      , ORCY_CNTY_CD                   /** Code De Pays D'Origine !== 원산지국가코드 ==! */
      , AMT                            /** Montant !== 금액 ==! */
      , CURR_CD                        /** Code De Devise !== 통화코드 ==! */
      , WGHT                           /** Poids !== 중량 ==! */
      , WGHT_UT_CD                     /** Unité De Poids !== 중량단위코드 ==! */
      , EXPC_HS_CD                     /** Sous position tarifaire prévue !== 예상HS코드 ==! */
      , HS_CLSF_RGLT_CN                /** Règlements !== 규정내용 ==! */
      , CMDT_DESC_CN                   /** Description de la marchandise !== 물품내용 ==! */
      , DESC_OFR_YN                    /** Description ON !== 설명제공여부 ==! */
      , PAMP_OFR_YN                    /** Brochures ON !== 팜플렛제공여부 ==! */
      , PHTO_OFR_YN                    /** Photographies ON !== 사진제공여부 ==! */
      , RPDC_OFR_YN                    /** Rapports/PV d'expertise ON !== 보고서제공여부 ==! */
      , USER_MANL_OFR_YN               /** Guide utilisateur ON !== 사용자매뉴얼제공여부 ==! */
      , OTHS_OFR_YN                    /** Autre à founir O/N !== 기타제공여부 ==! */
      , OTHS_OFR_CN                    /** Autres !== 기타제공내용 ==! */
      , OTHS_REQST_YN                  /** Autres demandes RTC YN !== 기타요청여부 ==! */
      , OTHS_REQST_CN                  /** Description de autres demandes RTC !== 기타요청내용 ==! */
      , RTC_REFF_NO                    /** Référence du RTC !== RTC참조번호 ==! */
      , SAME_JDGN_YN                   /** Que le même jugement !== 동일판정여부 ==! */
      , SAME_JDGN_CN                   /** Même contenu de jugement !== 동일판정내용 ==! */
      , LAST_YN                        /** Final On !== 최종여부 ==! */
      , DEL_YN                         /** Suppression On !== 삭제여부 ==! */
      , FRST_REGST_ID                  /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , FRST_RGSR_DTTM                 /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , LAST_CHPR_ID                   /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , LAST_CHG_DTTM                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , DESC_ATCH_FILE_ID              /** ID de la pièce jointe d’explication !== 설명첨부파일ID ==! */
      , PAMP_ATCH_FILE_ID              /** ID de la pièce jointe de brochure !== 팜플렛첨부파일ID ==! */
      , PHTO_ATCH_FILE_ID              /** ID de la pièce jointe de photo !== 사진첨부파일ID ==! */
      , RPDC_ATCH_FILE_ID              /** ID de la pièce jointe de rapport !== 보고서첨부파일ID ==! */
      , USER_MANL_ATCH_FILE_ID         /** ID de la pièce jointe de manuel d’utilisation !== 사용자매뉴얼첨부파일ID ==! */
      , OTHS_OFR_ATCH_FILE_ID          /** ID de l'autre pièce jointe !== 기타제공첨부파일ID ==! */
      , INFO_MAKE_CFRM_YN              /** Vérification de rédaction des informations O/N !== 정보작성확인여부 ==! */
      )
    VALUES
      (
        #{pdlsClsfBfhnJdgnRqstNo}      /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
      , #{mdfyDgcnt}                   /** Fréquence de rectification !== 정정차수 ==! */
      , TO_CHAR(SYSDATE, 'yyyymmdd')   /** Date De Demande !== 신청일자 ==! */
      , #{dcerCd}                      /** Code Du Déclarant !== 신고인코드 ==! */
      , #{dcerNm}                      /** Nom Du Déclarant !== 신고인명 ==! */
      , #{dcerPostNo}                  /** ZIPCODE Demandeur !== 신고인우편번호 ==! */
      , #{dcerAddr}                    /** Adresse Du Déclarant !== 신고인주소 ==! */
      , #{dcerTlphNo}                  /** N° Tél. Du Dénonciateur  !== 신고인전화번호 ==! */
      , #{dcerEml}                     /** E-Mail Du Dénonciateur !== 신고인이메일 ==! */
      , #{cmrcRegsNo}                  /** Numéro de registre du commerce !== 상업등기번호 ==! */
      , #{potxIdfyNo}                  /** Numéro d’identification fiscale !== 납세식별번호 ==! */
      , #{rgpnNm}                      /** Nom et prénom (s) ou raison sociale !== 권리자명 ==! */
      , #{rgpnPostNo}                  /** ZIPCODE Titulaire. !== 권리자우편번호 ==! */
      , #{rgpnAddr}                    /** Adresse Titulaire. !== 권리자주소 ==! */
      , #{rgpnTlphNo}                  /** N° tél Titulaire. !== 권리자전화번호 ==! */
      , #{rgpnEml}                     /** E-mail Titulaire. !== 권리자이메일 ==! */
      , #{rgpnCmrcRegsNo}              /** Numéro du registre du commerce Titulaire !== 권리자상업등기번호 ==! */
      , #{rgpnPotxIdfyNo}              /** Numéro d’identification fiscale Titulaire !== 권리자납세식별번호 ==! */
      , #{aeoNo}                       /** N° OEA !== AEO번호 ==! */
      , #{repbYn}                      /** Rééimission d'un RCO ON !== 재발행여부 ==! */
      , #{bfRtcNo}                     /** Réémission d’un RTC !== 이전RTC번호 ==! */
      , #{wkngPtCd}                    /** Type D'Opération !== 작업유형코드 ==! */
      , #{tmNm}                        /** Nom De Marque !== 상표명 ==! */
      , #{orcyCntyCd}                  /** Code De Pays D'Origine !== 원산지국가코드 ==! */
      , #{amt}                         /** Montant !== 금액 ==! */
      , #{currCd}                      /** Code De Devise !== 통화코드 ==! */
      , #{wght}                        /** Poids !== 중량 ==! */
      , #{wghtUtCd}                    /** Unité De Poids !== 중량단위코드 ==! */
      , #{expcHsCd}                    /** Sous position tarifaire prévue !== 예상HS코드 ==! */
      , #{hsClsfRgltCn}                /** Règlements !== 규정내용 ==! */
      , #{cmdtDescCn}                  /** Description de la marchandise !== 물품내용 ==! */
      , #{descOfrYn}                   /** Description ON !== 설명제공여부 ==! */
      , #{pampOfrYn}                   /** Brochures ON !== 팜플렛제공여부 ==! */
      , #{phtoOfrYn}                   /** Photographies ON !== 사진제공여부 ==! */
      , #{rpdcOfrYn}                   /** Rapports/PV d'expertise ON !== 보고서제공여부 ==! */
      , #{userManlOfrYn}               /** Guide utilisateur ON !== 사용자매뉴얼제공여부 ==! */
      , #{othsOfrYn}                   /** Autre à founir O/N !== 기타제공여부 ==! */
      , #{othsOfrCn}                   /** Autres !== 기타제공내용 ==! */
      , #{othsReqstYn}                 /** Autres demandes RTC YN !== 기타요청여부 ==! */
      , #{othsReqstCn}                 /** Description de autres demandes RTC !== 기타요청내용 ==! */
      , #{rtcReffNo}                   /** Référence du RTC !== RTC참조번호 ==! */
      , #{sameJdgnYn}                  /** Que le même jugement !== 동일판정여부 ==! */
      , #{sameJdgnCn}                  /** Même contenu de jugement !== 동일판정내용 ==! */
      , 'Y'                            /** Final On !== 최종여부 ==! */
      , 'N'                            /** Suppression On !== 삭제여부 ==! */
      , #{frstRegstId}                 /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , SYSTIMESTAMP                   /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , #{lastChprId}                  /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , SYSTIMESTAMP                   /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , #{descAtchFileId}              /** ID de la pièce jointe d’explication !== 설명첨부파일ID ==! */
      , #{pampAtchFileId}              /** ID de la pièce jointe de brochure !== 팜플렛첨부파일ID ==! */
      , #{phtoAtchFileId}              /** ID de la pièce jointe de photo !== 사진첨부파일ID ==! */
      , #{rpdcAtchFileId}              /** ID de la pièce jointe de rapport !== 보고서첨부파일ID ==! */
      , #{userManlAtchFileId}          /** ID de la pièce jointe de manuel d’utilisation !== 사용자매뉴얼첨부파일ID ==! */
      , #{othsOfrAtchFileId}           /** ID de l'autre pièce jointe !== 기타제공첨부파일ID ==! */
      , #{infoMakeCfrmYn}              /** Vérification de rédaction des informations O/N !== 정보작성확인여부 ==! */
      )
  </insert>

  <!--
    Modifier la Consulter la liste des demandes de RTC !== 품목분류 사전판정신청 수정 ==!
    (Song JunYoung)
    -->
  <update id="updateClrPdlsClsfBfhnJdgnRqst" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnRqstVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRtcAudtMgmtMapper.updateClrPdlsClsfBfhnJdgnRqst */
    UPDATE  TB_CLRE_RTC_RQST
    <trim prefixOverrides="," >
      <set>
        <if test="lastYn != null and lastYn != ''">
          , LAST_YN = #{lastYn}                         /** Final On !== 최종여부 ==! */
        </if>
      </set>
    </trim>
    WHERE
        DEL_YN = 'N'                                                  /** Suppression ON !== 삭제여부 ==! */
    AND LAST_YN = 'Y'                                                 /** Final On !== 최종여부 ==! */
    AND PDLS_CLSF_BFHN_JDGN_RQST_NO = #{pdlsClsfBfhnJdgnRqstNo}       /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
    AND MDFY_DGCNT = #{mdfyDgcnt}                                     /** Fréquence de rectification !== 정정차수 ==! */
  </update>

  <!--
    Voir la liste des DEMANDE DE RENSEIGNEMENT TARIFAIRE CONTRAIGNANT (RTC) !== 품목분류사전판정심사 상세 조회 ==!
    (Song JunYoung)
    -->
  <select id="selectClrPdlsClsfBfhnJdgnAudt" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnAudtVo" resultType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnAudtVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRtcAudtMgmtMapper.selectClrPdlsClsfBfhnJdgnAudt */
    SELECT
        A.PDLS_CLSF_BFHN_JDGN_RQST_NO    /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
      , A.HIST_SRNO                      /** N° serie de l'historique !== 이력일련번호 ==! */
      , A.MDFY_DGCNT                     /** Fréquence de rectification !== 정정차수 ==! */
      , A.PDLS_CLSF_BFHN_JDGN_PN         /** N° de l'autorisation de décision de RTC !== 품목분류사전판정허가번호 ==! */
      , B.RQST_DT                        /** Date De Demande !== 신청일자 ==! */
      , B.DCER_CD                        /** Code Du Déclarant !== 신고인코드 ==! */
      , B.POTX_IDFY_NO                   /** Numéro d’identification fiscale !== 납세식별번호 ==! */
      , B.RGPN_POTX_IDFY_NO              /** Numéro d’identification fiscale Titulaire !== 권리자납세식별번호 ==! */
      , B.AEO_NO                         /** N° OEA !== AEO번호 ==! */
      , A.VALD_STRT_DT                   /** Date de début de validité !== 유효시작일자 ==! */
      , A.VALD_END_DT                    /** Date de fin de validité !== 유효종료일자 ==! */
      , A.PROD_HS_CD                     /** Code SH du produit !== 상품HS코드 ==! */
      , A.CMDT_DESC_CN                   /** Description de la marchandise !== 물품설명내용 ==! */
      , A.CMDT_ADD_CN                    /** Informations complémentaires !== 물품부가내용 ==! */
      , A.CMDT_CLSF_EVDN_CN              /** Informations de justificatifs du classement de la marchandise ON !== 물품분류증거내용 ==! */
      , A.AUDT_ATCH_FILE_ID              /** ID de pièce jointe à l'examen !== 심사첨부파일ID ==! */
      , B.DESC_OFR_YN                    /** Description ON !== 설명제공여부 ==! */
      , B.PAMP_OFR_YN                    /** Brochures ON !== 팜플렛제공여부 ==! */
      , B.PHTO_OFR_YN                    /** Photographies ON !== 사진제공여부 ==! */
      , B.RPDC_OFR_YN                    /** Rapports/PV d'expertise ON !== 보고서제공여부 ==! */
      , B.USER_MANL_OFR_YN               /** Guide utilisateur ON !== 사용자매뉴얼제공여부 ==! */
      , B.OTHS_OFR_YN                    /** Autre à founir O/N !== 기타제공여부 ==! */
      , A.CSTM_CD                        /** Code douanier de réception !== 세관코드 ==! */
      , A.DEPT_CD                        /** Code de service !== 부서코드 ==! */
      , A.AUDT_DEPT_CD                   /**Code de Section du contrôle !== 심사부서코드 ==! */
      , A.AUDT_EMP_ID                    /** ID de l'insepcteur !== 심사직원ID ==! */
      , A.AUDT_RSLT_CD                   /** Code De Résultat De La Vérification !== 심사결과코드 ==! */
      , A.AUDT_RSLT_CN                   /** Contenu Du Résultat De La Vérification !== 심사결과내용 ==! */
      , A.CNCL_RSN_CD                    /** Code du motif d'annulation !== 취소사유코드 ==! */
      , A.CNCL_RSN_CN                    /** Contenus du motif d'annulation !== 취소사유내용 ==! */
      , A.AUDT_PRCS_DTTM                 /** Date et heure de traitement de contrôle !== 심사처리일시 ==! */
      , A.PRCS_STTS_CD                   /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , A.LAST_YN                        /** Final On !== 최종여부 ==! */
      , A.DEL_YN                         /** Suppression On !== 삭제여부 ==! */
      , A.FRST_REGST_ID                  /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , A.FRST_RGSR_DTTM                 /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , A.LAST_CHPR_ID                   /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , A.LAST_CHG_DTTM                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , A.APRV_ID                        /** Id De L'Approbation !== 결재ID ==! */
      , B.RGPN_NM                        /** Nom et prénom (s) ou raison sociale !== 권리자명 ==! */
      , B.RGPN_POST_NO                   /** ZIPCODE Titulaire. !== 권리자우편번호 ==! */
      , B.RGPN_ADDR                      /** Adresse Titulaire. !== 권리자주소 ==! */
      , B.RGPN_TLPH_NO                   /** N° tél Titulaire. !== 권리자전화번호 ==! */
      , B.RGPN_EML                       /** E-mail Titulaire. !== 권리자이메일 ==! */
      , B.RGPN_CMRC_REGS_NO              /** Numéro du registre du commerce Titulaire !== 권리자상업등기번호 ==! */
      , B.RGPN_POTX_IDFY_NO              /** Numéro d’identification fiscale Titulaire !== 권리자납세식별번호 ==! */
      , B.AEO_NO                         /** N° OEA !== AEO번호 ==! */
      , B.EXPC_HS_CD                     /** Sous position tarifaire prévue !== 예상HS코드 ==! */
      , B.CMDT_DESC_CN AS RQST_CMDT_DESC_CN                 /** Description de la marchandise !== 물품설명내용 ==! */
      , B.HS_CLSF_RGLT_CN                /** Règlements !== HS규정내용 ==! */
    FROM TB_CLRI_RTC_AUDT A
       , TB_CLRE_RTC_RQST B
    WHERE
        A.PDLS_CLSF_BFHN_JDGN_RQST_NO = B.PDLS_CLSF_BFHN_JDGN_RQST_NO (+)
    AND A.DEL_YN (+) = 'N'                      /** Suppression ON !== 삭제여부 ==! */
    AND A.LAST_YN (+) = 'Y'                     /** Final On !== 최종여부 ==! */
    AND B.DEL_YN (+) = 'N'                      /** Suppression ON !== 삭제여부 ==! */
    AND B.LAST_YN (+) = 'Y'                     /** Final On !== 최종여부 ==! */
    <if test="pdlsClsfBfhnJdgnRqstNo != null and pdlsClsfBfhnJdgnRqstNo != ''">
      AND A.PDLS_CLSF_BFHN_JDGN_RQST_NO = #{pdlsClsfBfhnJdgnRqstNo}       /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
    </if>
    <if test="pdlsClsfBfhnJdgnPn != null and pdlsClsfBfhnJdgnPn != ''">
      AND A.PDLS_CLSF_BFHN_JDGN_PN = #{pdlsClsfBfhnJdgnPn}                /** N° de l'autorisation de décision de RTC !== 품목분류사전판정허가번호 ==! */
    </if>
  </select>

  <!--
    Enregistrement de la DEMANDE DE RENSEIGNEMENT TARIFAIRE CONTRAIGNANT (RTC) !== 품목분류사전판정심사 등록 ==!
    (Song JunYoung)
    -->
  <insert id="insertClrPdlsClsfBfhnJdgnAudt" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnAudtVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRtcAudtMgmtMapper.insertClrPdlsClsfBfhnJdgnAudt */
    <selectKey resultType="java.math.BigDecimal" keyProperty="histSrno" order="BEFORE">
      SELECT NVL(MAX(HIST_SRNO), '0') + 1 FROM TB_CLRI_RTC_AUDT WHERE PDLS_CLSF_BFHN_JDGN_RQST_NO = #{pdlsClsfBfhnJdgnRqstNo}  /** N° serie de l'historique !== 이력일련번호 ==! */
    </selectKey>
    INSERT INTO TB_CLRI_RTC_AUDT
      (
        PDLS_CLSF_BFHN_JDGN_RQST_NO    /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
      , HIST_SRNO                      /** N° serie de l'historique !== 이력일련번호 ==! */
      , MDFY_DGCNT                     /** Fréquence de rectification !== 정정차수 ==! */
      , PDLS_CLSF_BFHN_JDGN_PN         /** N° de l'autorisation de décision de RTC !== 품목분류사전판정허가번호 ==! */
      , VALD_STRT_DT                   /** Date de début de validité !== 유효시작일자 ==! */
      , VALD_END_DT                    /** Date de fin de validité !== 유효종료일자 ==! */
      , PROD_HS_CD                     /** Code SH du produit !== 상품HS코드 ==! */
      , CMDT_DESC_CN                   /** Description de la marchandise !== 물품설명내용 ==! */
      , CMDT_ADD_CN                    /** Informations complémentaires !== 물품부가내용 ==! */
      , CMDT_CLSF_EVDN_CN              /** Informations de justificatifs du classement de la marchandise ON !== 물품분류증거내용 ==! */
      , AUDT_ATCH_FILE_ID              /** ID de pièce jointe à l'examen !== 심사첨부파일ID ==! */
      , SAMP_OFR_YN                    /** Echantillon offert ON !== 견본제공여부 ==! */
      , CSTM_CD                        /** Code douanier de réception !== 세관코드 ==! */
      , DEPT_CD                        /** Code de service !== 부서코드 ==! */
      , AUDT_DEPT_CD                   /**Code de Section du contrôle !== 심사부서코드 ==! */
      , AUDT_EMP_ID                    /** ID de l'insepcteur !== 심사직원ID ==! */
      , AUDT_RSLT_CD                   /** Code De Résultat De La Vérification !== 심사결과코드 ==! */
      , AUDT_RSLT_CN                   /** Contenu Du Résultat De La Vérification !== 심사결과내용 ==! */
      , CNCL_RSN_CD                    /** Code du motif d'annulation !== 취소사유코드 ==! */
      , CNCL_RSN_CN                    /** Contenus du motif d'annulation !== 취소사유내용 ==! */
      , AUDT_PRCS_DTTM                 /** Date et heure de traitement de contrôle !== 심사처리일시 ==! */
      , PRCS_STTS_CD                   /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , LAST_YN                        /** Final On !== 최종여부 ==! */
      , DEL_YN                         /** Suppression On !== 삭제여부 ==! */
      , FRST_REGST_ID                  /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , FRST_RGSR_DTTM                 /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , LAST_CHPR_ID                   /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , LAST_CHG_DTTM                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , APRV_ID                        /** Id De L'Approbation !== 결재ID ==! */
      )
    VALUES
      (
        #{pdlsClsfBfhnJdgnRqstNo}       /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
      , #{histSrno}                     /** N° serie de l'historique !== 이력일련번호 ==! */
      , (SELECT NVL(MAX(MDFY_DGCNT), '-1') + 1 FROM TB_CLRI_RCO_AUDT WHERE ORCY_BFHN_JDGN_RQST_NO = #{orcyBfhnJdgnRqstNo})  /** Fréquence de rectification !== 정정차수 ==! */
      , #{pdlsClsfBfhnJdgnPn}           /** N° de l'autorisation de décision de RTC !== 품목분류사전판정허가번호 ==! */
      , #{valdStrtDt}                   /** Date de début de validité !== 유효시작일자 ==! */
      , #{valdEndDt}                    /** Date de fin de validité !== 유효종료일자 ==! */
      , #{prodHsCd}                     /** Code SH du produit !== 상품HS코드 ==! */
      , #{cmdtDescCn}                   /** Description de la marchandise !== 물품내용 ==! */
      , #{cmdtAddCn}                    /** Informations complémentaires !== 부가내용 ==! */
      , #{cmdtClsfEvdnCn}               /** Informations de justificatifs du classement de la marchandise ON !== 물품분류증거내용 ==! */
      , #{audtAtchFileId}               /** ID de pièce jointe à l'examen !== 심사첨부파일ID ==! */
      , #{sampOfrYn}                    /** Echantillon offert ON !== 견본제공여부 ==! */
      , #{cstmCd}                       /** Code douanier de réception !== 세관코드 ==! */
      , #{deptCd}                       /** Code de service !== 부서코드 ==! */
      , #{audtDeptCd}                   /**Code de Section du contrôle !== 심사부서코드 ==! */
      , #{audtEmpId}                    /** ID de l'insepcteur !== 심사직원ID ==! */
      , #{audtRsltCd}                   /** Code De Résultat De La Vérification !== 심사결과코드 ==! */
      , #{audtRsltCn}                   /** Contenu Du Résultat De La Vérification !== 심사결과내용 ==! */
      , #{cnclRsnCd}                    /** Code du motif d'annulation !== 취소사유코드 ==! */
      , #{cnclRsnCn}                    /** Contenus du motif d'annulation !== 취소사유내용 ==! */
      , SYSTIMESTAMP                    /** Date et heure de traitement de contrôle !== 심사처리일시 ==! */
      , #{prcsSttsCd}                   /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , 'Y'                             /** Final On !== 최종여부 ==! */
      , 'N'                             /** Suppression On !== 삭제여부 ==! */
      , #{frstRegstId}                  /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , SYSTIMESTAMP                    /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , #{lastChprId}                   /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , SYSTIMESTAMP                    /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , #{aprvId}                       /** Id De L'Approbation !== 결재ID ==! */
      )
  </insert>

  <!--
    Modifier la DEMANDE DE RENSEIGNEMENT TARIFAIRE CONTRAIGNANT (RTC) !== 품목분류사전판정심사 수정 ==!
    (Song JunYoung)
    -->
  <update id="updateClrPdlsClsfBfhnJdgnAudt" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnAudtVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRtcAudtMgmtMapper.updateClrPdlsClsfBfhnJdgnAudt */
    UPDATE  TB_CLRI_RTC_AUDT SET
    <trim prefixOverrides="," >
        PDLS_CLSF_BFHN_JDGN_PN = #{pdlsClsfBfhnJdgnPn}        /** N° de l'autorisation de décision de RTC !== 품목분류사전판정허가번호 ==! */
      , VALD_STRT_DT = #{valdStrtDt}                /** Date de début de validité !== 유효시작일자 ==! */
      , VALD_END_DT = #{valdEndDt}                  /** Date de fin de validité !== 유효종료일자 ==! */
      , PROD_HS_CD = #{prodHsCd}                    /** Code SH du produit !== 상품HS코드 ==! */
      , CMDT_DESC_CN = #{cmdtDescCn}                /** Description de la marchandise !== 물품내용 ==! */
      , CMDT_ADD_CN = #{cmdtAddCn}                  /** Informations complémentaires !== 부가내용 ==! */
      , CMDT_CLSF_EVDN_CN = #{cmdtClsfEvdnCn}       /** Informations de justificatifs du classement de la marchandise ON !== 물품분류증거내용 ==! */
      , AUDT_ATCH_FILE_ID = #{audtAtchFileId}       /** ID de pièce jointe à l'examen !== 심사첨부파일ID ==! */
      , SAMP_OFR_YN = #{sampOfrYn}                  /** Echantillon offert ON !== 견본제공여부 ==! */
      , CSTM_CD = #{cstmCd}                         /** Code douanier de réception !== 세관코드 ==! */
      , DEPT_CD = #{deptCd}                         /** Code de service !== 부서코드 ==! */
      , AUDT_DEPT_CD = #{audtDeptCd}                /**Code de Section du contrôle !== 심사부서코드 ==! */
      , AUDT_EMP_ID = #{audtEmpId}                  /** ID de l'insepcteur !== 심사직원ID ==! */
      , AUDT_RSLT_CD = #{audtRsltCd}                /** Code De Résultat De La Vérification !== 심사결과코드 ==! */
      , AUDT_RSLT_CN = #{audtRsltCn}                /** Contenu Du Résultat De La Vérification !== 심사결과내용 ==! */
      , CNCL_RSN_CD = #{cnclRsnCd}                  /** Code du motif d'annulation !== 취소사유코드 ==! */
      , CNCL_RSN_CN = #{cnclRsnCn}                  /** Contenus du motif d'annulation !== 취소사유내용 ==! */
      , AUDT_PRCS_DTTM = #{audtPrcsDttm}            /** Date et heure de traitement de contrôle !== 심사처리일시 ==! */
      , PRCS_STTS_CD = #{prcsSttsCd}                /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , LAST_YN = #{lastYn}                         /** Final On !== 최종여부 ==! */
      , LAST_CHPR_ID = #{lastChprId}                /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , LAST_CHG_DTTM = SYSTIMESTAMP                /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , APRV_ID = #{aprvId})                        /** Id De L'Approbation !== 결재ID ==! */
    </trim>
    WHERE  DEL_YN = 'N'                                              /** Suppression ON !== 삭제여부 ==! */
    AND  PDLS_CLSF_BFHN_JDGN_RQST_NO = #{pdlsClsfBfhnJdgnRqstNo}     /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
    AND  PDLS_CLSF_BFHN_JDGN_PN = #{pdlsClsfBfhnJdgnPn}              /** N° de l'autorisation de décision de RTC !== 품목분류사전판정허가번호 ==! */
  </update>

  <!--
    Modification de l'état de traitement du contrôle RTC !== 품목분류사전판정심사 상태 수정 ==!
    (Park Byoungkyu)
    -->
  <update id="updateClrPdlsClsfBfhnJdgnAudtStts" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnAudtVo">
    /* alpass.ept.clr.sdr.ajm.mapper.ClrRtcRqstMgmtMapper.updateClrPdlsClsfBfhnJdgnAudtStts */
    UPDATE  TB_CLRI_RTC_AUDT
    <set>
        PDLS_CLSF_BFHN_JDGN_PN = COALESCE(#{pdlsClsfBfhnJdgnPn}, PDLS_CLSF_BFHN_JDGN_PN)                  /** N° de l'autorisation de décision de RTC !== 품목분류사전판정허가번호 ==! */
      <if test="prcsSttsCd == 'D08' or prcsSttsCd == 'D09' or prcsSttsCd == 'G03' or prcsSttsCd == 'I01' or prcsSttsCd == 'I02' or prcsSttsCd == 'I03' or prcsSttsCd == 'I05' or prcsSttsCd == 'I06'">
        , VALD_STRT_DT = COALESCE(#{valdStrtDt}, VALD_STRT_DT)   /** Date de début de validité !== 유효시작일자 ==! */
        , VALD_END_DT = COALESCE(#{valdEndDt}, VALD_END_DT)      /** Date de fin de validité !== 유효종료일자 ==! */
      </if>
      <if test="prcsSttsCd != 'D08' and prcsSttsCd != 'D09' and prcsSttsCd != 'G03' and prcsSttsCd != 'I01' and prcsSttsCd != 'I02' and prcsSttsCd != 'I03' and prcsSttsCd != 'I05' and prcsSttsCd != 'I06'">
        , VALD_STRT_DT = COALESCE(TO_CHAR(TO_DATE(#{valdStrtDt},'DD/MM/YYYY'), 'YYYYMMDD'), VALD_STRT_DT)   /** Date de début de validité !== 유효시작일자 ==! */
        , VALD_END_DT = COALESCE(TO_CHAR(TO_DATE(#{valdEndDt},'DD/MM/YYYY'), 'YYYYMMDD'), VALD_END_DT)      /** Date de fin de validité !== 유효종료일자 ==! */
      </if>
      , PROD_HS_CD = COALESCE(#{prodHsCd}, PROD_HS_CD)                        /** Code SH du produit !== 상품HS코드 ==! */
      , CMDT_DESC_CN = COALESCE(#{cmdtDescCn}, CMDT_DESC_CN)                  /** Description de la marchandise !== 물품내용 ==! */
      , CMDT_ADD_CN = COALESCE(#{cmdtAddCn}, CMDT_ADD_CN)                     /** Informations complémentaires !== 부가내용 ==! */
      , CMDT_CLSF_EVDN_CN = COALESCE(#{cmdtClsfEvdnCn}, CMDT_CLSF_EVDN_CN)    /** Informations de justificatifs du classement de la marchandise ON !== 물품분류증거내용 ==! */
      , AUDT_ATCH_FILE_ID = COALESCE(#{audtAtchFileId}, AUDT_ATCH_FILE_ID)    /** ID de pièce jointe à l'examen !== 심사첨부파일ID ==! */
      , SAMP_OFR_YN = COALESCE(#{sampOfrYn}, SAMP_OFR_YN)                     /** Echantillon offert ON !== 견본제공여부 ==! */
      , CSTM_CD = COALESCE(#{cstmCd}, CSTM_CD)                                /** Code douanier de réception !== 세관코드 ==! */
      , DEPT_CD = COALESCE(#{deptCd}, DEPT_CD)                                /** Code de service !== 부서코드 ==! */
      , AUDT_DEPT_CD = COALESCE(#{audtDeptCd}, AUDT_DEPT_CD)                  /**Code de Section du contrôle !== 심사부서코드 ==! */
      , AUDT_EMP_ID = COALESCE(#{audtEmpId}, AUDT_EMP_ID)                     /** ID de l'insepcteur !== 심사직원ID ==! */
      , AUDT_RSLT_CD = COALESCE(#{audtRsltCd}, AUDT_RSLT_CD)                  /** Code De Résultat De La Vérification !== 심사결과코드 ==! */
      , AUDT_RSLT_CN = COALESCE(#{audtRsltCn}, AUDT_RSLT_CN)                  /** Contenu Du Résultat De La Vérification !== 심사결과내용 ==! */
      , CNCL_RSN_CD = COALESCE(#{cnclRsnCd}, CNCL_RSN_CD)                     /** Code du motif d'annulation !== 취소사유코드 ==! */
      , CNCL_RSN_CN = COALESCE(#{cnclRsnCn}, CNCL_RSN_CN)                     /** Contenus du motif d'annulation !== 취소사유내용 ==! */
      , AUDT_PRCS_DTTM = SYSTIMESTAMP                                         /** Date et heure de traitement de contrôle !== 심사처리일시 ==! */
      , PRCS_STTS_CD = COALESCE(#{prcsSttsCd}, PRCS_STTS_CD)                  /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , LAST_YN = COALESCE(#{lastYn}, LAST_YN)                                /** Final On !== 최종여부 ==! */
      , LAST_CHPR_ID = #{lastChprId}                                          /** ID du modificateur final !== 최종변경자ID ==! */
      , LAST_CHG_DTTM = SYSTIMESTAMP                                          /** Date et heure de modification finale !== 최종변경일시 ==! */
      , APRV_ID = COALESCE(#{aprvId}, APRV_ID)                                /** Id De L'Approbation !== 결재ID ==! */
    </set>
    WHERE
    DEL_YN = 'N'                                                              /** Suppression ON !== 삭제여부 ==! */
    AND LAST_YN = 'Y'                                                         /** Final On !== 최종여부 ==! */
    AND PDLS_CLSF_BFHN_JDGN_RQST_NO = #{pdlsClsfBfhnJdgnRqstNo}               /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
  </update>

  <!--
    Annulation de la décision précédemment délivrée !== 기존 발행건 취소 처리 ==!
    (Park Byoungkyu)
    -->
  <update id="updateClrPdlsClsfBfhnJdgnAudtCancel" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnAudtVo">
    /* updateClrPdlsClsfBfhnJdgnAudtCancel */
    UPDATE  TB_CLRI_RTC_AUDT SET
        LAST_YN = 'N'                                                /** Final On !== 최종여부 ==! */
      , LAST_CHPR_ID = #{lastChprId}                                 /** ID du modificateur final !== 최종변경자ID ==! */
      , LAST_CHG_DTTM = SYSTIMESTAMP                                 /** Date et heure de modification finale !== 최종변경일시 ==! */
    WHERE DEL_YN = 'N'                                               /** Suppression ON !== 삭제여부 ==! */
    AND   LAST_YN = 'Y'                                              /** Final On !== 최종여부 ==! */
    AND   PDLS_CLSF_BFHN_JDGN_RQST_NO = #{pdlsClsfBfhnJdgnRqstNo}    /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
    AND   PDLS_CLSF_BFHN_JDGN_PN = #{pdlsClsfBfhnJdgnPn}             /** N° de l'autorisation de décision de RTC !== 품목분류사전판정허가번호 ==! */
  </update>

  <!--
    Supprimer la DEMANDE DE RENSEIGNEMENT TARIFAIRE CONTRAIGNANT (RTC) !== 품목분류사전판정심사 삭제 ==!
    (Song JunYoung)
    -->
  <update id="deleteClrPdlsClsfBfhnJdgnAudt" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnAudtVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRtcAudtMgmtMapper.deleteClrPdlsClsfBfhnJdgnAudt */
    UPDATE  TB_CLRI_RTC_AUDT SET
        DEL_YN = 'Y'                                  /** Suppression ON !== 삭제여부 ==! */
      , LAST_CHPR_ID = #{lastChprId}                  /** ID du modificateur final !== 최종변경자ID ==! */
      , LAST_CHG_DTTM = SYSTIMESTAMP                  /** Date et heure de modification finale !== 최종변경일시 ==! */
    WHERE  DEL_YN = 'N'                               /** Suppression ON !== 삭제여부 ==! */
    AND  PDLS_CLSF_BFHN_JDGN_RQST_NO = #{pdlsClsfBfhnJdgnRqstNo}     /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
    AND  PDLS_CLSF_BFHN_JDGN_PN = #{pdlsClsfBfhnJdgnPn}              /** N° de l'autorisation de décision de RTC !== 품목분류사전판정허가번호 ==! */
  </update>
  
  <!--
    Voir la liste des Consulter la liste des demandes de RTC !== 품목분류 사전판정신청 목록 조회 ==!
    (Song JunYoung)
    -->
  <select id="selectDedPdlsClsfBfhnJdgnRqstList" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnRqstVo" resultType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnRqstVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRtcAudtMgmtMapper.selectDedPdlsClsfBfhnJdgnRqstList */
    <include refid="pagination.header" ></include>
    SELECT
        A.PDLS_CLSF_BFHN_JDGN_RQST_NO  /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
      , B.PDLS_CLSF_BFHN_JDGN_PN       /** N° de demande de RTC !== 품목분류사전판정허가번호 ==! ==! */
      , B.MDFY_DGCNT                   /** Fréquence de rectification !== 정정차수 ==! */
      , A.RQST_DT                      /** Date De Demande !== 신청일자 ==! */
      , A.DCER_CD                      /** Code Du Déclarant !== 신고인코드 ==! */
      , A.DCER_NM                      /** Nom Du Déclarant !== 신고인명 ==! */
      , A.DCER_POST_NO                 /** ZIPCODE Demandeur !== 신고인우편번호 ==! */
      , A.DCER_ADDR                    /** Adresse Du Déclarant !== 신고인주소 ==! */
      , A.DCER_TLPH_NO                 /** N° Tél. Du Dénonciateur  !== 신고인전화번호 ==! */
      , A.DCER_EML                     /** E-Mail Du Dénonciateur !== 신고인이메일 ==! */
      , A.CMRC_REGS_NO                 /** Numéro de registre du commerce !== 상업등기번호 ==! */
      , A.POTX_IDFY_NO                 /** Numéro d’identification fiscale !== 납세식별번호 ==! */
      , A.RQST_CSTM_CD                 /** Code de bureau de douane !== 신청세관코드 ==! */
      , A.ACAP_NO                      /** Numéro d’enregistrement : !== 접수번호 ==! */
      , A.ACAP_PLC_NM                  /** Lieu de dépôt !== 접수장소명 ==! */
      , A.ACAP_DT                      /** Date de réception !== 접수일자 ==! */
      , A.ATCH_DOC_GCNT                /** Nombre de documents joints !== 첨부문서개수 ==! */
      , A.SAMP_YN                      /** Echantillons ON !== 견본여부 ==! */
      , A.RGPN_CD                      /** Code de titulaire !== 권리자코드 ==! */
      , A.RGPN_NM                      /** Nom et prénom (s) ou raison sociale !== 권리자명 ==! */
      , A.RGPN_POST_NO                 /** ZIPCODE Titulaire. !== 권리자우편번호 ==! */
      , A.RGPN_ADDR                    /** Adresse Titulaire. !== 권리자주소 ==! */
      , A.RGPN_TLPH_NO                 /** N° tél Titulaire. !== 권리자전화번호 ==! */
      , A.RGPN_EML                     /** E-mail Titulaire. !== 권리자이메일 ==! */
      , A.RGPN_CMRC_REGS_NO            /** Numéro du registre du commerce Titulaire !== 권리자상업등기번호 ==! */
      , A.RGPN_POTX_IDFY_NO            /** Numéro d’identification fiscale Titulaire !== 권리자납세식별번호 ==! */
      , A.AEO_NO                       /** N° OEA !== AEO번호 ==! */
      , A.REPB_YN                      /** Rééimission d'un RCO ON !== 재발행여부 ==! */
      , A.BF_RTC_NO                    /** Réémission d’un RTC !== 이전RTC번호 ==! */
      , A.VALD_DT                      /** Date de la validité !== 유효일자 ==! */
      , A.BF_TM_NM                     /** Dénomination du produit !== 이전상표명 ==! */
      , A.BF_HS_CD                     /** Code Sh Précédent !== 이전HS코드 ==! */
      , A.WKNG_PT_CD                   /** Type D'Opération !== 작업유형코드 ==! */
      , A.TM_NM                        /** Nom De Marque !== 상표명 ==! */
      , A.ORCY_CNTY_CD                 /** Code De Pays D'Origine !== 원산지국가코드 ==! */
      , A.AMT                          /** Montant !== 금액 ==! */
      , A.CURR_CD                      /** Code De Devise !== 통화코드 ==! */
      , A.WGHT                         /** Poids !== 중량 ==! */
      , A.WGHT_UT_CD                   /** Unité De Poids !== 중량단위코드 ==! */
      , A.HS_CD                        /** Code Sh !== HS코드 ==! */
      , A.RGLT_CN                      /** Règlements !== 규정내용 ==! */
      , A.CMDT_CN                      /** Description de la marchandise !== 물품내용 ==! */
      , A.DESC_OFR_YN                  /** Description ON !== 설명제공여부 ==! */
      , A.SAMP_OFR_YN                  /** Echantillon offert ON !== 견본제공여부 ==! */
      , A.PAMP_OFR_YN                  /** Brochures ON !== 팜플렛제공여부 ==! */
      , A.PHTO_OFR_YN                  /** Photographies ON !== 사진제공여부 ==! */
      , A.RPDC_OFR_YN                  /** Rapports/PV d'expertise ON !== 보고서제공여부 ==! */
      , A.USER_MANL_OFR_YN             /** Guide utilisateur ON !== 사용자매뉴얼제공여부 ==! */
      , A.OTHS_OFR_CN                  /** Autres !== 기타제공내용 ==! */
      , A.SAMP_RFUN_YN                 /** Restitution de l'échantillon ON !== 견본반환여부 ==! */
      , A.OTHS_REQST_YN                /** Autres demandes RTC YN !== 기타요청여부 ==! */
      , A.OTHS_REQST_CN                /** Description de autres demandes RTC !== 기타요청내용 ==! */
      , A.OTHS_REQST_RQST_DT           /** Date de la demande !== 기타요청신청일자 ==! */
      , A.RTC_REFF_NO                  /** Référence du RTC !== RTC참조번호 ==! */
      , A.OTHS_REQST_VALD_STRT_DT      /** Date de début de validité  !== 기타요청유효시작일자 ==! */
      , A.OTHS_REQST_PROD_NM           /** Dénomination de la marchandise !== 기타요청상품명 ==! */
      , A.OTHS_REQST_HS_CD             /** Position ou sous‐position tarifaire !== 기타요청HS코드 ==! */
      , A.SAME_JDGN_YN                 /** Que le même jugement !== 동일판정여부 ==! */
      , A.SAME_JDGN_CN                 /** Même contenu de jugement !== 동일판정내용 ==! */
      , A.CESE_CN                      /** Motif de suspension !== 중지내용 ==! */
      , A.SPLM_QRY_CN                  /** Contenu de la demande de complément !== 보완요구내용 ==! */
      , A.PRCS_STTS_CD                 /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , FN_GET_CD_VDVAL_NM('CLR_0100', A.PRCS_STTS_CD, #{langCd}) AS PRCS_STTS_NM /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , A.ATCH_FILE_ID                 /** Id Du Fichier Joint !== 첨부파일ID ==! */
      , A.LAST_YN                      /** Final On !== 최종여부 ==! */
      , A.DEL_YN                       /** Suppression On !== 삭제여부 ==! */
      , A.FRST_REGST_ID                /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , A.FRST_RGSR_DTTM               /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , A.LAST_CHPR_ID                 /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , A.LAST_CHG_DTTM                /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , B.VALD_STRT_DT                 /** Date de début !== 유효시작일자 ==! */
      , B.VALD_END_DT                  /** Date d'échéance !== 유효종료일자 ==! */
    FROM  TB_CLRE_RTC_RQST A
        , TB_CLRI_RTC_AUDT B
    WHERE
          A.DEL_YN = 'N'                            /** Suppression ON !== 삭제여부 ==! */
    AND   A.LAST_YN = 'Y'                           /** Final On !== 최종여부 ==! */
    AND   A.PRCS_STTS_CD IN ('D', 'I')
    AND   A.PDLS_CLSF_BFHN_JDGN_RQST_NO = B.PDLS_CLSF_BFHN_JDGN_RQST_NO
    AND   B.PDLS_CLSF_BFHN_JDGN_PN IS NOT NULL
    AND   B.PDLS_CLSF_BFHN_JDGN_PN != ''

    <if test="hsCd != null and hsCd != ''">
      AND A.HS_CD = #{hsCd}       /** Code Sh !== HS코드 ==! */
    </if>
    <if test="rgpnCmrcRegsNo != null and rgpnCmrcRegsNo != ''">
      AND A.RGPN_CMRC_REGS_NO = #{rgpnCmrcRegsNo}
    </if>
    <if test="rgpnPotxIdfyNo != null and rgpnPotxIdfyNo != ''">
      AND A.RGPN_POTX_IDFY_NO = #{rgpnPotxIdfyNo}
    </if>
    <include refid="pagination.footer" ></include>
  </select>

  <!--
    Consultation de la liste de l'historique de traitement de la décision anticipée !== 사전판정처리내역 목록 조회 ==!
    (Park Byoungkyu)
    -->
  <select id="selectClrBfhnJdgnPrcsBrkdList" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrBfhnJdgnPrcsBrkdVo" resultType="alpass.ipt.clr.pdr.aja.vo.ClrBfhnJdgnPrcsBrkdVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRtcAudtMgmtMapper.selectClrBfhnJdgnPrcsBrkdList */
    SELECT
        A.BFHN_JDGN_RQST_NO              /** N° de demande de la décision anticipée précédente !== 사전판정신청번호 ==! */
      , A.PRCS_SRNO                      /** N° de sequence de traitement !== 처리일련번호 ==! */
      , A.OTRQ_TP_CD                     /** Code de division des autres demandes(10:Demande de régime, 20:Renseignement tarifaire contraignant, 30:Renseignement contraignant sur l'origine, 40:Fret express, 50:colis postaux) !== 기타신청구분코드(10:레짐신청,20:품목분류사전판정,30:원산지사전판정,40:특송물품,50:우편물) ==! */
      , A.PRCS_STTS_CD                   /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , A.PRCS_STTS_CN                   /** Contenu Du Statut De Traitement !== 처리상태내용 ==! */
      , A.HIST_SRNO                      /** N° serie de l'historique !== 이력일련번호 ==! */
      , A.DEL_YN                         /** Suppression On !== 삭제여부 ==! */
      , A.FRST_REGST_ID                  /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , DECODE((SELECT A.FRST_REGST_ID||' | '||EMP_NM FROM TB_POTI_EMP WHERE PBSR_NO = A.FRST_REGST_ID ), NULL, A.FRST_REGST_ID, (SELECT A.FRST_REGST_ID||' | '||EMP_NM FROM TB_POTI_EMP WHERE PBSR_NO = A.FRST_REGST_ID )) AS FRST_REGST_NM
      , A.FRST_RGSR_DTTM                 /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , TO_CHAR(A.FRST_RGSR_DTTM, 'DD/MM/YYYY HH24:MI:SS') AS PRCS_DTTM
      , A.LAST_CHPR_ID                   /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , A.LAST_CHG_DTTM                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , B.MDFY_DGCNT                     /** Fréquence de rectification !== 정정차수 ==! */
      , ROW_NUMBER() OVER (ORDER BY A.LAST_CHG_DTTM DESC) AS RNUM
    FROM   TB_CLRI_BFHN_JDGN_PRCS_BRKD A
    <if test="otrqTpCd == '20'">
      , TB_CLRI_RTC_AUDT B
    </if>
    <if test="otrqTpCd == '30'">
      , TB_CLRI_RCO_AUDT B
    </if>
<!--         , TB_CLRI_RTC_AUDT B-->
    WHERE A.DEL_YN = 'N'                   /** Suppression ON !== 삭제여부 ==! */
    <if test="otrqTpCd == '20'">
      AND   A.BFHN_JDGN_RQST_NO = B.PDLS_CLSF_BFHN_JDGN_RQST_NO
    </if>
    <if test="otrqTpCd == '30'">
      AND   A.BFHN_JDGN_RQST_NO = B.ORCY_BFHN_JDGN_RQST_NO
    </if>
<!--    AND   A.BFHN_JDGN_RQST_NO = B.PDLS_CLSF_BFHN_JDGN_RQST_NO-->
    AND   A.HIST_SRNO  = B.HIST_SRNO
    <if test="prcsSrno != null and prcsSrno != ''">
      AND PRCS_SRNO = #{prcsSrno}        /** N° de sequence de traitement !== 처리일련번호 ==! */
    </if>
    <if test="bfhnJdgnRqstNo != null and bfhnJdgnRqstNo != ''">
      AND A.BFHN_JDGN_RQST_NO = #{bfhnJdgnRqstNo}       /** N° de demande de la décision anticipée précédente !== 사전판정신청번호 ==! */
    </if>
    ORDER BY A.PRCS_SRNO DESC
  </select>

  <!--
    Enregistrement de l'historique de traitement des décisions anticipées !== 사전판정처리내역 등록 ==!
    (Park Byoungkyu)
    -->
  <insert id="insertClrBfhnJdgnPrcsBrkd" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrBfhnJdgnPrcsBrkdVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRtcAudtMgmtMapper.insertClrBfhnJdgnPrcsBrkd */
    <selectKey resultType="java.math.BigDecimal" keyProperty="prcsSrno" order="BEFORE">
      SELECT NVL(MAX(PRCS_SRNO), '0') + 1 FROM TB_CLRI_BFHN_JDGN_PRCS_BRKD WHERE BFHN_JDGN_RQST_NO = #{bfhnJdgnRqstNo} /** N° de sequence de traitement !== 처리일련번호 ==! */
    </selectKey>
    INSERT INTO TB_CLRI_BFHN_JDGN_PRCS_BRKD
      (
        BFHN_JDGN_RQST_NO              /** N° de demande de la décision anticipée précédente !== 사전판정신청번호 ==! */
      , PRCS_SRNO                      /** N° de sequence de traitement !== 처리일련번호 ==! */
      , OTRQ_TP_CD                     /** Code de division des autres demandes(10:Demande de régime, 20:Renseignement tarifaire contraignant, 30:Renseignement contraignant sur l'origine, 40:Fret express, 50:colis postaux) !== 기타신청구분코드(10:레짐신청,20:품목분류사전판정,30:원산지사전판정,40:특송물품,50:우편물) ==! */
      , PRCS_STTS_CD                   /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , PRCS_STTS_CN                   /** Contenu Du Statut De Traitement !== 처리상태내용 ==! */
      , HIST_SRNO                      /** N° serie de l'historique !== 이력일련번호 ==! */
      , DEL_YN                         /** Suppression On !== 삭제여부 ==! */
      , FRST_REGST_ID                  /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , FRST_RGSR_DTTM                 /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , LAST_CHPR_ID                   /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , LAST_CHG_DTTM                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      )
    VALUES
      (
        #{bfhnJdgnRqstNo}              /** N° de demande de la décision anticipée précédente !== 사전판정신청번호 ==! */
      , #{prcsSrno}                    /** N° de sequence de traitement !== 처리일련번호 ==! */
      , #{otrqTpCd}                    /** Code de division des autres demandes(10:Demande de régime, 20:Renseignement tarifaire contraignant, 30:Renseignement contraignant sur l'origine, 40:Fret express, 50:colis postaux) !== 기타신청구분코드(10:레짐신청,20:품목분류사전판정,30:원산지사전판정,40:특송물품,50:우편물) ==! */
      , #{prcsSttsCd}                  /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , #{prcsSttsCn}                  /** Contenu Du Statut De Traitement !== 처리상태내용 ==! */
      , #{histSrno}                    /** N° serie de l'historique !== 이력일련번호 ==! */
      , 'N'                            /** Suppression On !== 삭제여부 ==! */
      , #{frstRegstId}                 /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , SYSTIMESTAMP                   /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , #{lastChprId}                  /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , SYSTIMESTAMP                   /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      )
  </insert>

  <!--
    Consultation de la liste des demandes de complément pour les décisions anticipées !== 사전판정보완요구 목록 조회 ==!
    (Park Byoungkyu)
    -->
  <select id="selectClrBfhnJdgnSplmQryList" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrBfhnJdgnSplmQryVo" resultType="alpass.ipt.clr.pdr.aja.vo.ClrBfhnJdgnSplmQryVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRtcAudtMgmtMapper.selectClrBfhnJdgnSplmQryList */
    <include refid="pagination.header" ></include>
    SELECT
        A.BFHN_JDGN_RQST_NO              /** N° de demande de la décision anticipée précédente !== 사전판정신청번호 ==! */
      , A.SPLM_QRY_DGCNT                 /** Nombre de fois de la demande de complément !== 보완요구차수 ==! */
      , A.OTRQ_TP_CD                     /** Code de division des autres demandes(10:Demande de régime, 20:Renseignement tarifaire contraignant, 30:Renseignement contraignant sur l'origine, 40:Fret express, 50:colis postaux) !== 기타신청구분코드(10:레짐신청,20:품목분류사전판정,30:원산지사전판정,40:특송물품,50:우편물) ==! */
      , A.SPLM_QRY_EMP_ID                /** ID de la personne demandant le complément !== 보완요구직원ID ==! */
      , A.SPLM_QRY_DT                    /** Date de demande de complément !== 보완요구일자 ==! */
      , A.SPLM_QRY_CN                    /** Contenu de la demande de complément !== 보완요구내용 ==! */
      , A.SPLM_TKAC_CN                   /** Mesures complémentaires !== 보완조치내용 ==! */
      , A.SPLM_TKAC_ATCH_FILE_ID         /** ID des pièces jointes des mesures complémentaires !== 보완조치첨부파일ID ==! */
      , A.DEL_YN                         /** Suppression On !== 삭제여부 ==! */
      , A.FRST_REGST_ID                  /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , A.FRST_RGSR_DTTM                 /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , A.LAST_CHPR_ID                   /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , A.LAST_CHG_DTTM                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
    FROM  TB_CLRI_BFHN_JDGN_SPLM_QRY A
    WHERE
    DEL_YN = 'N'                   /** Suppression ON !== 삭제여부 ==! */
    <if test="splmQryDgcnt != null and splmQryDgcnt != ''">
      AND A.SPLM_QRY_DGCNT = #{splmQryDgcnt}        /** Nombre de fois de la demande de complément !== 보완요구차수 ==! */
    </if>
    <if test="bfhnJdgnRqstNo != null and bfhnJdgnRqstNo != ''">
      AND A.BFHN_JDGN_RQST_NO = #{bfhnJdgnRqstNo}       /** N° de demande de la décision anticipée précédente !== 사전판정신청번호 ==! */
    </if>
    ORDER BY A.BFHN_JDGN_RQST_NO DESC
    <include refid="pagination.footer" ></include>
  </select>

  <!--
    Modification de la demande de complément pour la décision anticipée !== 사전판정보완요구 수정 ==!
    (Park Byoungkyu)
    -->
  <update id="updateClrBfhnJdgnSplmQry" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrBfhnJdgnSplmQryVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRtcAudtMgmtMapper.updateClrBfhnJdgnSplmQry */
    UPDATE  TB_CLRI_BFHN_JDGN_SPLM_QRY
    <set>
        SPLM_QRY_CN = #{splmQryCn}                     /** Contenu de la demande de complément !== 보완요구내용 ==! */
      , SPLM_TKAC_CN = #{splmTkacCn}                   /** Mesures complémentaires !== 보완조치내용 ==! */
      , SPLM_TKAC_ATCH_FILE_ID = #{splmTkacAtchFileId} /** ID des pièces jointes des mesures complémentaires !== 보완조치첨부파일ID ==! */
      , LAST_CHPR_ID = #{lastChprId}                   /** ID du modificateur final !== 최종변경자ID ==! */
      , LAST_CHG_DTTM = SYSTIMESTAMP                   /** Date et heure de modification finale !== 최종변경일시 ==! */
    </set>
    WHERE
        DEL_YN = 'N'                                   /** Suppression ON !== 삭제여부 ==! */
    AND BFHN_JDGN_RQST_NO = #{bfhnJdgnRqstNo}          /** N° de demande de la décision anticipée précédente !== 사전판정신청번호 ==! */
    AND SPLM_QRY_DGCNT = #{splmQryDgcnt}               /** Nombre de fois de la demande de complément !== 보완요구차수 ==! */
  </update>

  <!--
    Enregistrement de la demande de complément pour la décision anticipée !== 사전판정보완요구 등록 ==!
    (Park Byoungkyu)
    -->
  <insert id="insertClrBfhnJdgnSplmQry" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrBfhnJdgnSplmQryVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRtcAudtMgmtMapper.insertClrBfhnJdgnSplmQry */
    <selectKey resultType="java.math.BigDecimal" keyProperty="splmQryDgcnt" order="BEFORE">
      SELECT NVL(MAX(SPLM_QRY_DGCNT), '0') + 1 FROM TB_CLRI_BFHN_JDGN_SPLM_QRY WHERE BFHN_JDGN_RQST_NO = #{bfhnJdgnRqstNo}  /** Nombre de fois de la demande de complément !== 보완요구차수 ==! */
    </selectKey>
    INSERT INTO TB_CLRI_BFHN_JDGN_SPLM_QRY
      (
        BFHN_JDGN_RQST_NO                /** N° de demande de la décision anticipée précédente !== 사전판정신청번호 ==! */
      , SPLM_QRY_DGCNT                   /** Nombre de fois de la demande de complément !== 보완요구차수 ==! */
      , OTRQ_TP_CD                       /** Code de division des autres demandes(10:Demande de régime, 20:Renseignement tarifaire contraignant, 30:Renseignement contraignant sur l'origine, 40:Fret express, 50:colis postaux) !== 기타신청구분코드(10:레짐신청,20:품목분류사전판정,30:원산지사전판정,40:특송물품,50:우편물) ==! */
      , SPLM_QRY_EMP_ID                  /** ID de la personne demandant le complément !== 보완요구직원ID ==! */
      , SPLM_QRY_DT                      /** Date de demande de complément !== 보완요구일자 ==! */
      , SPLM_QRY_CN                      /** Contenu de la demande de complément !== 보완요구내용 ==! */
      , SPLM_TKAC_CN                     /** Mesures complémentaires !== 보완조치내용 ==! */
      , SPLM_TKAC_ATCH_FILE_ID           /** ID des pièces jointes des mesures complémentaires !== 보완조치첨부파일ID ==! */
      , DEL_YN                           /** Suppression On !== 삭제여부 ==! */
      , FRST_REGST_ID                    /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , FRST_RGSR_DTTM                   /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , LAST_CHPR_ID                     /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , LAST_CHG_DTTM                    /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      )
    VALUES
      (
        #{bfhnJdgnRqstNo}                /** N° de demande de la décision anticipée précédente !== 사전판정신청번호 ==! */
      , #{splmQryDgcnt}                  /** Nombre de fois de la demande de complément !== 보완요구차수 ==! */
      , #{otrqTpCd}                      /** Code de division des autres demandes(10:Demande de régime, 20:Renseignement tarifaire contraignant, 30:Renseignement contraignant sur l'origine, 40:Fret express, 50:colis postaux) !== 기타신청구분코드(10:레짐신청,20:품목분류사전판정,30:원산지사전판정,40:특송물품,50:우편물) ==! */
      , #{splmQryEmpId}                  /** ID de la personne demandant le complément !== 보완요구직원ID ==! */
      , TO_CHAR(SYSTIMESTAMP,'YYYYMMDD') /** Date de demande de complément !== 보완요구일자 ==! */
      , #{splmQryCn}                     /** Contenu de la demande de complément !== 보완요구내용 ==! */
      , #{splmTkacCn}                    /** Mesures complémentaires !== 보완조치내용 ==! */
      , #{splmTkacAtchFileId}            /** ID des pièces jointes des mesures complémentaires !== 보완조치첨부파일ID ==! */
      , 'N'                              /** Suppression On !== 삭제여부 ==! */
      , #{frstRegstId}                   /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , SYSTIMESTAMP                     /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , #{lastChprId}                    /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , SYSTIMESTAMP                     /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      )
  </insert>

  <!--
    Consultation de paramètre de la période de validité de RTC !== RTC 유효기간 파라미터 조회 ==!
    (Park Byoungkyu)
    -->
  <select id="selectRtcValdRange" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnAudtVo" resultType="int">
    /* selectRtcValdRange */
    SELECT TO_NUMBER(PRMT_VAL_CN)
    FROM   TB_COM_PRMT
    WHERE PRMT_ID = 'CLR_0014'
  </select>

  <!--
    Consultation de la liste de l'historique de renseignement tarifaire contraignant !== 품목분류 사전판정 이력 목록 조회 ==!
    (Park Byoungkyu)
    -->
  <select id="selectClrPdlsClsfBfhnJdgnHistList" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnRqstVo" resultType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnRqstVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRtcAudtMgmtMapper.selectClrPdlsClsfBfhnJdgnHistList */
    <include refid="pagination.header" ></include>
    SELECT
        A.PDLS_CLSF_BFHN_JDGN_RQST_NO    /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
      , A.MDFY_DGCNT                     /** Fréquence de rectification !== 정정차수 ==! */
      , B.HIST_SRNO                      /** N° serie de l'historique !== 이력일련번호 ==! */
      , B.PDLS_CLSF_BFHN_JDGN_PN         /** N° de l'autorisation de décision de RTC !== 품목분류사전판정허가번호 ==! */
      , A.RQST_DT                        /** Date De Demande !== 신청일자 ==! */
      , A.DCER_CD                        /** Code Du Déclarant !== 신고인코드 ==! */
      , A.DCER_NM                        /** Nom Du Déclarant !== 신고인명 ==! */
      , NVL(A.LAST_CHG_DTTM, B.LAST_CHG_DTTM) AS LAST_CHG_DTTM				 /** Date et heure de modification finale !== 최종변경일시 ==! */
      , A.EXPC_HS_CD                     /** Sous position tarifaire prévue !== 예상HS코드 ==! */
      , A.TM_NM                          /** Nom De Marque !== 상표명 ==! */
      , A.RGPN_NM                        /** Nom et prénom (s) ou raison sociale !== 권리자명 ==! */
      , NVL(B.PRCS_STTS_CD, 'A01') AS PRCS_STTS_CD       /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , B.CSTM_CD                        /** Code douanier de réception !== 세관코드 ==! */
      , B.DEPT_CD                        /** Code de service !== 부서코드 ==! */
      , B.AUDT_EMP_ID                    /** ID de l'insepcteur !== 심사직원ID ==! */
      , B.CNCL_RSN_CD                    /** Code du motif d'annulation !== 취소사유코드 ==! */
      , B.CNCL_RSN_CN                    /** Contenus du motif d'annulation !== 취소사유내용 ==! */
      , B.VALD_STRT_DT                   /** Date de début de validité !== 유효시작일자 ==! */
      , B.VALD_END_DT                    /** Date de fin de validité !== 유효종료일자 ==! */
    FROM  TB_CLRE_RTC_RQST A
        , TB_CLRI_RTC_AUDT B
    WHERE
        A.PDLS_CLSF_BFHN_JDGN_RQST_NO = B.PDLS_CLSF_BFHN_JDGN_RQST_NO
    AND (A.MDFY_DGCNT = B.MDFY_DGCNT(+) OR A.MDFY_DGCNT = B.HIST_SRNO(+))
    AND A.DEL_YN = 'N'                   /** Suppression ON !== 삭제여부 ==! */
    AND B.DEL_YN = 'N'                   /** Suppression ON !== 삭제여부 ==! */
    AND A.PDLS_CLSF_BFHN_JDGN_RQST_NO = #{pdlsClsfBfhnJdgnRqstNo}       /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
    ORDER BY A.MDFY_DGCNT DESC, B.HIST_SRNO DESC
    <include refid="pagination.footer" ></include>
  </select>

  <!--
    Consultation des détails de l'historique de renseignement tarifaire contraignant !== 품목분류 사전판정 이력 상세 조회 ==!
    (Park Byoungkyu)
    -->
  <select id="selectClrPdlsClsfBfhnJdgnRqstHist" parameterType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnRqstVo" resultType="alpass.ipt.clr.pdr.aja.vo.ClrPdlsClsfBfhnJdgnRqstVo">
    /* alpass.ipt.clr.pdr.aja.mapper.ClrRtcAudtMgmtMapper.selectClrPdlsClsfBfhnJdgnRqstHist */
    WITH BF_RTC_SUBQ AS (
    SELECT A.PDLS_CLSF_BFHN_JDGN_RQST_NO, A.TM_NM, B.PROD_HS_CD, B.VALD_STRT_DT
    FROM TB_CLRE_RTC_RQST A
       , TB_CLRI_RTC_AUDT B
    WHERE A.PDLS_CLSF_BFHN_JDGN_RQST_NO = (SELECT BF_RTC_NO FROM TB_CLRE_RTC_RQST WHERE PDLS_CLSF_BFHN_JDGN_RQST_NO = #{pdlsClsfBfhnJdgnRqstNo} AND LAST_YN = 'Y')
    AND A.PDLS_CLSF_BFHN_JDGN_RQST_NO = B.PDLS_CLSF_BFHN_JDGN_RQST_NO
    AND A.DEL_YN = 'N'
    AND A.LAST_YN = 'Y'
    AND B.DEL_YN = 'N'
    AND B.LAST_YN = 'Y'
    ),
    RTC_REFF_SUBQ AS (
    SELECT A.PDLS_CLSF_BFHN_JDGN_RQST_NO, A.RQST_DT, A.TM_NM, B.PROD_HS_CD, B.VALD_STRT_DT
    FROM TB_CLRE_RTC_RQST A
       , TB_CLRI_RTC_AUDT B
    WHERE A.PDLS_CLSF_BFHN_JDGN_RQST_NO = (SELECT RTC_REFF_NO FROM TB_CLRE_RTC_RQST WHERE PDLS_CLSF_BFHN_JDGN_RQST_NO = #{pdlsClsfBfhnJdgnRqstNo} AND LAST_YN = 'Y')
    AND A.PDLS_CLSF_BFHN_JDGN_RQST_NO = B.PDLS_CLSF_BFHN_JDGN_RQST_NO
    AND A.DEL_YN = 'N'
    AND A.LAST_YN = 'Y'
    AND B.DEL_YN = 'N'
    AND B.LAST_YN = 'Y'
    )
    SELECT
        A.PDLS_CLSF_BFHN_JDGN_RQST_NO    /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
      , A.MDFY_DGCNT                     /** Fréquence de rectification !== 정정차수 ==! */
      , B.PDLS_CLSF_BFHN_JDGN_PN         /** N° de l'autorisation de décision de RTC !== 품목분류사전판정허가번호 ==! */
      , A.RQST_DT                        /** Date De Demande !== 신청일자 ==! */
      , A.DCER_CD                        /** Code Du Déclarant !== 신고인코드 ==! */
      , A.DCER_NM                        /** Nom Du Déclarant !== 신고인명 ==! */
      , A.DCER_POST_NO                   /** ZIPCODE Demandeur !== 신고인우편번호 ==! */
      , A.DCER_ADDR                      /** Adresse Du Déclarant !== 신고인주소 ==! */
      , A.DCER_TLPH_NO                   /** N° Tél. Du Dénonciateur  !== 신고인전화번호 ==! */
      , A.DCER_EML                       /** E-Mail Du Dénonciateur !== 신고인이메일 ==! */
      , A.CMRC_REGS_NO                   /** Numéro de registre du commerce !== 상업등기번호 ==! */
      , A.POTX_IDFY_NO                   /** Numéro d’identification fiscale !== 납세식별번호 ==! */
      , A.RGPN_NM                        /** Nom et prénom (s) ou raison sociale !== 권리자명 ==! */
      , A.RGPN_POST_NO                   /** ZIPCODE Titulaire. !== 권리자우편번호 ==! */
      , A.RGPN_ADDR                      /** Adresse Titulaire. !== 권리자주소 ==! */
      , A.RGPN_TLPH_NO                   /** N° tél Titulaire. !== 권리자전화번호 ==! */
      , A.RGPN_EML                       /** E-mail Titulaire. !== 권리자이메일 ==! */
      , A.RGPN_CMRC_REGS_NO              /** Numéro du registre du commerce Titulaire !== 권리자상업등기번호 ==! */
      , A.RGPN_POTX_IDFY_NO              /** Numéro d’identification fiscale Titulaire !== 권리자납세식별번호 ==! */
      , A.AEO_NO                         /** N° OEA !== AEO번호 ==! */
      , A.REPB_YN                        /** Rééimission d'un RCO ON !== 재발행여부 ==! */
      , A.BF_RTC_NO                      /** Réémission d’un RTC !== 이전RTC번호 ==! */
      , A.WKNG_PT_CD                     /** Type D'Opération !== 작업유형코드 ==! */
      , A.TM_NM                          /** Nom De Marque !== 상표명 ==! */
      , A.ORCY_CNTY_CD                   /** Code De Pays D'Origine !== 원산지국가코드 ==! */
      , A.AMT                            /** Montant !== 금액 ==! */
      , A.CURR_CD                        /** Code De Devise !== 통화코드 ==! */
      , A.WGHT                           /** Poids !== 중량 ==! */
      , A.WGHT_UT_CD                     /** Unité De Poids !== 중량단위코드 ==! */
      , A.EXPC_HS_CD                     /** Sous position tarifaire prévue !== 예상HS코드 ==! */
      , B.PROD_HS_CD                     /** Code SH du produit !== 상품HS코드 ==! */
      , A.HS_CLSF_RGLT_CN                /** Règlements !== HS규정내용 ==! */
      , A.CMDT_DESC_CN                   /** Description de la marchandise !== 물품설명내용 ==! */
      , A.DESC_OFR_YN                    /** Description ON !== 설명제공여부 ==! */
      , B.SAMP_OFR_YN                    /** Echantillon offert ON !== 견본제공여부 ==! */
      , A.PAMP_OFR_YN                    /** Brochures ON !== 팜플렛제공여부 ==! */
      , A.PHTO_OFR_YN                    /** Photographies ON !== 사진제공여부 ==! */
      , A.RPDC_OFR_YN                    /** Rapports/PV d'expertise ON !== 보고서제공여부 ==! */
      , A.USER_MANL_OFR_YN               /** Guide utilisateur ON !== 사용자매뉴얼제공여부 ==! */
      , A.OTHS_OFR_YN                    /** Autre à founir O/N !== 기타제공여부 ==! */
      , A.OTHS_OFR_CN                    /** Autres !== 기타제공내용 ==! */
      , A.OTHS_REQST_YN                  /** Autres demandes RTC YN !== 기타요청여부 ==! */
      , A.OTHS_REQST_CN                  /** Description de autres demandes RTC !== 기타요청내용 ==! */
      , A.RTC_REFF_NO                    /** Référence du RTC !== RTC참조번호 ==! */
      , A.SAME_JDGN_YN                   /** Que le même jugement !== 동일판정여부 ==! */
      , A.SAME_JDGN_CN                   /** Même contenu de jugement !== 동일판정내용 ==! */
      , C.SPLM_QRY_CN                    /** Contenu de la demande de complément !== 보완요구내용 ==! */
      , C.SPLM_TKAC_CN                   /** Mesures complémentaires !== 보완조치내용 ==! */
      , C.SPLM_TKAC_ATCH_FILE_ID         /** ID des pièces jointes des mesures complémentaires !== 보완조치첨부파일ID ==! */
      , NVL(B.PRCS_STTS_CD, 'A01') AS PRCS_STTS_CD       /** Code De Statut De Traitement !== 처리상태코드 ==! */
      , A.LAST_YN                        /** Final On !== 최종여부 ==! */
      , A.DEL_YN                         /** Suppression On !== 삭제여부 ==! */
      , A.FRST_REGST_ID                  /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
      , A.FRST_RGSR_DTTM                 /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
      , A.LAST_CHPR_ID                   /** Id Du Modificateur Final !== 최종변경자ID ==! */
      , A.LAST_CHG_DTTM                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
      , A.DESC_ATCH_FILE_ID              /** ID de la pièce jointe d’explication !== 설명첨부파일ID ==! */
      , A.PAMP_ATCH_FILE_ID              /** ID de la pièce jointe de brochure !== 팜플렛첨부파일ID ==! */
      , A.PHTO_ATCH_FILE_ID              /** ID de la pièce jointe de photo !== 사진첨부파일ID ==! */
      , A.RPDC_ATCH_FILE_ID              /** ID de la pièce jointe de rapport !== 보고서첨부파일ID ==! */
      , A.USER_MANL_ATCH_FILE_ID         /** ID de la pièce jointe de manuel d’utilisation !== 사용자매뉴얼첨부파일ID ==! */
      , A.OTHS_OFR_ATCH_FILE_ID          /** ID de l'autre pièce jointe !== 기타제공첨부파일ID ==! */
      , A.INFO_MAKE_CFRM_YN              /** Vérification de rédaction des informations O/N !== 정보작성확인여부 ==! */
      , B.CSTM_CD                        /** Code douanier de réception !== 세관코드 ==! */
      , B.VALD_STRT_DT                   /** Date de début de validité !== 유효시작일자 ==! */
      , B.DEPT_CD                        /** Code de service !== 부서코드 ==! */
      , B.AUDT_EMP_ID                    /** ID de l'insepcteur !== 심사직원ID ==! */
      , B.APRV_ID                        /** Id De L'Approbation !== 결재ID ==! */
      , B.CNCL_RSN_CD                    /** Code du motif d'annulation !== 취소사유코드 ==! */
      , B.CNCL_RSN_CN                    /** Contenus du motif d'annulation !== 취소사유내용 ==! */
      , B.AUDT_ATCH_FILE_ID              /** ID du document joint pour le contrôle !== 심사첨부파일ID ==! */
      <if test="bfRtcNo != null and bfRtcNo != ''">
        , D.TM_NM AS BF_TM_NM
        , D.PROD_HS_CD AS BF_PROD_HS_CD
        , D.VALD_STRT_DT AS BF_VALD_STRT_DT
      </if>
      <if test="rtcReffNo != null and rtcReffNo != ''">
        , E.TM_NM AS REFF_TM_NM
        , E.PROD_HS_CD AS REFF_PROD_HS_CD
        , E.VALD_STRT_DT AS REFF_VALD_STRT_DT
        , E.RQST_DT AS REFF_RQST_DT
      </if>
    FROM  TB_CLRE_RTC_RQST A
        , TB_CLRI_RTC_AUDT B
        , TB_CLRI_BFHN_JDGN_SPLM_QRY C
      <if test="bfRtcNo != null and bfRtcNo != ''">
        , BF_RTC_SUBQ D
      </if>
      <if test="rtcReffNo != null and rtcReffNo != ''">
        , RTC_REFF_SUBQ E
      </if>
    WHERE
        A.PDLS_CLSF_BFHN_JDGN_RQST_NO = B.PDLS_CLSF_BFHN_JDGN_RQST_NO (+)
    AND	A.PDLS_CLSF_BFHN_JDGN_RQST_NO = C.BFHN_JDGN_RQST_NO (+)
    AND	A.MDFY_DGCNT = C.SPLM_QRY_DGCNT (+)   <!--외부 정정차수 = 보안요구 차수-->
    AND A.MDFY_DGCNT = B.MDFY_DGCNT (+)
    AND A.DEL_YN (+) = 'N'                    /** Suppression ON !== 삭제여부 ==! */
    AND B.DEL_YN (+) = 'N'                    /** Suppression ON !== 삭제여부 ==! */
    AND C.DEL_YN (+) = 'N'                    /** Suppression ON !== 삭제여부 ==! */
    AND B.LAST_YN (+) = 'Y'                   /** Final On !== 최종여부 ==! */
    AND A.PDLS_CLSF_BFHN_JDGN_RQST_NO (+) = #{pdlsClsfBfhnJdgnRqstNo}       /** N° de demande de RTC !== 품목분류사전판정신청번호 ==! */
    <if test="mdfyDgcnt != null">
      <if test="mdfyDgcnt != ''or mdfyDgcnt == 0">
        AND A.MDFY_DGCNT (+) = #{mdfyDgcnt}                          /** Fréquence de rectification !== 정정차수 ==! */
      </if>
    </if>
  </select>

</mapper>
