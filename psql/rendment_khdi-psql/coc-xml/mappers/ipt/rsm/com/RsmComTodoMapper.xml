<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="alpass.ipt.rsm.com.mapper.RsmComTodoMapper">

    <!--
        Consulter la liste des To-do !== Todo리스트 조회 ==!
    -->
    <select id="selectTodoIdLst"
        parameterType="alpass.com.todo.vo.ComTodoVo"
        resultType="alpass.com.todo.vo.ComTodoVo">
        /* RsmCom_selectTodoIdLst */

        SELECT TODO_ID                          /** Id De L'À Faire !== 할일ID ==! */
        FROM   TB_POTI_TODO
        WHERE  DEL_YN = 'N'                     /** Suppression On !== 삭제여부 ==! */
        AND    BSOP_CLSF_CD = #{bsopClsfCd}     /** Code De Domaine De Travail !== 업무분류코드 ==! */
        AND    TODO_REFF_NO = #{todoReffNo}     /** Code De Référence D'À Faire !== 할일참조번호 ==! */
        <if test="mdfyDgcnt != null and mdfyDgcnt != ''">
            AND    MDFY_DGCNT = #{mdfyDgcnt}    /** Fréquence de rectification !== 정정차수 ==! */
        </if>
        AND    TODO_STTS_CD = 'A'               /** Code De Statut D'À Faire !== 할일상태코드 ==! */
        <if test="todoBsopTpCd != null and todoBsopTpCd != ''">
            AND    TODO_BSOP_TP_CD = #{todoBsopTpCd}        /** Code De Catégorie De L'Élément À Faire !== 할일업무구분코드 ==! */
        </if>
        <if test="chpnId != null and chpnId != ''">
            AND    CHPN_ID = #{chpnId}          /** Id Du Responsable !== 담당자ID ==! */
        </if>
    </select>

    <!--
      consulter l'ID de To-do !== Todo Id 조회 ==!
    -->
    <select id="selectMytodoId"
        parameterType="alpass.com.todo.vo.ComTodoVo"
        resultType="java.lang.String">
        /* RsmCom_selectMytodoId */

        SELECT A.TODO_ID                            /** Id De L'À Faire !== 할일ID ==! */
        FROM TB_POTI_TODO A
           , TB_POTI_EMP B
        WHERE A.CHPN_ID = B.PBSR_NO                 /** Id Du Responsable !== 담당자ID ==! */
        AND A.CHPN_ID =  #{userId}
        AND A.DEL_YN = 'N'                          /** Suppression On !== 삭제여부 ==! */
        AND A.TODO_REFF_NO = #{todoReffNo}          /** Code De Référence D'À Faire !== 할일참조번호 ==! */
        AND A.TODO_STTS_CD = 'A'                    /** Code De Statut D'À Faire !== 할일상태코드 ==! */
        AND A.TODO_BSOP_TP_CD = #{todoBsopTpCd}     /** Code De Catégorie De L'Élément À Faire !== 할일업무구분코드 ==! */
    </select>

    <!--
      Consulter la liste des employés des douanes ayant le rôle concerné !== 해당 Role 세관직원 목록 조회 ==!
    -->
    <select id="selectRoleCstmEmpList"
        parameterType="java.lang.String"
        resultType="java.lang.String">
        /* RsmCom_selectRoleCstmEmpList */

        SELECT B.PBSR_NO                            /** Matricule Solde !== 공무원번호 ==! */
		FROM VW_POTI_ROLE_UNFC A
			 , TB_POTI_EMP B
		WHERE B.DEL_YN = 'N'                        /** Suppression On !== 삭제여부 ==! */
			AND A.PBSR_NO = B.PBSR_NO               /** Matricule Solde !== 공무원번호 ==! */
			AND ROLE_ID = #{roleId}                 /** Id De Rôle !== 롤ID ==! */
    </select>

</mapper>