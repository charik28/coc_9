<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="RsmSelcInlistCdw">

    <!--
    Modifier inList !== inList 마스터 정보 수정 ==!
    -->
    <update id="updateCdwInlist" parameterType="alpass.ipt.rsm.selc.vo.RsmSelcInlistVo">

    /* updateCdwInlist */
    UPDATE TB_RSMI_ILST_BSCS
    SET
           ILST_NM = #{ilstNm}                            /* Nom d'inList !== INLIST명 ==!*/
            <if test='imppnExppnYn != null and !"".equals(imppnExppnYn)'>
                <choose>
                    <when test='"Y".equals(imppnExppnYn)'>
         , IMPPN_EXPPN_YN = #{imppnExppnYn}               /* Type d'opérateur !== 수입자수출자여부 ==!*/
                    </when>
                    <otherwise>
         , IMPPN_EXPPN_YN = 'N'                           /* Type d'opérateur !== 수입자수출자여부 ==!*/
                    </otherwise>
                </choose>
            </if>
            <if test='hsCdInpYn != null and !"".equals(hsCdInpYn)'>
                <choose>
                    <when test='"Y".equals(hsCdInpYn)'>
         , HS_CD_INP_YN = #{hsCdInpYn}                    /* Code SH saisi O/N !== HS코드입력여부 ==!*/
                    </when>
                    <otherwise>
         , HS_CD_INP_YN = 'N'                             /* Code SH saisi O/N !== HS코드입력여부 ==!*/
                    </otherwise>
                </choose>
            </if>
            <if test='dcerInpYn != null and !"".equals(dcerInpYn)'>
                <choose>
                    <when test='"Y".equals(dcerInpYn)'>
         , DCER_INP_YN = #{dcerInpYn}                     /* Déclarant saisi O/N !== 신고인입력여부 ==!*/
                    </when>
                    <otherwise>
         , DCER_INP_YN = 'N'                              /* Déclarant saisi O/N !== 신고인입력여부 ==!*/
                    </otherwise>
                </choose>
            </if>
            <if test='orcyInpYn != null and !"".equals(orcyInpYn)'>
                <choose>
                    <when test='"Y".equals(orcyInpYn)'>
         , ORCY_INP_YN = #{orcyInpYn}                     /* Origine saisi  !== 원산지입력여부 ==!*/
                    </when>
                    <otherwise>
         , ORCY_INP_YN = 'N'                              /* Origine saisi  !== 원산지입력여부 ==!*/
                    </otherwise>
                </choose>
            </if>
         , ILST_DESC = #{ilstDesc}                        /* Description d'inList !== INLIST설명 ==!*/
            <if test='baseRqstTpCd != null and !"".equals(baseRqstTpCd)'>
         , BASE_RQST_TP_CD = #{baseRqstTpCd}              /* Code de type de renseignement  !== 기준신청구분코드 ==!*/
            </if>
         , DEL_YN = #{delYn}                              /* Suppression ON !== 삭제여부 ==!*/
         , FRST_REGST_ID = #{lastChprId}                  /* ID du premier enregistrant  !== 최초등록자ID ==!*/
         , FRST_RGSR_DTTM = SYSTIMESTAMP                  /* Date et heure de premier enregistrement !== 최초등록일시 ==!*/
         , LAST_CHPR_ID = #{lastChprId}                   /* ID du modificateur final !== 최종변경자ID ==!*/
         , LAST_CHG_DTTM = SYSTIMESTAMP                   /* Date et heure de modification finale !== 최종변경일시 ==!*/
    WHERE ILST_NO = #{ilstNo}                             /* Numéro d'inList  !== INLIST번호 ==!*/

    </update>

    <!--
    Modifier inList !== inList 상세 정보 수정 ==!
    -->
    <update id="updateCdwInlist2" parameterType="alpass.ipt.rsm.com.vo.RsmIlstDVo">

    /* updateCdwInlist2 */
    UPDATE TB_RSMI_ILST_D
    SET
           IMPPN_EXPPN_POTX_NO = #{imppnExppnPotxNo}                    /* N° de RCCM !== 수입자수출자사업자등록번호 ==!*/
         , HS_CD = #{hsCd}                                              /* Code SH !== HS코드 ==!*/
         , DCER_CD = #{dcerCd}                                          /* Code du déclarant !== 신고인코드 ==!*/
         , ORCY_CNTY_CD = #{orcyCntyCd}                                 /* Code de pays d'origine !== 원산지국가코드 ==!*/
         , DEL_YN = #{delYn}                                            /* Suppression ON !== 삭제여부 ==!*/
         , FRST_REGST_ID = #{lastChprId}                                /* ID du premier enregistrant  !== 최초등록자ID ==!*/
         , FRST_RGSR_DTTM = SYSTIMESTAMP                                /* Date et heure de premier enregistrement !== 최초등록일시 ==!*/
         , LAST_CHPR_ID = #{lastChprId}                                 /* ID du modificateur final !== 최종변경자ID ==!*/
         , LAST_CHG_DTTM = SYSTIMESTAMP                                 /* Date et heure de modification finale !== 최종변경일시 ==!*/
    WHERE  ILST_NO = #{ilstNo}                                          /* Numéro d'inList  !== INLIST번호 ==!*/
    AND    ILST_DTL_SRNO = #{ilstDtlSrno}                               /* N° de série d'inList  !== INLIST상세일련번호 ==!*/

    </update>

    <!--
    Supprimer une inList (définitif) !== inList 삭제 ==!
    -->
    <delete id="deleteCdwInlist" parameterType="alpass.ipt.rsm.selc.vo.RsmSelcInlistVo">

    /* deleteCdwInlist */
    DELETE FROM  TB_RSMI_ILST_BSCS
    WHERE  ILST_NO = #{ilstNo}                           /* Numéro d'inList  !== INLIST번호 ==!*/

    </delete>

    <!--
    Supprimer une inList (définitif) !== inList 삭제 ==!
    -->
    <delete id="deleteCdwInlistD" parameterType="alpass.ipt.rsm.selc.vo.RsmSelcInlistVo">

    /* deleteCdwInlistD */
    DELETE FROM TB_RSMI_ILST_D
    WHERE  ILST_NO = #{ilstNo}                           /* Numéro d'inList  !== INLIST번호 ==!*/

    </delete>

    <!--
    Supprimer inList !== inList를 삭제상태로 변경 ==!
    -->
    <update id="updateCdwTodeleteStateInlist" parameterType="alpass.ipt.rsm.selc.vo.RsmSelcInlistVo">

    /* updateCdwTodeleteStateInlist */
    UPDATE TB_RSMI_ILST_BSCS
    SET
           DEL_YN = 'Y'                                  /* Suppression ON !== 삭제여부 ==!*/
         , LAST_CHPR_ID = #{lastChprId}                  /* ID du modificateur final !== 최종변경자ID ==!*/
         , LAST_CHG_DTTM = SYSTIMESTAMP                  /* Date et heure de modification finale !== 최종변경일시 ==!*/
    WHERE  ILST_NO = #{ilstNo}                           /* Numéro d'inList  !== INLIST번호 ==!*/

    </update>

    <!--
    Supprimer le détail de la liste inList !== inList 상세 정보를 삭제 상태로 변경 ==!
    -->
    <update id="updateCdwTodeleteStateInlistD" parameterType="alpass.ipt.rsm.selc.vo.RsmSelcInlistVo">

    /* updateCdwTodeleteStateInlistD */
    UPDATE TB_RSMI_ILST_D
    SET
           DEL_YN = 'Y'                                  /* Suppression ON !== 삭제여부 ==!*/
         , LAST_CHPR_ID = #{lastChprId}                  /* ID du modificateur final !== 최종변경자ID ==!*/
         , LAST_CHG_DTTM = SYSTIMESTAMP                  /* Date et heure de modification finale !== 최종변경일시 ==!*/
    WHERE  ILST_NO = #{ilstNo}                           /* Numéro d'inList  !== INLIST번호 ==!*/
    <if test='ilstDtlSrno != null and ilstDtlSrno != 0'>
    AND    ILST_DTL_SRNO = #{ilstDtlSrno}                /* N° de série d'inList  !== INLIST상세일련번호 ==!*/
    </if>

    </update>

    <!--
    Enregistrer inList !== inList 등록 ==!
    -->
    <insert id="insertCdwInlist" parameterType="alpass.ipt.rsm.selc.vo.RsmSelcInlistVo">

    /* insertCdwInlist */
    INSERT INTO TB_RSMI_ILST_BSCS (
          ILST_NO                                                      /* Numéro d'inList  !== INLIST번호 ==!*/
        , ILST_NM                                                      /* Nom d'inList !== INLIST명 ==!*/
        , IMPPN_EXPPN_YN                                               /* Type d'opérateur !== 수입자수출자여부 ==!*/
        , HS_CD_INP_YN                                                 /* Code SH saisi O/N !== HS코드입력여부 ==!*/
        , DCER_INP_YN                                                  /* Déclarant saisi O/N !== 신고인입력여부 ==!*/
        , ORCY_INP_YN                                                  /* Origine saisi  !== 원산지입력여부 ==!*/
        , ILST_DESC                                                    /* Description d'inList !== INLIST설명 ==!*/
        , BASE_RQST_TP_CD                                              /* Code de type de renseignement  !== 기준신청구분코드 ==!*/
        , DEL_YN                                                       /* Suppression ON !== 삭제여부 ==!*/
        , FRST_REGST_ID                                                /* ID du premier enregistrant  !== 최초등록자ID ==!*/
        , FRST_RGSR_DTTM                                               /* Date et heure de premier enregistrement !== 최초등록일시 ==!*/
        , LAST_CHPR_ID                                                 /* ID du modificateur final !== 최종변경자ID ==!*/
        , LAST_CHG_DTTM                                                /* Date et heure de modification finale !== 최종변경일시 ==!*/
    ) VALUES (
          #{ilstNo}                                                    /* Numéro d'inList  !== INLIST번호 ==!*/
        , #{ilstNm}                                                    /* Nom d'inList !== INLIST명 ==!*/
        , #{imppnExppnYn}                                              /* Type d'opérateur !== 수입자수출자여부 ==!*/
        , #{hsCdInpYn}                                                 /* Code SH saisi O/N !== HS코드입력여부 ==!*/
        , #{dcerInpYn}                                                 /* Déclarant saisi O/N !== 신고인입력여부 ==!*/
        , #{orcyInpYn}                                                 /* Origine saisi  !== 원산지입력여부 ==!*/
        , #{ilstDesc}                                                  /* Description d'inList !== INLIST설명 ==!*/
        , #{baseRqstTpCd}                                              /* Code de type de renseignement  !== 기준신청구분코드 ==!*/
        , #{delYn}                                                     /* Suppression ON !== 삭제여부 ==!*/
        , #{frstRegstId}                                               /* ID du premier enregistrant  !== 최초등록자ID ==!*/
        , SYSTIMESTAMP                                                 /* Date et heure de premier enregistrement !== 최초등록일시 ==!*/
        , #{lastChprId}                                                /* ID du modificateur final !== 최종변경자ID ==!*/
        , SYSTIMESTAMP                                                 /* Date et heure de modification finale !== 최종변경일시 ==!*/
    )

    </insert>

    <!--
    Enregistrer inList !== inList 상세 등록 ==!
    -->
    <insert id="insertCdwInlistD" parameterType="alpass.ipt.rsm.com.vo.RsmIlstDVo">

    <selectKey keyProperty="ilstDtlSrno" keyColumn="ilst_dtl_srno" resultType="java.math.BigDecimal" order="BEFORE">
    SELECT NVL(MAX(ILST_DTL_SRNO), 0) + 1 FROM TB_RSMI_ILST_D WHERE ILST_NO = #{ilstNo}
    </selectKey>

    /* insertCdwInlistD */
    INSERT INTO TB_RSMI_ILST_D (
          ILST_NO                                                      /* Numéro d'inList  !== INLIST번호 ==!*/
        , ILST_DTL_SRNO                                                /* N° de série d'inList  !== INLIST상세일련번호 ==!*/
        , IMPPN_EXPPN_POTX_NO                                          /* N° de RCCM !== 수입자수출자사업자등록번호 ==!*/
        , HS_CD                                                        /* Code SH !== HS코드 ==!*/
        , DCER_CD                                                      /* Code du déclarant !== 신고인코드 ==!*/
        , ORCY_CNTY_CD                                                 /* Code de pays d'origine !== 원산지국가코드 ==!*/
        , DEL_YN                                                       /* Suppression ON !== 삭제여부 ==!*/
        , FRST_REGST_ID                                                /* ID du premier enregistrant  !== 최초등록자ID ==!*/
        , FRST_RGSR_DTTM                                               /* Date et heure de premier enregistrement !== 최초등록일시 ==!*/
        , LAST_CHPR_ID                                                 /* ID du modificateur final !== 최종변경자ID ==!*/
        , LAST_CHG_DTTM                                                /* Date et heure de modification finale !== 최종변경일시 ==!*/
    ) VALUES (
          #{ilstNo}                                                    /* Numéro d'inList  !== INLIST번호 ==!*/
        , #{ilstDtlSrno}                                               /* N° de série d'inList  !== INLIST상세일련번호 ==!*/
        , #{imppnExppnPotxNo}                                             /* N° de RCCM !== 수입자수출자사업자등록번호 ==!*/
        , #{hsCd}                                                      /* Code SH !== HS코드 ==!*/
        , #{dcerCd}                                                    /* Code du déclarant !== 신고인코드 ==!*/
        , #{orcyCntyCd}                                                /* Code de pays d'origine !== 원산지국가코드 ==!*/
        , #{delYn}                                                     /* Suppression ON !== 삭제여부 ==!*/
        , #{frstRegstId}                                               /* ID du premier enregistrant  !== 최초등록자ID ==!*/
        , SYSTIMESTAMP                                                 /* Date et heure de premier enregistrement !== 최초등록일시 ==!*/
        , #{lastChprId}                                                /* ID du modificateur final !== 최종변경자ID ==!*/
        , SYSTIMESTAMP                                                 /* Date et heure de modification finale !== 최종변경일시 ==!*/
    )

    </insert>

    <resultMap id="selectBaseMgmtAndRlbsBase_resultMap" type="alpass.ipt.rsm.selc.vo.RsmSelcInlistVo">
        <result property="baseMgmtComnVo.baseRgsrNo"           column="BASE_RGSR_NO"        />
        <result property="baseMgmtComnVo.rqstBaseClsfCd"       column="RQST_BASE_CLSF_CD"   />
        <result property="baseMgmtComnVo.aplyBaseClsfCd"       column="APLY_BASE_CLSF_CD"   />
        <result property="baseMgmtComnVo.baseRqstTpCd"         column="BASE_RQST_TP_CD"     />
        <result property="baseMgmtComnVo.basePrcsSttsCd"       column="BASE_PRCS_STTS_CD"   />
        <result property="baseMgmtComnVo.aprvBsopTpCd"         column="APRV_BSOP_TP_CD"     />
        <result property="baseMgmtComnVo.aprvId"               column="APRV_ID"             />
        <result property="baseMgmtComnVo.baseAplyYn"           column="BASE_APLY_YN"        />
        <result property="baseMgmtComnVo.dcshTpCd"             column="DCSH_TP_CD"          />
        <result property="baseMgmtComnVo.bsopTpCd"             column="BSOP_TP_CD"          />
        <result property="baseMgmtComnVo.aplyStrtDt"           column="APLY_STRT_DT"        />
        <result property="baseMgmtComnVo.aplyEndDt"            column="APLY_END_DT"         />
        <result property="baseMgmtComnVo.aplyCstmTpCd"         column="APLY_CSTM_TP_CD"     />
        <result property="baseMgmtComnVo.grnSelcRt"            column="GRN_SELC_RT"         />
        <result property="baseMgmtComnVo.bluSelcRt"            column="BLU_SELC_RT"         />
        <result property="baseMgmtComnVo.oreSelcRt"            column="ORE_SELC_RT"         />
        <result property="baseMgmtComnVo.redSelcRt"            column="RED_SELC_RT"         />
        <result property="baseMgmtComnVo.coWgvlAplyYn"         column="CO_WGVL_APLY_YN"     />
        <result property="baseMgmtComnVo.selcWgvlAplyYn"       column="SELC_WGVL_APLY_YN"   />
        <result property="baseMgmtComnVo.aplyProrRnk"          column="APLY_PROR_RNK"       />
        <result property="baseMgmtComnVo.baseDesc"             column="BASE_DESC"           />
        <result property="baseMgmtComnVo.inscGdlnCn"           column="INSC_GDLN_CN"        />
        <result property="baseMgmtComnVo.rqstRsnCd"            column="RQST_RSN_CD"         />
        <result property="baseMgmtComnVo.rtrnRsnCn"            column="RTRN_RSN_CN"       />
        <result property="baseMgmtComnVo.oprnSqlCn"            column="OPRN_SQL_CN"         />
        <result property="baseMgmtComnVo.smltSqlCn"            column="SMLT_SQL_CN"         />
        <result property="baseMgmtComnVo.orbsRgsrNo"           column="ORBS_RGSR_NO"        />
        <result property="baseMgmtComnVo.delYn"                column="DEL_YN"              />
        <result property="baseMgmtComnVo.frstRegstId"          column="FRST_REGST_ID"       />
        <result property="baseMgmtComnVo.frstRegstNm"          column="FRST_REGST_NM"       />
        <result property="baseMgmtComnVo.frstRgsrDttm"         column="FRST_RGSR_DTTM"      />
        <result property="baseMgmtComnVo.lastChprId"           column="LAST_CHPR_ID"        />
        <result property="baseMgmtComnVo.lastChgDttm"          column="LAST_CHG_DTTM"       />
        <result property="baseMgmtComnVo.apreDt"               column="APRE_DT"             />
        <result property="baseMgmtComnVo.aplyDt"               column="APLY_DT"             />
        <result property="baseMgmtComnVo.dclrPtCd"             column="DCLR_PT_CD"          />
        <result property="rlbsBaseVo.tblNm"                    column="TBL_NM"              />
        <result property="rlbsBaseVo.colNm"                    column="COL_NM"              />
        <result property="rlbsBaseVo.baseSrno"                 column="BASE_SRNO"           />
        <result property="rlbsBaseVo.operCd"                   column="OPER_CD"             />
        <result property="rlbsBaseVo.val"                      column="VAL"                 />
        <result property="rlbsBaseVo.valDesc"                  column="VAL_DESC"            />
    </resultMap>

</mapper>