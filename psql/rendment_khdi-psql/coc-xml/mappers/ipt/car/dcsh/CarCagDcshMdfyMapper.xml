<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="alpass.ipt.car.dcsh.mapper.CarCagDcshMdfyMapper">

  <sql id="selectItem">
    select MDFY.cag_dcsh_mdfy_rqst_no                                  AS cag_dcsh_mdfy_rqst_no/** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
         , MDFY.cag_dcsh_mdfy_rqst_mgrn                                AS cag_dcsh_mdfy_rqst_mgrn/** Numéro de gestion de la demande de correction de la déclaration de fret !== 화물신고서정정신청관리번호 ==! */
         , MDFY.mrn                                                    AS mrn                 /** Mrn !== MRN ==! */
         , MDFY.mdfy_dgcnt                                             AS mdfy_dgcnt          /** Fréquence de rectification !== 정정차수 ==! */
         , MDFY.co_rqst_no                                             AS co_rqst_no          /** N° de demande d'entreprise !== 업체신청번호 ==! */
         , TO_CHAR(MDFY.trsn_dttm,'DD/MM/YYYY HH24:MI:SS')             AS trsn_dttm           /** Date et heure de transmission !== 전송일시 ==! */
         , MDFY.trsn_dttm                                              AS sort_trsn_dttm /** Date et heure de transmission !== 전송일시 ==! */
         , MDFY.cag_rqst_tp_cd                                         AS cag_rqst_tp_cd      /** Code de classement du suivi du fret !== 화물신청구분코드 ==! */
         , MDFY.jrsd_orgn_cd                                           AS jrsd_orgn_cd        /** Code D'Unité Compétente !== 관할조직코드 ==! */
         , FN_GET_ORGN_NM(mdfy.jrsd_orgn_cd)                           AS JRSD_ORGN_NM       /** Code D'Unité Compétente !== 관할조직코드 ==! */
         , MDFY.trsn_co_cd                                             AS trsn_co_cd          /** Code d'entreprise transmettrice !== 전송업체코드 ==! */
         , FN_CARI_GET_CO_NM(MDFY.TRSN_CO_CD)                          AS trsn_co_nm      /** Code de compagnie de envoyé !== 전송업체코드 ==! */
         , MDFY.cag_dcsh_mdfy_tp_cd                                    AS cag_dcsh_mdfy_tp_cd /** Code de classification de correction de la déclaration de fret !== 화물신고서정정구분코드 ==! */
         , MDFY.mdfy_rsn_cn                                            AS mdfy_rsn_cn         /** Motif de rectification !== 정정사유내용 ==! */
         , MDFY.bl_no                                                  AS bl_no               /** N° De Bl !== BL번호 ==! */
         , MDFY.apre_yn_cd                                             AS apre_yn_cd          /** Autorisation O/N !== 승인여부코드 ==! */
         , MDFY.audt_opin_cn                                           AS audt_opin_cn        /** Contenu De L'Opinion À La Suite De La Vérification !== 심사의견내용 ==! */
         , MDFY.del_yn                                                 AS del_yn              /** Suppression On !== 삭제여부 ==! */
         , MDFY.frst_regst_id                                          AS frst_regst_id       /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
         , TO_CHAR(MDFY.frst_rgsr_dttm,'DD/MM/YYYY HH24:MI:SS')        AS frst_rgsr_dttm      /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
         , MDFY.last_chpr_id                                           AS last_chpr_id        /** Id Du Modificateur Final !== 최종변경자ID ==! */
         , TO_CHAR(MDFY.last_chg_dttm,'DD/MM/YYYY HH24:MI:SS')         AS last_chg_dttm       /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
         , MDFY.atch_file_id                                           AS atch_file_id        /** Id Du Fichier Joint !== 첨부파일ID ==! */
         , PB.prcs_stts_cd                                             AS prcs_stts_cd /** Code De Statut De Traitement !== 처리상태코드 ==! */
         , TO_CHAR(PB.prcs_dttm, 'DD/MM/YYYY HH24:MI:SS')              AS prcs_dttm    /** Date de traitement !== 처리일자 ==! */
         , CD.cag_dcsh_rgsr_mgmt_no                                    AS cag_dcsh_rgsr_mgmt_no/** Numéro de gestion de l'enregistrement de la déclaration de fret !== 화물신고서등록관리번호 ==! */
         , CD.al_bl_gcnt                                               AS al_bl_gcnt /** Nombre Total De Bl !== 전체BL개수 ==! */
         , CD.al_pckg_gcnt                                             AS al_pckg_gcnt /** Nombre Total De Colis !== 전체포장개수 ==! */
         , CD.al_ttwg                                                  AS al_ttwg /** Poids Brut Total !== 전체총중량 ==! */
         , CD.al_cntr_gcnt                                             AS al_cntr_gcnt /** Nombre Total De Conteneurs !== 전체컨테이너개수 ==! */
         , CD.al_ecntr_cnt                                             AS al_ecntr_cnt /** Nombre total de conteneurs à vide !== 전체공컨테이너개수 ==! */
         , CD.al_vhcl_gcnt                                             AS al_vhcl_gcnt /** Nombre Total De Véhicules !== 전체차량개수 ==! */
         , CD.trnp_mean_cd                                             AS trnp_mean_cd /** Code de mode de transport !== 운송방법코드 ==! */
         , CD.trnp_meth_nm                                             AS trnp_meth_nm /** Nom De Moyen De Transport !== 운송수단명 ==! */
         , CD.trnp_meth_idfy_no                                        AS trnp_meth_idfy_no /** N° D'Identification Du Moyen De Transport !== 운송수단식별번호 ==! */
         , CD.trnp_rfer_no                                             AS trnp_rfer_no /** N° de référence de transport !== 운송참고번호 ==! */
         , TO_CHAR(TO_DATE(CD.trnp_meth_rgsr_dt, 'YYYYMMDD'), 'DD/MM/YYYY') AS trnp_meth_rgsr_dt /** Date D'Enregistrement De Moyen De Transport !== 운송수단등록일자 ==! */
         , TO_CHAR(CD.dptr_dttm, 'DD/MM/YYYY HH24:MI:SS')                   AS dptr_dttm /** Date Et Heure De Départ !== 출발일시 ==! */
         , TO_CHAR(CD.arvl_dttm, 'DD/MM/YYYY HH24:MI:SS')                   AS arvl_dttm /** Date Et Heure D'Arrivée !== 도착일시 ==! */
         , TO_CHAR(CD.real_arvl_dttm, 'DD/MM/YYYY HH24:MI:SS')              AS real_arvl_dttm /** Date Et Heure D'Arrivée Effective !== 실제도착일시 ==! */
         , TO_CHAR(TO_DATE(CD.last_ldun_dt, 'YYYYMMDD'), 'DD/MM/YYYY')      AS last_ldun_dt /** Date De Déchargement Définitif !== 최종하역일자 ==! */
         , CD.dptr_port_cd                                                  AS dptr_port_cd /** Code De Port De Départ !== 출발항구코드 ==! */
         , FN_CARI_GET_PORT_AIRPT_CITY_CD_NM(CD.dptr_port_cd, #{langCd})    AS dptr_port_NM /** Nom de port de départ !==출발항구명==! */
         , CD.ldun_port_cd                                                  AS ldun_port_cd /** Code De Port De Déchargement !== 하역항구코드 ==! */
         , FN_CARI_GET_PORT_AIRPT_CITY_CD_NM(CD.ldun_port_cd, #{langCd})    AS ldun_port_NM /** Nom de port de déchargement !==하역항구명==! */
         , CD.last_thrg_port_cd                                             AS last_thrg_port_cd /** Code Du Dernier Port D'Escale !== 최종경유항구코드 ==! */
         , CD.trnp_meth_loct_nm                                             AS trnp_meth_loct_nm /** Emplacement De Moyen De Transport !== 운송수단위치명 ==! */
         , CD.trnp_meth_nat_cd                                              AS trnp_meth_nat_cd /** Code de nationalité du moyen de transport !== 운송수단국적코드 ==! */
         , CD.ship_ttn                                                      AS ship_ttn /** Tonnage Brut Du Navire !== 선박총톤수 ==! */
         , CD.ship_nttn                                                     AS ship_nttn /** Tonnage Net Du Navire !== 선박순톤수 ==! */
         , CD.ltsp_yn                                                       AS ltsp_yn /** Nil !== 공선여부 ==! */
         , CD.carr_cd                                                       AS carr_cd /** Code De Société De Transport !== 운송사코드 ==! */
         , ( SELECT T1.CO_NM
               FROM TB_COM_CO T1
                  , TB_COM_CO_DCLR_CD T2
              WHERE T1.NIF = T2.NIF
                AND T2.CARR_CD = CD.CARR_CD
                AND T2.DEL_YN = 'N'
                AND ROWNUM = 1
           )                                                                AS CARR_NM /** Nom de société de transport !==운송사명==! */ -->
         , CD.carr_addr_nm                                                  AS carr_addr_nm /** Adresse De Société De Transport !== 운송사주소명 ==! */
         , CD.imo_no                                                        AS imo_no /** N° IMO !== IMO번호 ==! */
         , PB.rqst_dgcnt                                                    AS rqst_dgcnt /** N° ordre de la demande !== 신청차수 ==! */
         , PB.hnot_emp_id                                                   AS hnot_emp_id /** ID du chargé de cotation !== 배부직원ID ==! */
         , PB.audt_emp_id                                                   AS audt_emp_id /** ID de l'insepcteur !== 심사직원ID ==! */
         , (SELECT EMP.EMP_FMNM || ' ' || EMP.EMP_NM
            FROM TB_POTI_EMP EMP
            WHERE EMP.pbsr_no = PB.audt_emp_id)                             AS audt_emp_nm /** Nom de l'inspecteur !==심사직원명==! */
         , PB.insc_emp_id                                                   AS insc_emp_id /** ID de l'vérificateur !== 검사직원ID ==! */
         , HNOT.bfch_emp_id                                                 AS bfch_emp_id /** Id De L'Inspecteur Avant La Modification !== 변경전직원ID ==! */
         , HNOT.bfch_emp_nm                                                 AS bfch_emp_nm /** Id De L'Inspecteur Avant La Modification !== 변경전직원ID ==! */
         , HNOT.afch_emp_id                                                 AS afch_emp_id /** Id De L'Inspecteur Après La Modification !== 변경후직원ID ==! */
         , HNOT.afch_emp_nm                                                 AS afch_emp_nm /** Id De L'Inspecteur Après La Modification !== 변경후직원ID ==! */
         , HNOT.chg_rsn_cn                                                  AS chg_rsn_cn /** Motif De La Modification !== 변경사유내용 ==! */
         , CD.al_ntwg                                                       AS al_ntwg /** Poids net total (KG) !== 전체 순중량 ==! */
         , NVL(CD.ldun_bl_gcnt, 0)                         AS ldun_bl_gcnt /** Nombre de BL déchargé !== 양하BL개수 ==! */
         , bl.cag_mgmt_no                                                   AS cag_mgmt_no         /** N° Demande De La Création De Crn !== 화물관리번호 ==! */
         , bl.bl_srno                                                       AS bl_srno             /** N° De Séquence De Bl !== BL일련번호 ==! */
         , bl.bl_no                                                         AS bl_no               /** N° De Bl !== BL번호 ==! */
       , bl.hbl_no                                                        AS hbl_no              /** N° de House B/L !== HBL번호 ==! */
       <!-- , GNRL.AL_BL_GCNT AS AL_BL_GCNT                  /** Nombre total de B/L !== 전체BL개수 ==! */
       , GNRL.AL_PCKG_GCNT AS AL_PCKG_GCNT              /** Nombre total de colis  !== 전체포장개수 ==! */
       , GNRL.AL_TTWG AS AL_TTWG                        /** Poids brut total !== 전체총중량 ==! */
       , GNRL.AL_CNTR_GCNT AS AL_CNTR_GCNT              /** Nombre total de conteneurs   !== 전체컨테이너개수 ==! */
       , GNRL.AL_VHCL_GCNT AS AL_VHCL_GCNT              /** Nombre total de véhicules   !== 전체차량개수 ==! */ 
       , TO_CHAR(TO_DATE(GNRL.TRNP_METH_RGSR_DT,'YYYYMMDD'),'DD/MM/YYYY') AS TRNP_METH_RGSR_DT   /** Date d'enregistrement de moyen de transport !== 운송수단등록일자 ==! */
       , TO_CHAR(GNRL.REAL_ARVL_DTTM,'DD/MM/YYYY') AS REAL_ARVL_DTTM /** Date et heure d'arrivée effective !== 실제도착일시 ==! */
       , GNRL.LAST_LDUN_DT AS LAST_LDUN_DT              /** Date de déchargement définitif !== 최종하역일자 ==! */
       , GNRL.DPTR_PORT_CD AS DPTR_PORT_CD              /** Code de port de départ !== 출발항구코드 ==! */
       , GNRL.LDUN_PORT_CD AS LDUN_PORT_CD              /** Code de port de déchargement !== 하역항구코드 ==! */
       , GNRL.LAST_THRG_PORT_CD AS LAST_THRG_PORT_CD    /** Code du dernier port d'escale !== 최종경유항구코드 ==! */
       , GNRL.TRNP_METH_LOCT_NM AS TRNP_METH_LOCT_NM    /** Emplacement de moyen de transport !== 운송수단위치명 ==! */
       , GNRL.TRNP_METH_NAT_CD AS TRNP_METH_NAT_CD      /** Code de pays du moyen de transport !== 운송수단국적코드 ==! */
       , GNRL.SHIP_TTN AS SHIP_TTN                      /** Tonnage brut du navire !== 선박총톤수 ==! */
       , GNRL.SHIP_NTTN AS SHIP_NTTN                    /** Tonnage net du navire !== 선박순톤수 ==! */
       , GNRL.LTSP_YN AS LTSP_YN                        /** NIL !== 공선여부 ==! */
       , GNRL.CARR_CD AS CARR_CD                        /** Code de société de transport !== 운송사코드 ==! */
       , GNRL.CARR_ADDR_NM AS CARR_ADDR_NM              /** Adresse de société de transport !== 운송사주소명 ==! */ -->
       , PB.AUDT_EMP_ID AS AUDT_EMP_ID            /** Inspecteur != 심사자 =! */
      from tb_cari_cag_dcsh cd
           left join tb_cari_cag_dcsh_mdfy mdfy
           on cd.mrn = mdfy.mrn and mdfy.del_yn = 'N'
           LEFT JOIN TB_CARI_CAG_PRCS_BRKD PB
           ON mdfy.CAG_RQST_TP_CD = PB.CAG_RQST_TP_CD AND mdfy.cag_dcsh_mdfy_rqst_no = PB.CAG_RQST_NO AND PB.DEL_YN = 'N'
           LEFT JOIN (  SELECT A.cag_rqst_no    AS cag_rqst_no /** N° De Demande De Cargaison !== 화물신청번호 ==! */
                           , A.cag_rqst_tp_cd AS cag_rqst_tp_cd /** Code de classement du suivi du fret !== 화물신청구분코드 ==! */
                           , A.bfch_emp_id    AS bfch_emp_id /** Id De L'Inspecteur Avant La Modification !== 변경전직원ID ==! */
                           , A.afch_emp_id    AS afch_emp_id /** Id De L'Inspecteur Après La Modification !== 변경후직원ID ==! */
                           , A.chg_rsn_cn     AS chg_rsn_cn /** Motif De La Modification !== 변경사유내용 ==! */
                           , e1.EMP_FMNM || ' ' || e1.emp_nm        AS bfch_emp_nm /** Nom De L'Employé !== 직원명 ==! */
                           , e2.EMP_FMNM || ' ' || e2.emp_nm        AS afch_emp_nm /** Nom De L'Employé !== 직원명 ==! */
                      FROM TB_CARI_HNOT_CHG_H A
                               INNER JOIN (SELECT cag_rqst_no
                                                , MAX(chg_hist_srno) chg_hist_srno
                                           FROM TB_CARI_HNOT_CHG_H
                                           GROUP BY cag_rqst_no) H
                                          ON A.cag_rqst_no = h.cag_rqst_no
                                              AND a.chg_hist_srno = h.chg_hist_srno
                               LEFT JOIN TB_POTI_EMP e1
                                         ON e1.pbsr_no = a.bfch_emp_id
                               LEFT JOIN TB_POTI_EMP e2
                                         ON e2.pbsr_no = a.afch_emp_id) HNOT
                     ON HNOT.cag_rqst_no = PB.cag_rqst_no
                     AND HNOT.cag_rqst_tp_cd = PB.cag_rqst_tp_cd
           left outer join tb_cari_cag_dcsh_mdfy_gnrl gnrl 
           on mdfy.CAG_DCSH_MDFY_RQST_NO = gnrl.cag_dcsh_mdfy_rqst_no and gnrl.del_yn = 'N'
           left outer join tb_cari_cag_dcsh_mdfy_bl bl
           on mdfy.CAG_DCSH_MDFY_RQST_NO = bl.cag_dcsh_mdfy_rqst_no <!-- and mdfy.bl_no = bl.bl_no --> and bl.del_yn = 'N'
           <if test="cagChrcCd != null and cagChrcCd != ''">
           INNER JOIN ( SELECT DISTINCT T1.CAG_DCSH_MDFY_RQST_NO  FROM TB_CARI_CAG_DCSH_MDFY_BL T1
                          WHERE T1.DEL_YN = 'N'
                           AND T1.CAG_CHRC_CD = #{cagChrcCd}) CHRC_CD
            ON MDFY.CAG_DCSH_MDFY_RQST_NO = CHRC_CD.CAG_DCSH_MDFY_RQST_NO     
           </if>
           <if test="cmdtKndCd != null and cmdtKndCd != ''">         
           INNER JOIN ( SELECT DISTINCT T1.CAG_DCSH_MDFY_RQST_NO  FROM TB_CARI_CAG_DCSH_MDFY_BL T1
                          WHERE T1.DEL_YN = 'N'
                           AND T1.CMDT_KND_CD = #{cmdtKndCd}) KND_CD
            ON MDFY.CAG_DCSH_MDFY_RQST_NO = KND_CD.CAG_DCSH_MDFY_RQST_NO      
           </if>  
    where 1=1  
    </sql>

  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison ]  !==화물신고서 정정 리스트를  조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyList" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo">
    /* CarCagDcshMdfyMapper.selectCagDcshMdfyList */
    <include refid="pagination.header" />
    <include refid="selectItem"/>
    AND CD.del_yn = 'N' /** Suppression ON !== 삭제여부 ==! */
    AND MDFY.del_yn = #{delYn} /** Suppression ON !== 삭제여부 ==! */
    AND MDFY.cag_rqst_tp_cd = #{cagRqstTpCd} /** Code de classement du suivi du fret !== 화물신청구분코드 ==! */
    AND MDFY.MDFY_DGCNT <![CDATA[ > ]]> 0
    AND MDFY.CAG_DCSH_MDFY_TP_CD IN ('10', '20', '21', '22', '30', '31', '32', '50')
    AND CD.JRSD_ORGN_CD IN (           
            <choose>
                  <when test="jrsdOrgnCd != null and jrsdOrgnCd != ''">
                  SELECT unnest(string_to_array(alpassint.fn_cari_get_orgcd('O', #{jrsdOrgnCd}), ','))
                  </when>
                  <otherwise>
                  SELECT unnest(string_to_array(alpassint.fn_cari_get_orgcd('P', #{frstRegstId}), ','))
                  </otherwise>
              </choose>
            )
        <if test="managerYn == null or !managerYn.equals('Y'.toString())">/** administrateur !==관리자인 경우==! */
            <if test="audtEmpId != null and audtEmpId != ''">/** Inspecteur !==심사자인 경우==! */
                AND PB.AUDT_EMP_ID = #{audtEmpId} /** ID de la personne vérifiant !==심사직원ID==! */
            </if>
        </if>
        <if test="prcsDttmFrom != '' and prcsDttmFrom != null and prcsDttmTo != '' and prcsDttmTo != null">
            AND PB.prcs_dttm BETWEEN TO_DATE(#{prcsDttmFrom}, 'DD/MM/YYYY')
            AND TO_DATE(#{prcsDttmTo}, 'DD/MM/YYYY') + 0.99999 /** Date et heure de traitement !==처리일시==! */
        </if>
        <if test="jrsdOrgnCd != null and jrsdOrgnCd != ''">
            AND MDFY.jrsd_orgn_cd = #{jrsdOrgnCd} /** Code D'Unité Compétente !== 관할조직코드 ==! */
        </if>
        <if test="mrn != null and mrn != ''">
            AND UPPER(MDFY.mrn) = UPPER(#{mrn}) /** Mrn !== MRN ==! */
        </if>
        <if test="blNo != null and blNo != ''">
            AND UPPER(MDFY.BL_NO) LIKE UPPER(#{blNo})||'%' /** N° de BL !==BL번호==! */            
        </if>
        <if test="cagMgmtNo != null and cagMgmtNo != ''">
            AND  UPPER(BL.CAG_MGMT_NO) LIKE UPPER(#{cagMgmtNo})||'%' /** CRN !== 화물관리번호 ==! 
        </if>
        <if test="trsnDttmFrom != '' and trsnDttmFrom != null and trsnDttmTo != '' and trsnDttmTo != null">
            AND MDFY.TRSN_DTTM BETWEEN #{trsnDttmFrom} AND #{trsnDttmFrom} 
        </if>
        <if test="prcsSttsCd != null and prcsSttsCd != ''">
            AND PB.prcs_stts_cd = #{prcsSttsCd} /** Code De Statut De Traitement !== 처리상태코드 ==! */
        </if>
        <if test="mnfsMdfyTpCd != null and mnfsMdfyTpCd != ''">
           AND MDFY.CAG_DCSH_MDFY_TP_CD = #{mnfsMdfyTpCd} 
        </if>  
        ORDER BY sort_trsn_dttm DESC
        <include refid="pagination.footer"/>
  </select>
  
  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison ]  !==화물신고서 정정 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyInfoList" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo">
    /* selectCagDcshMdfyInfoList */
    <include refid="pagination.header" />
    SELECT *
    FROM (
      SELECT
        MNFS.CAG_DCSH_RGSR_MGMT_NO                      /** N° de gestion d'enregistrement de manifeste !==적하목록등록관리번호==! */
        , MDFY.CAG_DCSH_MDFY_RQST_MGRN               /** N° de gestion de modificaton de manifeste !==적하목록정정신청관리번호 ==! */
        , MDFY.CAG_DCSH_MDFY_RQST_NO                    /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */
        , MDFY.MRN                                  /** MRN !== MRN ==! */
        , MDFY.BL_NO                                /** N° de BL !==BL번호==! */
        , MDFY.MDFY_DGCNT                           /** Nombre de fois de la modification !== 정정차수 ==! */
        , MDFY.CAG_RQST_TP_CD                       /** Code de type de demande de cargaison !== 화물신청구분코드 ==! */
        , TO_CHAR(MDFY.TRSN_DTTM,'DD/MM/YYYY') AS TRSN_DTTM  /** Date et heure de envoyé !== 전송일시 ==! */
        , MDFY.TRSN_CO_CD                           /** Code de compagnie de envoyé !== 전송업체코드 ==! */
        , FN_CARI_GET_CO_NM(MDFY.TRSN_CO_CD) AS trsn_co_nm  /** Code de compagnie de envoyé !== 전송업체코드 ==! */
        , MNFS.JRSD_ORGN_CD                         /** Code d'unité compétente !==관할조직코드==! */
        , ORGN.ORGN_NM  AS JRSD_ORGN_NM        /** Nom de l'unité compétente !==관할조직명==! */      
        , MDFY.CAG_DCSH_MDFY_TP_CD                      /** Code de type de modification de manifeste !== 적하목록정정구분코드 ==! */
        , MDFY.MDFY_RSN_CN                          /** Motif de modification  !== 정정사유내용 ==! */
        , BL.CAG_MGMT_NO                          /** CRN !== 화물관리번호 ==! */
        , BL.BL_SRNO                            /** N° de sequence de BL !==BL일련번호==! */
        , TO_CHAR(BRKD.PRCS_DTTM,'DD/MM/YYYY') AS PRCS_DTTM  /** Date et heure de traitement !== 처리일시 ==! */
        , BRKD.PRCS_DTTM AS sort_trsn_dttm
        , BRKD.PRCS_STTS_CD                         /** Code de statut de traitement !== 처리상태코드 ==! */
        , MDFY.APRE_YN_CD                         /** Autorisation O/N !==승인여부코드==! */
        , MDFY.AUDT_OPIN_CN                              /** Contenu de notification !== 통보내용 ==! */
        , MDFY.DEL_YN                               /** Suppression O/N !== 삭제여부 ==! */
        , GNRL.AL_BL_GCNT AS AL_BL_GCNT                  /** Nombre total de B/L !== 전체BL개수 ==! */
        , GNRL.AL_PCKG_GCNT AS AL_PCKG_GCNT              /** Nombre total de colis  !== 전체포장개수 ==! */
        , GNRL.AL_TTWG AS AL_TTWG                        /** Poids brut total !== 전체총중량 ==! */
        , GNRL.AL_CNTR_GCNT AS AL_CNTR_GCNT              /** Nombre total de conteneurs   !== 전체컨테이너개수 ==! */
        , GNRL.AL_VHCL_GCNT AS AL_VHCL_GCNT              /** Nombre total de véhicules   !== 전체차량개수 ==! */
        , MNFS.TRNP_MEAN_CD AS TRNP_MEAN_CD              /** Code de type de transport !== 운송방법코드 ==! */
        , MNFS.TRNP_METH_NM AS TRNP_METH_NM              /** Nom de moyen de transport !== 운송수단명 ==! */
        , MNFS.TRNP_METH_IDFY_NO AS TRNP_METH_IDFY_NO    /** Signal d'appel de moyen de transport pour transbordement !== 운송수단식별번호 ==! */
        , MNFS.TRNP_RFER_NO AS TRNP_RFER_NO              /** N° de voyage/N° de vol/N° d'itinéraire !== 운송참고번호 ==! */
        , TO_CHAR(TO_DATE(GNRL.TRNP_METH_RGSR_DT,'YYYYMMDD'),'DD/MM/YYYY') AS TRNP_METH_RGSR_DT   /** Date d'enregistrement de moyen de transport !== 운송수단등록일자 ==! */
        , TO_CHAR(GNRL.DPTR_DTTM, 'DD/MM/YYYY HH24:MI') AS DPTR_DTTM  /** Date et heure de depart !==출발일시==! */
        , TO_CHAR(GNRL.ARVL_DTTM, 'DD/MM/YYYY HH24:MI') AS ARVL_DTTM  /** Date et heure d'arrivee !==도착일시==! */
        , TO_CHAR(GNRL.REAL_ARVL_DTTM,'DD/MM/YYYY HH24:MI') AS REAL_ARVL_DTTM /** Date et heure d'arrivée effective !== 실제도착일시 ==! */
        , GNRL.LAST_LDUN_DT AS LAST_LDUN_DT              /** Date de déchargement définitif !== 최종하역일자 ==! */
        , GNRL.DPTR_PORT_CD AS DPTR_PORT_CD              /** Code de port de départ !== 출발항구코드 ==! */
        , GNRL.LDUN_PORT_CD AS LDUN_PORT_CD              /** Code de port de déchargement !== 하역항구코드 ==! */
        , GNRL.LAST_THRG_PORT_CD AS LAST_THRG_PORT_CD    /** Code du dernier port d'escale !== 최종경유항구코드 ==! */
        , GNRL.TRNP_METH_LOCT_NM AS TRNP_METH_LOCT_NM    /** Emplacement de moyen de transport !== 운송수단위치명 ==! */
        , GNRL.TRNP_METH_NAT_CD AS TRNP_METH_NAT_CD      /** Code de pays du moyen de transport !== 운송수단국적코드 ==! */
        , GNRL.SHIP_TTN AS SHIP_TTN                      /** Tonnage brut du navire !== 선박총톤수 ==! */
        , GNRL.SHIP_NTTN AS SHIP_NTTN                    /** Tonnage net du navire !== 선박순톤수 ==! */
        , GNRL.LTSP_YN AS LTSP_YN                        /** NIL !== 공선여부 ==! */
--         , GNRL.COAT_TRNP_YN AS COAT_TRNP_YN              /** Cabotage O/N !== 연안운송여부 ==! */
        , GNRL.CARR_CD AS CARR_CD                        /** Code de société de transport !== 운송사코드 ==! */
        , GNRL.CARR_ADDR_NM AS CARR_ADDR_NM              /** Adresse de société de transport !== 운송사주소명 ==! */
--         , GNRL.DRVR_NM AS DRVR_NM                        /** Nom de transporteur !== 운전자명 ==! */
--         , GNRL.DRVR_ADIT_INFO_CN AS DRVR_ADIT_INFO_CN    /** Info supplémentaire de transporteur !== 운전자추가정보내용 ==! */
        , BRKD.AUDT_EMP_ID AS AUDT_EMP_ID           /** Inspecteur != 심사자 =! */
      FROM TB_CARI_CAG_DCSH MNFS, TB_CARI_CAG_DCSH_MDFY MDFY 
              LEFT OUTER JOIN TB_CARI_CAG_DCSH_MDFY_GNRL GNRL ON MDFY.CAG_DCSH_MDFY_RQST_NO = GNRL.CAG_DCSH_MDFY_RQST_NO
              LEFT OUTER JOIN TB_CARI_CAG_DCSH_MDFY_BL BL   ON MDFY.CAG_DCSH_MDFY_RQST_NO = BL.CAG_DCSH_MDFY_RQST_NO  <!-- AND BL.BL_NO = MDFY.BL_NO -->
              LEFT OUTER JOIN TB_CARI_CAG_PRCS_BRKD BRKD  ON BRKD.cag_rqst_no = MDFY.CAG_DCSH_MDFY_RQST_NO AND MDFY.CAG_RQST_TP_CD = BRKD.CAG_RQST_TP_CD
          LEFT OUTER JOIN TB_POTI_ORGN ORGN       ON MDFY.JRSD_ORGN_CD = ORGN.ORGN_CD AND ORGN.DEL_YN = 'N'          
      WHERE  1=1
        AND MNFS.MRN   = MDFY.MRN
--        AND MNFS.NEW_SYS_YN = 'Y'                           /** NEW SYSTEM  O/N !==신규시스템여부==! */
        AND MDFY.DEL_YN = 'N'
--        AND BRKD.IDTN_CN_PRCS_YN = 'Y'
        AND MDFY.MDFY_DGCNT <![CDATA[ > ]]> 0
        
        <if test="mrn != null and mrn != ''">
        AND    UPPER(MDFY.MRN) LIKE UPPER(#{mrn})||'%'              <!-- MRN -->
        </if>
        <if test="blNo != null and blNo != ''">
        AND    UPPER(MDFY.BL_NO) LIKE UPPER(#{blNo})||'%'            <!-- N° de BL !==BL번호==! -->
        </if>
        <if test="cagMgmtNo != null and cagMgmtNo != ''">
        AND    UPPER(BL.CAG_MGMT_NO) LIKE UPPER(#{cagMgmtNo})||'%'          <!-- CRN !== 화물관리번호 ==! -->
        </if>
        <if test="trnpMethNm != null and trnpMethNm != ''">
        AND    UPPER(MNFS.TRNP_METH_NM) LIKE UPPER(#{trnpMethNm})||'%'      <!-- 운송수단명 (선박명 등) -->
        </if>                
        <if test="jrsdOrgnCd != null and jrsdOrgnCd != ''">
        AND    UPPER(MDFY.JRSD_ORGN_CD) LIKE UPPER(#{jrsdOrgnCd})||'%'      <!-- Code d'unité compétente !==관할조직코드==! -->
        </if>
        <if test="trnpRferNo != null and trnpRferNo != ''">
        AND    UPPER(MNFS.TRNP_RFER_NO) LIKE '%'||UPPER(#{trnpRferNo})||'%'    <!-- 운송참고번호 : 항차 등 -->
        </if>
        <if test="cagDcshMdfyTpCd != null and cagDcshMdfyTpCd != ''">
        AND    MDFY.CAG_DCSH_MDFY_TP_CD = #{cagDcshMdfyTpCd}        <!-- 적하목록정정구분코드 -->
        </if>
        AND MDFY.CAG_DCSH_MDFY_TP_CD IN ('20', '21', '22', '30', '31', '32', '50')
        AND  BRKD.PRCS_STTS_CD IN ('D08')          <!-- 처리상태코드 -->
        <if test="cagRqstTpCd != null and cagRqstTpCd != ''">
        AND    MNFS.CAG_RQST_TP_CD = #{cagRqstTpCd}          <!-- Code de type de demande de cargaison !==화물신청구분코드==!  -->
        </if>
            <if test="prcsDttmFrom != null and prcsDttmTo != ''">      <!-- 처리일시 -->
            AND    TO_DATE(TO_CHAR(BRKD.PRCS_DTTM,'DD/MM/YYYY'),'DD/MM/YYYY') <![CDATA[ >= ]]> TO_DATE(#{prcsDttmFrom},'DD/MM/YYYY')
        AND    TO_DATE(TO_CHAR(BRKD.PRCS_DTTM,'DD/MM/YYYY'),'DD/MM/YYYY') <![CDATA[ <= ]]> TO_DATE(#{prcsDttmTo},'DD/MM/YYYY')
        </if>
            <if test="trsnDttmFrom != null and trsnDttmTo != ''">      <!-- 전송일시 -->
            AND    TO_DATE(TO_CHAR(MDFY.TRSN_DTTM,'DD/MM/YYYY'),'DD/MM/YYYY') <![CDATA[ >= ]]> TO_DATE(#{trsnDttmFrom},'DD/MM/YYYY')
        AND    TO_DATE(TO_CHAR(MDFY.TRSN_DTTM,'DD/MM/YYYY'),'DD/MM/YYYY') <![CDATA[ <= ]]> TO_DATE(#{trsnDttmTo},'DD/MM/YYYY')
        </if>
      )
      WHERE 1=1
      <!-- <if test="carrCd != null and carrCd != ''">
      AND    (TRSN_CO_CD LIKE #{carrCd}||'%'  OR CARR_NM  LIKE #{carrCd}||'%')      Code de compagnie de envoyé !== 전송업체코드 ==!
      </if> -->
      ORDER BY sort_trsn_dttm DESC
      <include refid="pagination.footer" />
  </select>
  
  <!--
    Voir les détails de la [  Rectifier la déclaration de cargaison ]  !==화물신고서 정정을 상세 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo">
    /* selectCagDcshMdfy*/
    SELECT
          MNFS.CAG_DCSH_RGSR_MGMT_NO            /** Numéro de gestion de l'enregistrement de la déclaration de fret !== 화물신고서등록관리번호 ==! */
      , Z.CAG_DCSH_MDFY_RQST_MGRN             /** N° de gestion de modificaton de manifeste !==적하목록정정신청관리번호==! */
      , Z.CAG_DCSH_MDFY_RQST_NO               /** N° de demande de modification de manifeste !==적하목록정정신청번호==! */
      , Z.MRN                                  /** MRN !==MRN==! */
      , Z.MDFY_DGCNT                           /** Nombre de fois de la modification !==정정차수==! */
      , TO_CHAR(Z.TRSN_DTTM,'DD/MM/YYYY') AS TRSN_DTTM  /** Date et heure de envoyé !==전송일시==! */
      , Z.CAG_RQST_TP_CD                       /** Code de type de demande de cargaison !==화물신청구분코드==! */
      , Z.JRSD_ORGN_CD                         /** Code d'unité compétente !==관할조직코드==! */
      , Z.TRSN_CO_CD                           /** Code de compagnie de envoyé !==전송업체코드==! */
      , Z.CAG_DCSH_MDFY_TP_CD                      /** Code de type de modification de manifeste !==적하목록정정구분코드==! */
      , Z.MDFY_RSN_CN                          /** Motif de modification  !==정정사유내용==! */
      , Z.BL_NO                            /** N° de BL !==BL번호==! */
      <!-- , TO_CHAR(BRKD.PRCS_DTTM,'DD/MM/YYYY') AS PRCS_DTTM  /** Date et heure de traitement !==처리일시==! */ -->
      , BRKD.PRCS_STTS_CD                     /** Code de statut de traitement !==처리상태코드==! */
      , Z.APRE_YN_CD                         /** Autorisation O/N !==승인여부코드==! */
      , Z.AUDT_OPIN_CN                              /** Contenu de notification !==통보내용==! */
      , Z.DEL_YN                               /** Suppression ON !==삭제여부==! */
      , Z.FRST_REGST_ID                        /** ID du premier enregistrant  !==최초등록자ID==! */
      , TO_CHAR(Z.FRST_RGSR_DTTM,'DD/MM/YYYY HH24:MI:SS') AS FRST_RGSR_DTTM  /** Date et heure de premier enregistrement !==최초등록일시==! */
      , Z.LAST_CHPR_ID                         /** ID du modificateur final !==최종변경자ID==! */
      , TO_CHAR(Z.LAST_CHG_DTTM,'DD/MM/YYYY HH24:MI:SS') AS LAST_CHG_DTTM  /** Date et heure de modification finale !==최종변경일시==! */
      , BRKD.RQST_DGCNT
      , TO_CHAR(BRKD.PRCS_DTTM,'DD/MM/YYYY HH24:MI:SS') AS PRCS_DTTM  
      , (select cag_mgmt_no from tb_cari_cag_dcsh_mdfy_bl x where x.cag_dcsh_mdfy_rqst_no = z.cag_dcsh_mdfy_rqst_no and x.del_yn = 'N') as cag_mgmt_no
      , (select cag_mgmt_no from tb_cari_cag_dcsh_bl x where x.mrn = mnfs.mrn and substr(x.cag_mgmt_no,1,20) = substr(BL.cag_mgmt_no,1,20) and x.bl_pt_cd = 'M' and x.del_yn = 'N') as cag_mgmt_no_mbl
      , BRKD.AUDT_EMP_ID
      , mnfs.trnp_mean_cd
      , mnfs.cag_rqst_tp_cd
     FROM TB_CARI_CAG_DCSH MNFS
   INNER JOIN TB_CARI_CAG_DCSH_MDFY Z
           ON MNFS.MRN = Z.MRN
          AND Z.DEL_YN = 'N'
          <if test="cagDcshMdfyRqstMgrn != null and cagDcshMdfyRqstMgrn != ''">
      AND Z.CAG_DCSH_MDFY_RQST_MGRN = #{cagDcshMdfyRqstMgrn}     /** N° de gestion de modificaton de manifeste !==적하목록정정신청관리번호==! */
      </if>
      <if test="cagDcshMdfyRqstMgrn == null or cagDcshMdfyRqstMgrn == ''">
      AND Z.CAG_DCSH_MDFY_RQST_NO = #{cagDcshMdfyRqstNo}     /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */
      </if>  
   LEFT OUTER JOIN TB_CARI_CAG_PRCS_BRKD BRKD 
           ON Z.CAG_DCSH_MDFY_RQST_NO = BRKD.cag_rqst_no 
          AND Z.CAG_RQST_TP_CD = BRKD.CAG_RQST_TP_CD
        AND BRKD.CAG_RQST_TP_CD = #{cagRqstTpCd}
   LEFT OUTER JOIN TB_CARI_CAG_DCSH_MDFY_BL BL 
           ON Z.CAG_DCSH_MDFY_RQST_NO = BL.CAG_DCSH_MDFY_RQST_NO
          AND BL.DEL_YN = 'N'        
         WHERE 1=1
      AND MNFS.DEL_YN = 'N'
  </select>

  <!--
    Voir les détails de la [  Rectifier la déclaration de cargaison ]  !==화물신고서 정정을 상세 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyMstBefore" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo">
    /* selectCagDcshMdfyMstBefore */
    SELECT 
      CAG_DCSH_MDFY_RQST_MGRN, CAG_DCSH_MDFY_RQST_NO, MRN, MDFY_DGCNT, CAG_RQST_TP_CD
      , TRSN_DTTM, TRSN_CO_CD, TRSN_CO_NM, JRSD_CSTM_CD, JRSD_ORGN_CD, JRSD_ORGN_NM, CAG_DCSH_MDFY_TP_CD, MDFY_RSN_CN
      , BL_NO,    PRCS_DTTM
      , PRCS_STTS_CD, APRE_YN_CD, AUDT_OPIN_CN, AL_BL_GCNT, AL_PCKG_GCNT, AL_TTWG
      , AL_CNTR_GCNT, AL_VHCL_GCNT, TRNP_MEAN_CD, TRNP_METH_NM, TRNP_METH_IDFY_NO
      , TRNP_RFER_NO, TRNP_METH_RGSR_DT, DPTR_DTTM, ARVL_DTTM
      , REAL_ARVL_DTTM, LAST_LDUN_DT, DPTR_PORT_CD, DPTR_PORT_NM, LDUN_PORT_CD, LDUN_PORT_NM, LAST_THRG_PORT_CD, LAST_THRG_PORT_NM
      , TRNP_METH_LOCT_NM, TRNP_METH_NAT_CD, TRNP_METH_NAT_NM, SHIP_TTN, SHIP_NTTN, LTSP_YN
      , CARR_CD, CARR_ADDR_NM, DRVR_NM
      , DEL_YN, FRST_REGST_ID, FRST_RGSR_DTTM, LAST_CHPR_ID, LAST_CHG_DTTM
      , AL_NTWG, atch_file_id_old, imo_no
    FROM (
      SELECT
          A.CAG_DCSH_MDFY_RQST_MGRN                         /** N° de gestion de modificaton de manifeste !==적하목록정정신청관리번호 ==! */
          , A.CAG_DCSH_MDFY_RQST_NO                    /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */
          , A.MRN                                  /** MRN !== MRN ==! */
          , A.MDFY_DGCNT                           /** Nombre de fois de la modification !== 정정차수 ==! */
          , A.CAG_RQST_TP_CD                       /** Code de type de demande de cargaison !== 화물신청구분코드 ==! */
          , TO_CHAR(A.TRSN_DTTM,'DD/MM/YYYY HH24:MI:SS') AS TRSN_DTTM  /** Date et heure de envoyé !== 전송일시 ==! */
          , A.TRSN_CO_CD                           /** Code de compagnie de envoyé !== 전송업체코드 ==! */
          , FN_CARI_GET_CO_NM(A.TRSN_CO_CD) AS TRSN_CO_NM  /** Nom de compagnie de envoyé !==전송업체명==! */
          , C.JRSD_CSTM_CD                       /** Code d'unité compétente !==관할조직코드==! */
          , A.JRSD_ORGN_CD                       /** Code d'unité compétente !==관할조직코드==! */
          , (SELECT ORGN_NM FROM TB_POTI_ORGN WHERE ORGN_CD = A.JRSD_ORGN_CD AND DEL_YN = 'N' AND ROWNUM = 1) AS JRSD_ORGN_NM  /** Nom de l'unité compétente !==관할조직명==! */
          , A.CAG_DCSH_MDFY_TP_CD                      /** Code de type de modification de manifeste !== 적하목록정정구분코드 ==! */
          , A.MDFY_RSN_CN                          /** Motif de modification  !== 정정사유내용 ==! */
          , A.BL_NO                            /** N° de BL !==BL번호==! */
          , TO_CHAR(BRKD.PRCS_DTTM,'DD/MM/YYYY HH24:MI:SS') AS PRCS_DTTM  /** Date et heure de traitement !== 처리일시 ==! */
          , BRKD.PRCS_STTS_CD                         /** Code de statut de traitement !== 처리상태코드 ==! */
          , A.APRE_YN_CD                         /** Autorisation O/N !==승인여부코드==! */
          , A.AUDT_OPIN_CN                              /** Contenu de notification !== 통보내용 ==! */
          , B.AL_BL_GCNT                           /** Nombre total de B/L !== 전체BL개수 ==! */
          , B.AL_PCKG_GCNT                         /** Nombre total de colis  !== 전체포장개수 ==! */
          , B.AL_TTWG                              /** Poids brut total !== 전체총중량 ==! */
          , B.AL_CNTR_GCNT                         /** Nombre total de conteneurs   !== 전체컨테이너개수 ==! */
          , B.AL_VHCL_GCNT                         /** Nombre total de véhicules   !== 전체차량개수 ==! */
          , B.TRNP_MEAN_CD                         /** Code de type de transport !== 운송방법코드 ==! */
          , B.TRNP_METH_NM                         /** Nom de moyen de transport !== 운송수단명 ==! */
          , B.TRNP_METH_IDFY_NO                    /** Signal d'appel de moyen de transport pour transbordement !== 운송수단식별번호 ==! */
          , B.TRNP_RFER_NO                         /** N° de voyage/N° de vol/N° d'itinéraire !== 운송참고번호 ==! */
          , TO_CHAR(TO_DATE(B.TRNP_METH_RGSR_DT,'YYYYMMDD'),'DD/MM/YYYY') AS TRNP_METH_RGSR_DT /** Date d'enregistrement de moyen de transport !== 운송수단등록일자 ==! */
          , TO_CHAR(B.DPTR_DTTM, 'DD/MM/YYYY HH24:MI') AS DPTR_DTTM  /** Date et heure de depart !==출발일시==! */
          , TO_CHAR(B.ARVL_DTTM, 'DD/MM/YYYY HH24:MI') AS ARVL_DTTM  /** Date et heure d'arrivee !==도착일시==! */
          , TO_CHAR(B.REAL_ARVL_DTTM,'DD/MM/YYYY HH24:MI') AS REAL_ARVL_DTTM  /** Date et heure d'arrivée effective !== 실제도착일시 ==! */
          , B.LAST_LDUN_DT                         /** Date de déchargement définitif !== 최종하역일자 ==! */
          , B.DPTR_PORT_CD                         /** Code de port de départ !== 출발항구코드 ==! */
          , FN_CARI_GET_PORT_AIRPT_CITY_CD_NM(B.DPTR_PORT_CD, #{langCd}) AS DPTR_PORT_NM   /** Nom de port de départ !==출발항구명==! */
          , B.LDUN_PORT_CD                         /** Code de port de dechargement !== 하역항구코드 ==! */
          , FN_CARI_GET_PORT_AIRPT_CITY_CD_NM(B.LDUN_PORT_CD, #{langCd}) AS LDUN_PORT_NM   /** Nom de port de dechargement !==하역항구명==! */
          , B.LAST_THRG_PORT_CD                    /** Code du dernier port d'escale !== 최종경유항구코드 ==! */
          , FN_CARI_GET_PORT_AIRPT_CITY_CD_NM(B.LAST_THRG_PORT_CD, #{langCd}) AS LAST_THRG_PORT_NM   /** Nom du dernier port d'escale !==최종경유항구명==! */
          , B.TRNP_METH_LOCT_NM                    /** Emplacement de moyen de transport !== 운송수단위치명 ==! */
          , B.TRNP_METH_NAT_CD                     /** Code de pays du moyen de transport !== 운송수단국적코드 ==! */
          , FN_GET_CNTY_NM(B.TRNP_METH_NAT_CD, #{langCd}) AS TRNP_METH_NAT_NM    /** Nom de pays du moyen de transport !==운송수단국적명==! */
          , B.SHIP_TTN                             /** Tonnage brut du navire !== 선박총톤수 ==! */
          , B.SHIP_NTTN                            /** Tonnage net du navire !== 선박순톤수 ==! */
          , B.LTSP_YN                              /** NIL !== 공선여부 ==! */
          , B.CARR_CD                              /** Code de société de transport !== 운송사코드 ==! */
          , B.CARR_ADDR_NM                         /** Adresse de société de transport !== 운송사주소명 ==! */
          , B.DRVR_NM                              /** Nom de transporteur !== 운전자명 ==! */
          , A.DEL_YN                               /** Suppression O/N !== 삭제여부 ==! */
          , A.FRST_REGST_ID                        /** Identifiant du premier enregistrant  !== 최초등록자ID ==! */
          , TO_CHAR(A.FRST_RGSR_DTTM,'DD/MM/YYYY HH24:MI:SS') AS FRST_RGSR_DTTM  /** Date et heure de premier enregistrement !== 최초등록일시 ==! */
          , A.LAST_CHPR_ID                         /** Identifiant du modificateur final !== 최종변경자ID ==! */
          , TO_CHAR(A.LAST_CHG_DTTM,'DD/MM/YYYY HH24:MI:SS') AS LAST_CHG_DTTM  /** Date et heure de modification finale !== 최종변경일시 ==! */
          , B.AL_NTWG                              /** Poids Net Total !== 전체순중량 ==! */
          , b.atch_file_id as atch_file_id_old
          , b.imo_no
        FROM TB_CARI_CAG_DCSH_MDFY A 
          LEFT OUTER JOIN TB_CARI_CAG_DCSH_MDFY_GNRL B ON A.CAG_DCSH_MDFY_RQST_NO = B.CAG_DCSH_MDFY_RQST_NO
          LEFT OUTER JOIN TB_CARI_CAG_PRCS_BRKD BRKD ON A.CAG_DCSH_MDFY_RQST_NO = BRKD.cag_rqst_no
              AND BRKD.CAG_RQST_TP_CD = #{cagRqstTpCd}
            LEFT OUTER JOIN ( SELECT C1.ORGN_CD
                                 , C2.ORGN_CD JRSD_CSTM_CD
                              FROM TB_POTI_ORGN C1
                              LEFT JOIN  TB_POTI_ORGN C2
                                ON C1.UPR_ORGN_MGMT_CD = C2.ORGN_MGMT_CD
                             WHERE C1.DEL_YN = 'N'
                          ) C
                       ON A.JRSD_ORGN_CD = C.ORGN_CD
        WHERE
          A.DEL_YN = 'N'
          AND A.CAG_DCSH_MDFY_RQST_NO = #{cagDcshMdfyRqstNo}
      ORDER BY CAG_DCSH_MDFY_RQST_NO DESC
    )
    WHERE ROWNUM = 1

  </select>
  
  <!--
    Voir les détails de la [  Rectifier la déclaration de cargaison ]  !==화물신고서 정정을 상세 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyMstCurrent" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo">
    /* selectCagDcshMdfyMstCurrent */
    SELECT 
      CAG_DCSH_RGSR_MGMT_NO, CAG_DCSH_MDFY_RQST_MGRN, CAG_DCSH_MDFY_RQST_NO, MRN, CAG_RQST_TP_CD
      , TRSN_DTTM, TRSN_CO_CD, TRSN_CO_NM, JRSD_ORGN_CD, JRSD_ORGN_NM, CAG_DCSH_MDFY_TP_CD, MDFY_RSN_CN
      , BL_NO,    PRCS_DTTM
      , PRCS_STTS_CD, APRE_YN_CD, AUDT_OPIN_CN, AL_BL_GCNT, AL_PCKG_GCNT, AL_TTWG
      , AL_CNTR_GCNT, AL_VHCL_GCNT, TRNP_MEAN_CD, TRNP_METH_NM, TRNP_METH_IDFY_NO
      , TRNP_RFER_NO, TRNP_METH_RGSR_DT, DPTR_DTTM, ARVL_DTTM
      , REAL_ARVL_DTTM, LAST_LDUN_DT, DPTR_PORT_CD, DPTR_PORT_NM, LDUN_PORT_CD, LDUN_PORT_NM, LAST_THRG_PORT_CD, LAST_THRG_PORT_NM
      , TRNP_METH_LOCT_NM, TRNP_METH_NAT_CD, TRNP_METH_NAT_NM, SHIP_TTN, SHIP_NTTN, LTSP_YN
--       , COAT_TRNP_YN
         , CARR_CD
         , CARR_ADDR_NM
--          , DRVR_NM
--          , DRVR_ADIT_INFO_CN
      , DEL_YN, FRST_REGST_ID, FRST_RGSR_DTTM, LAST_CHPR_ID, LAST_CHG_DTTM
    FROM (
      SELECT
            MNFS.CAG_DCSH_RGSR_MGMT_NO                      /** N° de gestion d'enregistrement de manifeste !==적하목록등록관리번호==! */
          , '' AS CAG_DCSH_MDFY_RQST_MGRN              /** N° de gestion de modificaton de manifeste !==적하목록정정신청관리번호 ==! */
          , '' AS CAG_DCSH_MDFY_RQST_NO                    /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */
          , MNFS.MRN                                  /** MRN !== MRN ==! */
          , MNFS.CAG_RQST_TP_CD                       /** Code de type de demande de cargaison !== 화물신청구분코드 ==! */
          , '' AS TRSN_DTTM  /** Date et heure de envoye !== 전송일시 ==! */
          , MNFS.TRSN_CO_CD                           /** Code de compagnie de envoye !== 전송업체코드 ==! */
          , FN_CARI_GET_CO_NM(MNFS.TRSN_CO_CD) AS TRSN_CO_NM  /** Nom de compagnie de envoyé !==전송업체명==! */
          , MNFS.JRSD_ORGN_CD                       /** Code d'unite competente !==관할조직코드==! */
          , (SELECT ORGN_NM FROM TB_POTI_ORGN WHERE ORGN_CD = MNFS.JRSD_ORGN_CD AND DEL_YN = 'N' AND ROWNUM = 1) AS JRSD_ORGN_NM  /** Nom de l'unité compétente !==관할조직명==! */
          , '' AS CAG_DCSH_MDFY_TP_CD                      /** Code de type de modification de manifeste !== 적하목록정정구분코드 ==! */
          , '' AS MDFY_RSN_CN                          /** Motif de modification  !== 정정사유내용 ==! */
          , '' AS BL_NO                            /** N° de BL !==BL번호==! */
          , '' AS PRCS_DTTM  /** Date et heure de traitement !== 처리일시 ==! */
          , '' AS PRCS_STTS_CD                         /** Code de statut de traitement !== 처리상태코드 ==! */
          , '' AS APRE_YN_CD                         /** Autorisation O/N !==승인여부코드==! */
          , '' AS AUDT_OPIN_CN                              /** Contenu de notification !== 통보내용 ==! */
          
          
          , MNFS.AL_BL_GCNT                           /** Nombre total de B/L !== 전체BL개수 ==! */
          , MNFS.AL_PCKG_GCNT                         /** Nombre total de colis  !== 전체포장개수 ==! */
          , MNFS.AL_TTWG                              /** Poids brut total !== 전체총중량 ==! */
          , MNFS.AL_CNTR_GCNT                         /** Nombre total de conteneurs   !== 전체컨테이너개수 ==! */
          , MNFS.AL_VHCL_GCNT                         /** Nombre total de vehicules   !== 전체차량개수 ==! */
          , MNFS.TRNP_MEAN_CD                         /** Code de type de transport !== 운송방법코드 ==! */
          , MNFS.TRNP_METH_NM                         /** Nom de moyen de transport !== 운송수단명 ==! */
          , MNFS.TRNP_METH_IDFY_NO                    /** Signal d'appel de moyen de transport pour transbordement !== 운송수단식별번호 ==! */
          , MNFS.TRNP_RFER_NO                         /** N° de voyage/N° de vol/N° d'itineraire !== 운송참고번호 ==! */
          , TO_CHAR(TO_DATE(MNFS.TRNP_METH_RGSR_DT,'YYYYMMDD'),'DD/MM/YYYY') AS TRNP_METH_RGSR_DT /** Date d'enregistrement de moyen de transport !== 운송수단등록일자 ==! */
          , TO_CHAR(MNFS.DPTR_DTTM, 'DD/MM/YYYY HH24:MI') AS DPTR_DTTM  /** Date et heure de depart !==출발일시==! */
          , TO_CHAR(MNFS.ARVL_DTTM, 'DD/MM/YYYY HH24:MI') AS ARVL_DTTM  /** Date et heure d'arrivee !==도착일시==! */
          , TO_CHAR(MNFS.REAL_ARVL_DTTM, 'DD/MM/YYYY HH24:MI') AS REAL_ARVL_DTTM  /** Date et heure d'arrivee effective !== 실제도착일시 ==! */
          , MNFS.LAST_LDUN_DT                         /** Date de dechargement definitif !== 최종하역일자 ==! */
          , MNFS.DPTR_PORT_CD                         /** Code de port de depart !== 출발항구코드 ==! */
          , FN_CARI_GET_PORT_AIRPT_CITY_CD_NM(MNFS.DPTR_PORT_CD, #{langCd}) AS DPTR_PORT_NM   /** Nom de port de départ !==출발항구명==! */
          , MNFS.LDUN_PORT_CD                         /** Code de port de dechargement !== 하역항구코드 ==! */
          , FN_CARI_GET_PORT_AIRPT_CITY_CD_NM(MNFS.LDUN_PORT_CD, #{langCd}) AS LDUN_PORT_NM   /** Nom de port de dechargement !==하역항구명==! */
          , MNFS.LAST_THRG_PORT_CD                    /** Code du dernier port d'escale !== 최종경유항구코드 ==! */
          , FN_CARI_GET_PORT_AIRPT_CITY_CD_NM(MNFS.LAST_THRG_PORT_CD, #{langCd}) AS LAST_THRG_PORT_NM   /** Nom du dernier port d'escale !==최종경유항구명==! */
          , MNFS.TRNP_METH_LOCT_NM                    /** Emplacement de moyen de transport !== 운송수단위치명 ==! */
          , MNFS.TRNP_METH_NAT_CD                     /** Code de pays du moyen de transport !== 운송수단국적코드 ==! */
          , FN_GET_CNTY_NM(MNFS.TRNP_METH_NAT_CD, #{langCd}) AS TRNP_METH_NAT_NM    /** Nom de pays du moyen de transport !==운송수단국적명==! */
          , MNFS.SHIP_TTN                             /** Tonnage brut du navire !== 선박총톤수 ==! */
          , MNFS.SHIP_NTTN                            /** Tonnage net du navire !== 선박순톤수 ==! */
          , MNFS.LTSP_YN                              /** NIL !== 공선여부 ==! */
--           , MNFS.COAT_TRNP_YN                         /** Cabotage O/N !== 연안운송여부 ==! */
          , MNFS.CARR_CD                              /** Code de societe de transport !== 운송사코드 ==! */
          , MNFS.CARR_ADDR_NM                         /** Adresse de societe de transport !== 운송사주소명 ==! */
--           , MNFS.DRVR_NM                              /** Nom de transporteur !== 운전자명 ==! */
--           , MNFS.DRVR_ADIT_INFO_CN                    /** Info supplementaire de transporteur !== 운전자추가정보내용 ==! */
          
          
          
          , MNFS.DEL_YN                               /** Suppression O/N !== 삭제여부 ==! */
          , MNFS.FRST_REGST_ID                        /** Identifiant du premier enregistrant  !== 최초등록자ID ==! */
          , TO_CHAR(MNFS.FRST_RGSR_DTTM,'DD/MM/YYYY HH24:MI:SS') AS FRST_RGSR_DTTM  /** Date et heure de premier enregistrement !== 최초등록일시 ==! */
          , MNFS.LAST_CHPR_ID                         /** Identifiant du modificateur final !== 최종변경자ID ==! */
          , TO_CHAR(MNFS.LAST_CHG_DTTM,'DD/MM/YYYY HH24:MI:SS') AS LAST_CHG_DTTM  /** Date et heure de modification finale !== 최종변경일시 ==! */
        FROM TB_CARI_CAG_DCSH MNFS 
        WHERE
          MNFS.DEL_YN = 'N'
          AND MNFS.MRN IS NOT NULL
          AND MNFS.MRN = #{mrn}
      
    )
    WHERE ROWNUM = 1

  </select>

  <!--
    Voir les détails de la [  Rectifier la déclaration de cargaison ]  !==화물신고서 정정을 상세 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyMstAfter" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo">
    /* selectCagDcshMdfyMstAfter */
      SELECT
          A.CAG_DCSH_MDFY_RQST_MGRN                         /** N° de gestion de modificaton de manifeste !==적하목록정정신청관리번호 ==! */
          , A.CAG_DCSH_MDFY_RQST_NO                    /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */
          , A.MRN                                  /** MRN !== MRN ==! */
          , A.MDFY_DGCNT                           /** Nombre de fois de la modification !== 정정차수 ==! */
          , A.CAG_RQST_TP_CD                       /** Code de type de demande de cargaison !== 화물신청구분코드 ==! */
          , TO_CHAR(A.TRSN_DTTM,'DD/MM/YYYY') AS TRSN_DTTM  /** Date et heure de envoyé !== 전송일시 ==! */
          , A.TRSN_CO_CD                           /** Code de compagnie de envoyé !== 전송업체코드 ==! */
          , FN_CARI_GET_CO_NM(A.TRSN_CO_CD) AS TRSN_CO_NM  /** Nom de compagnie de envoyé !==전송업체명==! */
          , D.JRSD_CSTM_CD                         /** Code d'unite competente !==관할조직코드==! */
          , A.JRSD_ORGN_CD                         /** Code d'unite competente !==관할조직코드==! */
          , (SELECT ORGN_NM FROM TB_POTI_ORGN WHERE ORGN_CD = A.JRSD_ORGN_CD AND DEL_YN = 'N' AND ROWNUM = 1) AS JRSD_ORGN_NM  /** Nom de l'unité compétente !==관할조직명==! */
          , A.CAG_DCSH_MDFY_TP_CD                      /** Code de type de modification de manifeste !== 적하목록정정구분코드 ==! */
          , A.MDFY_RSN_CN                          /** Motif de modification  !== 정정사유내용 ==! */
          , A.BL_NO                            /** N° de BL !==BL번호==! */
          , TO_CHAR(BRKD.PRCS_DTTM,'DD/MM/YYYY HH24:MI:SS') AS PRCS_DTTM  /** Date et heure de traitement !== 처리일시 ==! */
          , BRKD.PRCS_STTS_CD                         /** Code de statut de traitement !== 처리상태코드 ==! */
          , A.APRE_YN_CD                         /** Autorisation O/N !==승인여부코드==! */
          , A.AUDT_OPIN_CN                              /** Contenu de notification !== 통보내용 ==! */
          , B.AL_BL_GCNT                           /** Nombre total de B/L !== 전체BL개수 ==! */
          , B.AL_PCKG_GCNT                         /** Nombre total de colis  !== 전체포장개수 ==! */
          , B.AL_TTWG                              /** Poids brut total !== 전체총중량 ==! */
          , B.AL_CNTR_GCNT                         /** Nombre total de conteneurs   !== 전체컨테이너개수 ==! */
          , B.AL_VHCL_GCNT                         /** Nombre total de véhicules   !== 전체차량개수 ==! */
          , B.TRNP_MEAN_CD                         /** Code de type de transport !== 운송방법코드 ==! */
          , B.TRNP_METH_NM                         /** Nom de moyen de transport !== 운송수단명 ==! */
          , B.TRNP_METH_IDFY_NO                    /** Signal d'appel de moyen de transport pour transbordement !== 운송수단식별번호 ==! */
          , B.TRNP_RFER_NO                         /** N° de voyage/N° de vol/N° d'itinéraire !== 운송참고번호 ==! */
          , TO_CHAR(TO_DATE(B.TRNP_METH_RGSR_DT,'YYYYMMDD'),'DD/MM/YYYY') AS TRNP_METH_RGSR_DT    /** Date d'enregistrement de moyen de transport !== 운송수단등록일자 ==! */
          , TO_CHAR(B.DPTR_DTTM, 'DD/MM/YYYY HH24:MI') AS DPTR_DTTM  /** Date et heure de depart !==출발일시==! */
          , TO_CHAR(B.ARVL_DTTM, 'DD/MM/YYYY HH24:MI') AS ARVL_DTTM  /** Date et heure d'arrivee !==도착일시==! */
          , TO_CHAR(B.REAL_ARVL_DTTM, 'DD/MM/YYYY HH24:MI') AS REAL_ARVL_DTTM  /** Date et heure d'arrivée effective !== 실제도착일시 ==! */
          , B.LAST_LDUN_DT                         /** Date de déchargement définitif !== 최종하역일자 ==! */
          , B.DPTR_PORT_CD                         /** Code de port de depart !==출발항구코드==! */
          , FN_CARI_GET_PORT_AIRPT_CITY_CD_NM(B.DPTR_PORT_CD, #{langCd}) AS DPTR_PORT_NM   /** Nom de port de départ !==출발항구명==! */
          , B.LDUN_PORT_CD                         /** Code de port de dechargement !== 하역항구코드 ==! */
          , FN_CARI_GET_PORT_AIRPT_CITY_CD_NM(B.LDUN_PORT_CD, #{langCd}) AS LDUN_PORT_NM   /** Nom de port de dechargement !==하역항구명==! */
          , B.LAST_THRG_PORT_CD                    /** Code du dernier port d'escale !== 최종경유항구코드 ==! */
          , FN_CARI_GET_PORT_AIRPT_CITY_CD_NM(B.LAST_THRG_PORT_CD, #{langCd}) AS LAST_THRG_PORT_NM   /** Nom du dernier port d'escale !==최종경유항구명==! */
          , B.TRNP_METH_LOCT_NM                    /** Emplacement de moyen de transport !== 운송수단위치명 ==! */
          , B.TRNP_METH_NAT_CD                     /** Code de pays du moyen de transport !== 운송수단국적코드 ==! */
          , FN_GET_CNTY_NM(B.TRNP_METH_NAT_CD, #{langCd}) AS TRNP_METH_NAT_NM    /** Nom de pays du moyen de transport !==운송수단국적명==! */
          , B.SHIP_TTN                             /** Tonnage brut du navire !== 선박총톤수 ==! */
          , B.SHIP_NTTN                            /** Tonnage net du navire !== 선박순톤수 ==! */
          , B.LTSP_YN                              /** NIL !== 공선여부 ==! */
--           , B.COAT_TRNP_YN                         /** Cabotage O/N !== 연안운송여부 ==! */
          , C.CARR_CD                              /** Code de société de transport !== 운송사코드 ==! */
          , B.CARR_ADDR_NM                         /** Adresse de société de transport !== 운송사주소명 ==! */
          , B.DRVR_NM                              /** Nom de transporteur !== 운전자명 ==! */
--           , B.DRVR_ADIT_INFO_CN                    /** Info supplémentaire de transporteur !== 운전자추가정보내용 ==! */
          , BL.CAG_MGMT_NO
          , BL.BL_SRNO                            /** N° de sequence de BL !==BL일련번호==! */
          , A.DEL_YN                               /** Suppression O/N !== 삭제여부 ==! */
          , A.FRST_REGST_ID                        /** Identifiant du premier enregistrant  !== 최초등록자ID ==! */
          , TO_CHAR(A.FRST_RGSR_DTTM,'DD/MM/YYYY HH24:MI:SS') AS FRST_RGSR_DTTM  /** Date et heure de premier enregistrement !== 최초등록일시 ==! */
          , A.LAST_CHPR_ID                         /** Identifiant du modificateur final !== 최종변경자ID ==! */
          , TO_CHAR(A.LAST_CHG_DTTM,'DD/MM/YYYY HH24:MI:SS') AS LAST_CHG_DTTM  /** Date et heure de modification finale !== 최종변경일시 ==! */
          , B.AL_NTWG                              /** Poids Net Total !== 전체순중량 ==! */
                , A.ATCH_FILE_ID as atch_file_id_mdfy_rsn
                , B.ATCH_FILE_ID as atch_file_id
                , BL.CAG_MGMT_NO                          /** CRN !== 화물관리번호 ==! */
                , B.IMO_NO 
        FROM TB_CARI_CAG_DCSH_MDFY A 
          LEFT OUTER JOIN TB_CARI_CAG_DCSH_MDFY_GNRL B ON A.CAG_DCSH_MDFY_RQST_NO = B.CAG_DCSH_MDFY_RQST_NO
          LEFT OUTER JOIN TB_CARI_CAG_DCSH_MDFY_BL BL ON A.CAG_DCSH_MDFY_RQST_NO = BL.CAG_DCSH_MDFY_RQST_NO <!-- AND A.BL_NO = BL.BL_NO -->
          LEFT OUTER JOIN TB_CARI_CAG_PRCS_BRKD BRKD ON A.CAG_DCSH_MDFY_RQST_NO = BRKD.cag_rqst_no
          LEFT OUTER JOIN TB_CARI_CAG_DCSH c ON A.MRN = c.MRN
              AND BRKD.CAG_RQST_TP_CD = #{cagRqstTpCd}
          LEFT OUTER JOIN ( SELECT C1.ORGN_CD
                                 , C2.ORGN_CD JRSD_CSTM_CD
                              FROM TB_POTI_ORGN C1
                              LEFT JOIN  TB_POTI_ORGN C2
                                ON C1.UPR_ORGN_MGMT_CD = C2.ORGN_MGMT_CD
                             WHERE C1.DEL_YN = 'N'
                          ) D
                       ON A.JRSD_ORGN_CD = D.ORGN_CD    
        WHERE
          A.DEL_YN = 'N'
          AND A.CAG_RQST_TP_CD = #{cagRqstTpCd}
          <if test="mdfyDgcnt != null and mdfyDgcnt != -1">
          <!-- AND A.MDFY_DGCNT = #{mdfyDgcnt}  키로 조회 하므로, 정정차수를 넣는 의미가 없음 -->
          </if>
          AND A.CAG_DCSH_MDFY_RQST_NO = #{cagDcshMdfyRqstNo}
      ORDER BY CAG_DCSH_MDFY_RQST_NO DESC

  </select>
  
  <!--
    Voir les détails de la [  Rectifier la déclaration de cargaison ]  !==화물신고서 정정을 상세 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyGnrl" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo">
    /* selectCagDcshMdfyGnrl*/
    SELECT
      CAG_DCSH_MDFY_RQST_NO                      /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */
      , MRN                                  /** MRN !==MRN==! */
      , AL_BL_GCNT                           /** Nombre total de BL !==전체BL개수==! */
      , AL_PCKG_GCNT                         /** Nombre total de colis  !==전체포장개수==! */
      , AL_TTWG                              /** Poids brut total !==전체총중량==! */
      , AL_CNTR_GCNT                         /** Nombre total de conteneurs   !==전체컨테이너개수==! */
      , AL_VHCL_GCNT                         /** Nombre total de véhicules   !==전체차량개수==! */
      , TRNP_MEAN_CD                         /** Code de type de transport !==운송방법코드==! */
      , TRNP_METH_NM                         /** Nom de moyen de transport !==운송수단명==! */
      , TRNP_METH_IDFY_NO                    /** N° d'identification du moyen de transport !==운송수단식별번호==! */
      , TRNP_RFER_NO                         /** N° de voyageN° de volN° d'itinéraire !==운송참고번호==! */
      , TO_CHAR(TO_DATE(TRNP_METH_RGSR_DT,'YYYYMMDD'),'DD/MM/YYYY') AS TRNP_METH_RGSR_DT   /** Date d'enregistrement de moyen de transport !==운송수단등록일자==! */
      , TO_CHAR(DPTR_DTTM, 'DD/MM/YYYY HH24:MI') AS DPTR_DTTM  /** Date et heure de depart !==출발일시==! */
      , TO_CHAR(ARVL_DTTM, 'DD/MM/YYYY HH24:MI') AS ARVL_DTTM  /** Date et heure d'arrivee !==도착일시==! */
      , TO_CHAR(REAL_ARVL_DTTM,'DD/MM/YYYY HH24:MI') AS REAL_ARVL_DTTM  /** Date et heure d'arrivée effective !==실제도착일시==! */
      , LAST_LDUN_DT                         /** Date de déchargement définitif !==최종하역일자==! */
      , DPTR_PORT_CD                         /** Code de port de départ !==출발항구코드==! */
      , LDUN_PORT_CD                         /** Code de port de déchargement !==하역항구코드==! */
      , LAST_THRG_PORT_CD                    /** Code du dernier port d'escale !==최종경유항구코드==! */
      , TRNP_METH_LOCT_NM                    /** Emplacement de moyen de transport !==운송수단위치명==! */
      , TRNP_METH_NAT_CD                     /** Code de pays du moyen de transport !==운송수단국적코드==! */
      , SHIP_TTN                             /** Tonnage brut du navire !==선박총톤수==! */
      , SHIP_NTTN                            /** Tonnage net du navire !==선박순톤수==! */
      , LTSP_YN                              /** NIL !==공선여부==! */
--       , COAT_TRNP_YN                         /** Cabotage ON !==연안운송여부==! */
      , CARR_CD                              /** Code de société de transport !==운송사코드==! */
      , CARR_ADDR_NM                         /** Adresse de société de transport !==운송사주소명==! */
--       , DRVR_NM                              /** Nom de transporteur !==운전자명==! */
--       , DRVR_ADIT_INFO_CN                    /** Info supplémentaire de transporteur !==운전자추가정보내용==! */
      , DEL_YN                               /** Suppression ON !==삭제여부==! */
      , FRST_REGST_ID                        /** ID du premier enregistrant  !==최초등록자ID==! */
      , TO_CHAR(FRST_RGSR_DTTM,'DD/MM/YYYY HH24:MI:SS') AS FRST_RGSR_DTTM  /** Date et heure de premier enregistrement !==최초등록일시==! */
      , LAST_CHPR_ID                         /** ID du modificateur final !==최종변경자ID==! */
      , TO_CHAR(LAST_CHG_DTTM,'DD/MM/YYYY HH24:MI:SS') AS LAST_CHG_DTTM  /** Date et heure de modification finale !==최종변경일시==! */
    FROM TB_CARI_CAG_DCSH_MDFY_GNRL Z
    WHERE 1=1
      AND CAG_DCSH_MDFY_RQST_NO = #{cagDcshMdfyRqstNo}     /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */

  </select>

  <!--
    Voir la liste des la [  déclaration de cargaison (BL) ]  !==화물신고서 (BL) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshBl" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo">
    /* selectCagDcshBl*/
    SELECT CAG_DCSH_RGSR_MGMT_NO AS CAG_DCSH_MDFY_RQST_NO                      /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */
         , MNFS.MRN
         , CAG_MGMT_NO                          /** CRN !==화물관리번호==! */
         , MSN                                  /** MSN !==MSN==! */
         , HSN                                  /** HSN !==HSN==! */
         , BL_NO                                /** N° de BL !==BL번호==! */
         , HBL_NO                               /** N° de sous BL !==HBL번호==! */
         , CAG_TP_CD                            /** Nature de type de cargaison !==화물구분코드==! */
         , BL_TP_CD                             /** Type de BL !==BL구분코드==! */
         , BL_PT_CD                             /** Code de type de BL !==BL유형코드==! */
         , FRWR_CD                              /** Code de groupeur !==포워더코드==! */
         , LOAD_REGN_CD                         /** Code de lieu de chargement !==적재지역코드==! */
         , FN_CARI_GET_PORT_AIRPT_CITY_CD_NM(LOAD_REGN_CD, #{langCd}) AS LOAD_REGN_NM  /** Nom de lieu de chargement !==적재지역명==! */
         , LDUN_REGN_CD                         /** Code de lieu de déchargement !==하역지역코드==! */
         , FN_CARI_GET_PORT_AIRPT_CITY_CD_NM(LDUN_REGN_CD, #{langCd}) AS LDUN_REGN_NM  /** Nom de lieu de déchargement !==하역지역명==! */
         , STVD_CD                              /** Code de stevedoremanutentionnaire !==하역업자코드==! */
         , FN_CARI_GET_CO_NM(STVD_CD) AS STVD_NM    /** Nom de stevedoremanutentionnaire !==하역업자명==! */
         , TRNH_REGN_CD                         /** Code de région de transbordement !==환적지역코드==! */
         , FN_CARI_GET_PORT_AIRPT_CITY_CD_NM(TRNH_REGN_CD, #{langCd}) AS TRNH_REGN_NM  /** Nom de région de transbordement !==환적지역명==! */
         , CAG_CHRC_CD                          /** Nature de cargaison !==화물특성코드==! */
         , PDLS_NM                              /** Nom de l'article !==품목명==! */
         , PCKG_GCNT                            /** Nombre de colis !==포장개수==! */
         , ECNTR_WGHT                           /** Tare de conteneur(s) à vide !==공컨테이너중량==! */
         , TTWG                                 /** Poids brut !==총중량==! */
         , NTWG                                 /** Poids net !==순중량==! */
         , CBM_VOL                              /** Volume (MTQ) !==입방미터용적==! */
         , LIR_VOL                              /** Volume (Litre) !==리터용적==! */
         , HDCB_TP_CD                           /** Code de type de hydrocarbon !==탄화수소구분코드==! */
         , SHMR_CN                              /** Marque de colis !==화인내용==! */
         , ADD_INFO_CN                          /** Info supplémentaire  !==부가정보내용==! */
         , CNTR_GCNT                            /** Nombre de conteneurs !==컨테이너개수==! */
         , VHCL_GCNT                            /** Nombre de véhicules !==차량개수==! */
         , PRPM_DFPM_CACH_TP_CD                 /** Ind. fret prépayédû !==선불후불운임구분코드==! */
         , EXPPN_NM                             /** Nom de l'exportateur !==수출자명==! */
         , EXPPN_ADDR_NM                        /** Adresse de l'exportateur !==수출자주소명==! */
         , EXPPN_TLPH_NO                        /** Téléphone de l'exportateur !==수출자전화번호==! */
         , EXPPN_EML                            /** Email de l'exportateur !==수출자이메일==! */
         , ABRD_FRWR_NM                         /** Nom de l'expéditeur !==국외포워더명==! */
         , ABRD_FRWR_ADDR_NM                    /** Adresse de l'expéditeur !==국외포워더주소명==! */
         , ABRD_FRWR_TLPH_NO                    /** Téléphone de l'expéditeur !==국외포워더전화번호==! */
         , ABRD_FRWR_EML                        /** Email de l'expéditeur !==국외포워더이메일==! */
         , CNSI_NM                              /** Nom du destinataire !==수하인명==! */
         , CNSI_ADDR_NM                         /** Adresse du destinataire !==수하인주소명==! */
         , CNSI_TLPH_NO                         /** Téléphone du destinataire !==수하인전화번호==! */
         , CNSI_EML                             /** Email du destinataire !==수하인이메일==! */
         , NTPR_NM                              /** Nom de la partie à notifier !==통지처명==! */
         , NTPR_ADDR_NM                         /** Adresse de la partie à notifier !==통지처주소명==! */
         , NTPR_TLPH_NO                         /** Téléphone de la partie à notifier !==통지처전화번호==! */
         , NTPR_EML                             /** Email de la partie à notifier !==통지처이메일==! */
         , Z.DEL_YN                               /** Suppression ON !==삭제여부==! */
         , Z.FRST_REGST_ID                        /** ID du premier enregistrant  !==최초등록자ID==! */
         , TO_CHAR(Z.FRST_RGSR_DTTM,'DD/MM/YYYY HH24:MI:SS') AS FRST_RGSR_DTTM  /** Date et heure de premier enregistrement !==최초등록일시==! */
         , Z.LAST_CHPR_ID                         /** ID du modificateur final !==최종변경자ID==! */
         , TO_CHAR(Z.LAST_CHG_DTTM,'DD/MM/YYYY HH24:MI:SS') AS LAST_CHG_DTTM  /** Date et heure de modification finale !==최종변경일시==! */
      FROM TB_CARI_CAG_DCSH MNFS, TB_CARI_CAG_DCSH_BL Z
     WHERE 1=1
       AND MNFS.DEL_YN='N'
       AND Z.DEL_YN='N'
       AND MNFS.MRN = Z.MRN
       <if test="@alpass.ipt.car.com.util.CarMyBatisUtil@isNotEmpty(mrn)">
       AND MNFS.MRN = #{mrn}
       </if>
       <if test="@alpass.ipt.car.com.util.CarMyBatisUtil@isEmpty(mrn)">
       AND MNFS.CAG_DCSH_RGSR_MGMT_NO = #{cagDcshMdfyRqstNo}     /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */
       </if>
       <if test="@alpass.ipt.car.com.util.CarMyBatisUtil@isNotEmpty(cagMgmtNo)">
       AND Z.CAG_MGMT_NO = #{cagMgmtNo}           /** CRN !==화물관리번호==! */
       </if>
       <if test="@alpass.ipt.car.com.util.CarMyBatisUtil@isNotEmpty(blPtCd)">
       AND Z.BL_PT_CD = #{blPtCd}
       </if>
  </select>

  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (BL) ]  !==화물신고서 정정(BL) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyBl" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo">
    /* selectCagDcshMdfyBl*/
    SELECT Z.bl_srno                                                AS bl_srno             /** N° De Séquence De Bl !== BL일련번호 ==! */
         , Z.cag_dcsh_mdfy_rqst_no                                  AS cag_dcsh_mdfy_rqst_no/** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
         , Z.cag_mgmt_no                                            AS cag_mgmt_no         /** N° Demande De La Création De Crn !== 화물관리번호 ==! */
         , Z.msn                                                    AS msn                 /** Msn !== MSN ==! */
         , Z.hsn                                                    AS hsn                 /** Hsn !== HSN ==! */
         , Z.bl_no                                                  AS bl_no               /** N° De Bl !== BL번호 ==! */
         , Z.hbl_no                                                 AS hbl_no              /** N° de House B/L !== HBL번호 ==! */
         , Z.cag_tp_cd                                              AS cag_tp_cd           /** Type de flux !== 화물구분코드 ==! */
         , Z.bl_tp_cd                                               AS bl_tp_cd            /** Code De Catégorie De B/L !== BL구분코드 ==! */
         , Z.bl_pt_cd                                               AS bl_pt_cd            /** Code De Type De Bl !== BL유형코드 ==! */
         , Z.frwr_cd                                                AS frwr_cd             /** Code De Groupeur !== 포워더코드 ==! */
         , Z.load_regn_cd                                           AS load_regn_cd        /** Code De Lieu De Chargement !== 적재지역코드 ==! */
         , Z.ldun_regn_cd                                           AS ldun_regn_cd        /** Code De Lieu De Déchargement !== 하역지역코드 ==! */
         , Z.ibobz_cd                                               AS ibobz_cd            /** Code de zone sous douane !== 보세구역코드 ==! */
         , ( SELECT IBOBZ_NM
               FROM TB_CARI_IBOBZ
              WHERE DEL_YN = 'N'
                AND IBOBZ_CD = Z.IBOBZ_CD
           )                                                        AS IBOBZ_NM /* Nom de la zone sous douane !== 보세구역명 ==! */
         , Z.stvd_cd                                                AS stvd_cd             /** Code De Stevedoremanutentionnaire !== 하역업자코드 ==! */
         , Z.trnh_regn_cd                                           AS trnh_regn_cd        /** Code De Région De Transbordement !== 환적지역코드 ==! */
         , Z.cag_chrc_cd                                            AS cag_chrc_cd         /** Nature De Cargaison !== 화물특성코드 ==! */
         , Z.cmdt_knd_cd                                            AS cmdt_knd_cd         /** Nature De Marchandise !== 물품종류코드 ==! */
         , Z.pdls_nm                                                AS pdls_nm             /** Nom De L'Article !== 품목명 ==! */
         , Z.cas_no                                                 AS cas_no              /** Numero CAS !== CAS번호 ==! */
         , Z.undg_id                                                 AS undg_id              /** Identifiant UNDG !== UNDGID ==! */
         , Z.hs_cd                                                  AS hs_cd               /** Code Sh !== HS코드 ==! */
         , Z.send_way                                               AS send_way            /** Mode de livraison !== 발송방식 ==! */
         , Z.pckg_gcnt                                              AS pckg_gcnt           /** Nombre De Colis !== 포장개수 ==! */
         , Z.ecntr_wght                                             AS ecntr_wght          /** Tare De Conteneur(S) À Vide !== 공컨테이너중량 ==! */
         , Z.ttwg                                                   AS ttwg                /** Poids Brut !== 총중량 ==! */
         , Z.ntwg                                                   AS ntwg                /** Poids Net !== 순중량 ==! */
         , Z.cbm_vol                                                AS cbm_vol             /** Volume (Mtq) !== 입방미터용적 ==! */
         , Z.lir_vol                                                AS lir_vol             /** Volume (Litre) !== 리터용적 ==! */
         , Z.hdcb_tp_cd                                             AS hdcb_tp_cd          /** Code de type d'hydrocarbure !== 탄화수소구분코드 ==! */
         , Z.shmr_cn                                                AS shmr_cn             /** Marque De Colis !== 화인내용 ==! */
         , Z.add_info_cn                                            AS add_info_cn         /** Info Supplémentaire  !== 부가정보내용 ==! */
         , Z.cntr_gcnt                                              AS cntr_gcnt           /** Nombre De Conteneurs !== 컨테이너개수 ==! */
         , Z.vhcl_gcnt                                              AS vhcl_gcnt           /** Nombre De Véhicules !== 차량개수 ==! */
         , Z.prpm_dfpm_cach_tp_cd                                   AS prpm_dfpm_cach_tp_cd/** Ind. fret prépayé/dû !== 선불후불운임구분코드 ==! */
         , Z.cmdt_amt                                               AS cmdt_amt            /** Valeur de marchandise !== 물품금액 ==! */
         , Z.cmdt_amt_curr_cd                                       AS cmdt_amt_curr_cd    /** Article Montant Code de devise !== 물품금액통화코드 ==! */
         , Z.exppn_txpr_idfy_no                                     AS exppn_txpr_idfy_no  /** NIF de l'exportateur !== 수출자납세자식별번호 ==! */
         , Z.exppn_nm                                               AS exppn_nm            /** Nom De L'Exportateur !== 수출자명 ==! */
         , Z.exppn_addr_nm                                          AS exppn_addr_nm       /** Adresse De L'Exportateur !== 수출자주소명 ==! */
         , Z.exppn_tlph_no                                          AS exppn_tlph_no       /** Téléphone De L'Exportateur !== 수출자전화번호 ==! */
         , Z.exppn_eml                                              AS exppn_eml           /** Email De L'Exportateur !== 수출자이메일 ==! */
         , Z.abrd_frwr_nm                                           AS abrd_frwr_nm        /** Nom De L'Expéditeur !== 국외포워더명 ==! */
         , Z.abrd_frwr_addr_nm                                      AS abrd_frwr_addr_nm   /** Adresse De L'Expéditeur !== 국외포워더주소명 ==! */
         , Z.abrd_frwr_tlph_no                                      AS abrd_frwr_tlph_no   /** Téléphone De L'Expéditeur !== 국외포워더전화번호 ==! */
         , Z.abrd_frwr_eml                                          AS abrd_frwr_eml       /** Email De L'Expéditeur !== 국외포워더이메일 ==! */
         , Z.cnsi_txpr_idfy_no                                      AS cnsi_txpr_idfy_no   /** Niu Du Destinataire !== 수하인납세자식별번호 ==! */
         , Z.cnsi_nm                                                AS cnsi_nm             /** Nom de destinataire !== 수하인명 ==! */
         , Z.cnsi_addr_nm                                           AS cnsi_addr_nm        /** Adresse Du Destinataire !== 수하인주소명 ==! */
         , Z.cnsi_tlph_no                                           AS cnsi_tlph_no        /** N° de téléphone de destinataire !== 수하인전화번호 ==! */
         , Z.cnsi_eml                                               AS cnsi_eml            /** E-mail de destinataire !== 수하인이메일 ==! */
         , Z.ntpr_nm                                                AS ntpr_nm             /** Nom De La Partie À Notifier !== 통지처명 ==! */
         , Z.ntpr_addr_nm                                           AS ntpr_addr_nm        /** Adresse De La Partie À Notifier !== 통지처주소명 ==! */
         , Z.ntpr_tlph_no                                           AS ntpr_tlph_no        /** Téléphone De La Partie À Notifier !== 통지처전화번호 ==! */
         , Z.ntpr_eml                                               AS ntpr_eml            /** Email De La Partie À Notifier !== 통지처이메일 ==! */
         , Z.bf_cag_mgmt_no                                         AS bf_cag_mgmt_no      /** Crn Précédent !== 이전화물관리번호 ==! */
         , Z.bl_mdfy_tp_cd                                          AS bl_mdfy_tp_cd       /** Code de catégorie de rectification de BL !== BL정정구분코드 ==! */
         , Z.del_yn                                                 AS del_yn              /** Suppression On !== 삭제여부 ==! */
         , Z.frst_regst_id                                          AS frst_regst_id       /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
         , TO_CHAR(Z.frst_rgsr_dttm,'DD/MM/YYYY HH24:MI:SS')        AS frst_rgsr_dttm      /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
         , Z.last_chpr_id                                           AS last_chpr_id        /** Id Du Modificateur Final !== 최종변경자ID ==! */
         , TO_CHAR(Z.last_chg_dttm,'DD/MM/YYYY HH24:MI:SS')         AS last_chg_dttm       /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
         , Z.coat_trnp_yn                                           AS coat_trnp_yn        /** Cabotage On !== 연안운송여부 ==! */
         , Z.al_hbl_gcnt                                            AS al_hbl_gcnt         /** Nombre Total De Sous Bl !== 전체HBL개수 ==! */
         , Z.pckg_ut_cd                                             AS pckg_ut_cd          /** Code De L'Unité De Colis !== 포장단위코드 ==! */
         , Z.ldun_yn                                                AS ldun_yn             /** TODO:번역필요LKS !== 하역여부 ==! */
         , Z.cnsi_txpr_idfy_no_nin                                  AS cnsi_txpr_idfy_no_nin/** NIN de destinataire !== 수하인납세자식별번호(NIN) ==! */
         , Z.exppn_txpr_idfy_no_nin                                 AS exppn_txpr_idfy_no_nin/** NIN de l'exportateur !== 수출자납세자식별번호(NIN) ==! */
         , to_char(to_date(Z.BL_PBLS_DT, 'yyyymmdd'), 'dd/mm/yyyy') AS bl_pbls_dt      /** Date de delivrance du B/L !==BL발급일자==! */
         , Z.UNDG_GD_CD                                             AS UNDG_GD_CD       /** Code de classe UNDG !== UNDG등급 ==! */
         , Z.CHER_YN                                                AS CHER_YN         /** affréteur d’espace/slot !== 용선여부 ==! */
         , Z.CHER_GVNM_NM                                           AS CHER_GVNM_NM       /** nom de l’affréteur/slotteur !== 용선이름 ==! */
         , Z.CHER_ADDR_NM                                           AS CHER_ADDR_NM      /** adresse affréteur/slotteur !== 용선주소 ==! */
         , ( SELECT BL_NO
               FROM TB_CARI_CAG_DCSH_BL
              WHERE MRN = A.MRN
                AND CAG_MGMT_NO = Z.CAG_MGMT_NO
                AND DEL_YN = 'N'
           )                                                        AS BF_BL_NO
      FROM TB_CARI_CAG_DCSH_MDFY_BL Z
         , TB_CARI_CAG_DCSH_MDFY A
     WHERE 1=1
       AND Z.DEL_YN = 'N'
       AND A.DEL_YN = 'N'
       AND Z.CAG_DCSH_MDFY_RQST_NO = A.CAG_DCSH_MDFY_RQST_NO
       AND Z.CAG_DCSH_MDFY_RQST_NO = #{cagDcshMdfyRqstNo}     /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */
       <if test="@alpass.ipt.car.com.util.CarMyBatisUtil@isNotEmpty(cagMgmtNo)">
       AND Z.CAG_MGMT_NO = #{cagMgmtNo}           /** CRN !==화물관리번호==! */
       </if>
       <if test="@alpass.ipt.car.com.util.CarMyBatisUtil@isNotEmpty(blPtCd)">
       AND Z.BL_PT_CD = #{blPtCd}
       </if>
  </select>

  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (BL) ]  !==화물신고서 정정(BL) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyBlNoLst" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshBlVo">
    /* selectCagDcshMdfyBlNoLst */
    SELECT
--      MRN AS MRN   /** MRN !== MRN ==! */
        CAG_DCSH_MDFY_RQST_NO
      , CAG_MGMT_NO                          /** CRN !== 화물관리번호 ==! */
      , BL_NO                                /** N° de B/L !== BL번호 ==! */
    FROM TB_CARI_CAG_DCSH_MDFY_BL Z
    WHERE 1=1
      <if test="mrn != null and mrn != ''">
--      AND MRN = #{mrn}
      </if>
      <if test="cagDcshMdfyRqstNo != null and cagDcshMdfyRqstNo != ''">
--      AND MRN = (SELECT imm.MRN FROM TB_CARI_CAG_DCSH_MDFY imm WHERE imm.CAG_DCSH_MDFY_RQST_NO=#{cagDcshMdfyRqstNo})
      AND CAG_DCSH_MDFY_RQST_NO = #{cagDcshMdfyRqstNo}
      </if>
<!--       AND DEL_YN = 'N' -->
    ORDER BY BL_NO ASC
  </select>
  

  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (Conteneur) ]  !==화물신고서 정정(컨테이너) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyBlCntr"
          parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo"
          resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlCntrVo">
    /* selectCagDcshMdfyBlCntr*/
    SELECT #{mrn}                                         AS MRN           /** MRN !== MRN ==! */
         , A.cag_dcsh_mdfy_rqst_no                                  AS cag_dcsh_mdfy_rqst_no/** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
         , A.bl_srno                                                AS bl_srno             /** N° De Séquence De Bl !== BL일련번호 ==! */
         , A.cntr_srno                                              AS cntr_srno           /** N° De Séquence Du Conteneur !== 컨테이너일련번호 ==! */
         , A.cntr_no                                                AS cntr_no             /** N° De Conteneur !== 컨테이너번호 ==! */
         , A.cntr_tp_cd                                             AS cntr_tp_cd          /** Code De Type De Conteneur !== 컨테이너구분코드 ==! */
         , A.pckg_gcnt                                              AS pckg_gcnt           /** Nombre De Colis !== 포장개수 ==! */
         , A.pckg_ut_cd                                             AS pckg_ut_cd          /** Code De L'Unité De Colis !== 포장단위코드 ==! */
         , A.ecntr_wght                                             AS ecntr_wght          /** Tare De Conteneur(S) À Vide !== 공컨테이너중량 ==! */
         , A.ttwg                                                   AS ttwg                /** Poids Brut !== 총중량 ==! */
         , A.seal_no1                                               AS seal_no1            /** N° De Scellé1 !== 봉인번호1 ==! */
         , A.seal_no2                                               AS seal_no2            /** N° De Scellé2 !== 봉인번호2 ==! */
         , A.seal_no3                                               AS seal_no3            /** N° De Scellé3 !== 봉인번호3 ==! */
         , A.seal_chpn1                                             AS seal_chpn1          /** Responsable de scellé 1 !== 봉인담당자1 ==! */
         , A.seal_chpn2                                             AS seal_chpn2          /** Responsable de scellé 2 !== 봉인담당자2 ==! */
         , A.seal_chpn3                                             AS seal_chpn3          /** Responsable de scellé 3 !== 봉인담당자3 ==! */
         , A.del_yn                                                 AS del_yn              /** Suppression On !== 삭제여부 ==! */
         , A.frst_regst_id                                          AS frst_regst_id       /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
         , TO_CHAR(A.frst_rgsr_dttm,'DD/MM/YYYY HH24:MI:SS')        AS frst_rgsr_dttm      /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
         , A.last_chpr_id                                           AS last_chpr_id        /** Id Du Modificateur Final !== 최종변경자ID ==! */
         , TO_CHAR(A.last_chg_dttm,'DD/MM/YYYY HH24:MI:SS')         AS last_chg_dttm       /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
         , CASE WHEN NVL(A.CNTR_NO,'') != NVL(C.CNTR_NO,'') THEN C.CNTR_NO ELSE '' END BF_CNTR_NO
      FROM TB_CARI_CAG_DCSH_MDFY_BL_CNTR A
      JOIN TB_CARI_CAG_DCSH_MDFY_BL B
        ON A.cag_dcsh_mdfy_rqst_no = B.cag_dcsh_mdfy_rqst_no
       AND A.BL_SRNO = B.BL_SRNO
      LEFT JOIN TB_CARI_CAG_DCSH_BL_CNTR C
        ON C.MRN = #{mrn}
       AND B.CAG_MGMT_NO = C.CAG_MGMT_NO
       AND A.CNTR_SRNO = C.CNTR_SRNO
     WHERE 1=1
       AND A.DEL_YN = 'N'
       AND A.CAG_DCSH_MDFY_RQST_NO = #{cagDcshMdfyRqstNo}     /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */
  </select>
  
  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (Conteneur) ]  !==화물신고서 정정(컨테이너) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyBlCntrLst"
          parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo"
          resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlCntrVo">
    /* selectCagDcshMdfyBlCntrLst*/
    <include refid="pagination.header" />
    SELECT
      Z.CAG_DCSH_MDFY_RQST_NO                    /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */
      , Z.BL_SRNO                            /** N° de sequence de BL !==BL일련번호==! */
      , Z.CNTR_SRNO                            /** N° de séquence du conteneur !==컨테이너일련번호==! */
      , Z.CNTR_NO                              /** N° de conteneur !==컨테이너번호==! */
      , Z.CNTR_TP_CD                           /** Code de type de conteneur !==컨테이너구분코드==! */
--      , Z.CNTR_STFN_STTS_CD                    /** Code de l'état d'empotage du conteneur !==컨테이너적입상태코드==! */
      , Z.PCKG_GCNT                            /** Nombre de colis !==포장개수==! */
      , Z.PCKG_UT_CD                           /** Code de l'unité de colis !==포장단위코드==! */
      , Z.ECNTR_WGHT                           /** Tare de conteneur(s) à vide !==공컨테이너중량==! */
      , Z.TTWG                                 /** Poids brut !==총중량==! */
      , Z.SEAL_NO1                             /** N°1 de scellé !==봉인번호1==! */
      , Z.SEAL_NO2                             /** N°2 de scellé !==봉인번호2==! */
      , Z.SEAL_NO3                             /** N°3 de scellé !==봉인번호3==! */
      , Z.SEAL_CHPN1                          /** Responsable de scellé 1 !==봉인담당자1==! */
      , Z.SEAL_CHPN2                          /** Responsable de scellé 2 !==봉인담당자2==! */
      , Z.SEAL_CHPN3                          /** Responsable de scellé 3 !==봉인담당자3==! */
--      , Z.SEAL_CHPN_CD                         /** Code de la personne scellant !==봉인담당자코드==! */
      , Z.DEL_YN                               /** Suppression ON !==삭제여부==! */
      , Z.FRST_REGST_ID                        /** ID du premier enregistrant  !==최초등록자ID==! */
      , TO_CHAR(Z.FRST_RGSR_DTTM,'DD/MM/YYYY HH24:MI:SS') AS FRST_RGSR_DTTM  /** Date et heure de premier enregistrement !==최초등록일시==! */
      , Z.LAST_CHPR_ID                         /** ID du modificateur final !==최종변경자ID==! */
      , TO_CHAR(Z.LAST_CHG_DTTM,'DD/MM/YYYY HH24:MI:SS') AS LAST_CHG_DTTM  /** Date et heure de modification finale !==최종변경일시==! */
    FROM TB_CARI_CAG_DCSH_MDFY_BL_CNTR Z, TB_CARI_CAG_DCSH_MDFY_BL BL
    WHERE 1=1
      AND Z.DEL_YN = 'N' 
      AND BL.DEL_YN = 'N' 
      AND BL.CAG_DCSH_MDFY_RQST_NO = Z.CAG_DCSH_MDFY_RQST_NO
      AND BL.BL_SRNO = Z.BL_SRNO
      <!-- AND BL.BL_NO = #{blNo} -->
      AND BL.CAG_MGMT_NO = #{cagMgmtNo}
      AND Z.CAG_DCSH_MDFY_RQST_NO = (
        SELECT NVL((
          SELECT MAX(CAG_DCSH_MDFY_RQST_NO)
          FROM TB_CARI_CAG_DCSH_MDFY_BL_CNTR
          WHERE CAG_DCSH_MDFY_RQST_NO IN (
            SELECT CAG_DCSH_MDFY_RQST_NO
            FROM TB_CARI_CAG_DCSH_MDFY_BL
            WHERE CAG_MGMT_NO = #{cagMgmtNo} AND CAG_DCSH_MDFY_RQST_NO IN (
              SELECT CAG_DCSH_MDFY_RQST_NO 
              FROM TB_CARI_CAG_DCSH_MDFY 
              WHERE 
                MRN = #{mrn} 
                AND DEL_YN = 'N'
                <if test="mdfyDgcnt != null and mdfyDgcnt != ''"> 
                AND MDFY_DGCNT <![CDATA[<=]]> #{mdfyDgcnt}
                </if>
              )
              AND DEL_YN = 'N' 
            GROUP BY CAG_DCSH_MDFY_RQST_NO
          )), '0') AS SRNO 
        FROM DUAL
      )
    ORDER BY Z.BL_SRNO, Z.CNTR_NO ASC
    <include refid="pagination.footer" />
  </select>
  

  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (Conteneur) ]  !==화물신고서 정정(컨테이너) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyBlCntrMod" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlCntrVo">
    /* selectCagDcshMdfyBlCntrMod */
    SELECT
      Z.CAG_DCSH_MDFY_RQST_NO                    /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */
      , Z.BL_SRNO                            /** N° de sequence de BL !==BL일련번호==! */
      , Z.CNTR_SRNO                            /** N° de séquence du conteneur !==컨테이너일련번호==! */
      , Z.CNTR_NO                              /** N° de conteneur !==컨테이너번호==! */
      , Z.CNTR_TP_CD                           /** Code de type de conteneur !==컨테이너구분코드==! */
--      , Z.CNTR_STFN_STTS_CD                    /** Code de l'état d'empotage du conteneur !==컨테이너적입상태코드==! */
      , Z.PCKG_GCNT                            /** Nombre de colis !==포장개수==! */
      , Z.PCKG_UT_CD                           /** Code de l'unité de colis !==포장단위코드==! */
      , Z.ECNTR_WGHT                           /** Tare de conteneur(s) à vide !==공컨테이너중량==! */
      , Z.TTWG                                 /** Poids brut !==총중량==! */
      , Z.SEAL_NO1                             /** N°1 de scellé !==봉인번호1==! */
      , Z.SEAL_NO2                             /** N°2 de scellé !==봉인번호2==! */
      , Z.SEAL_NO3                             /** N°3 de scellé !==봉인번호3==! */
      , Z.SEAL_CHPN1                          /** Responsable de scellé 1 !==봉인담당자1==! */
      , Z.SEAL_CHPN2                          /** Responsable de scellé 2 !==봉인담당자2==! */
      , Z.SEAL_CHPN3                          /** Responsable de scellé 3 !==봉인담당자3==! */
--      , Z.SEAL_CHPN_CD                         /** Code de la personne scellant !==봉인담당자코드==! */
--      , Z.SFKP_MIN_TPRT                       /** !==보관최소온도==! */
--      , Z.SFKP_MAX_TPRT                       /** !==보관최대온도==! */
--      , Z.TPRT_CTRL_EQIP_YN                   /** !==온도제어장비여부==! */        
      , Z.DEL_YN                               /** Suppression ON !==삭제여부==! */
      , Z.FRST_REGST_ID                        /** ID du premier enregistrant  !==최초등록자ID==! */
      , TO_CHAR(Z.FRST_RGSR_DTTM,'DD/MM/YYYY HH24:MI:SS') AS FRST_RGSR_DTTM  /** Date et heure de premier enregistrement !==최초등록일시==! */
      , Z.LAST_CHPR_ID                         /** ID du modificateur final !==최종변경자ID==! */
      , TO_CHAR(Z.LAST_CHG_DTTM,'DD/MM/YYYY HH24:MI:SS') AS LAST_CHG_DTTM  /** Date et heure de modification finale !==최종변경일시==! */
    FROM TB_CARI_CAG_DCSH_MDFY_BL_CNTR Z, TB_CARI_CAG_DCSH_MDFY_BL BL
    WHERE 1=1
      AND BL.DEL_YN = 'N'
      AND Z.DEL_YN = 'N' 
      AND BL.CAG_DCSH_MDFY_RQST_NO = Z.CAG_DCSH_MDFY_RQST_NO
      AND BL.BL_SRNO = Z.BL_SRNO
      AND BL.CAG_MGMT_NO = #{cagMgmtNo}
      AND Z.CAG_DCSH_MDFY_RQST_NO = #{cagDcshMdfyRqstNo}
    
  </select>
  
  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (Conteneur) ]  !==화물신고서 정정(컨테이너) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshBlCntrMod" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlCntrVo">
    /* selectCagDcshBlCntrMod */
    SELECT
      Z.MRN                            /** MRN !== MRN ==! */
      , Z.CAG_MGMT_NO                          /** CRN !==화물관리번호==! */
      , Z.CNTR_SRNO                            /** N° de séquence du conteneur !==컨테이너일련번호==! */
      , Z.CNTR_NO                              /** N° de conteneur !==컨테이너번호==! */
      , Z.CNTR_TP_CD                           /** Code de type de conteneur !==컨테이너구분코드==! */
--      , Z.CNTR_STFN_STTS_CD                    /** Code de l'état d'empotage du conteneur !==컨테이너적입상태코드==! */
      , Z.PCKG_GCNT                            /** Nombre de colis !==포장개수==! */
      , Z.PCKG_UT_CD                           /** Code de l'unité de colis !==포장단위코드==! */
      , Z.ECNTR_WGHT                           /** Tare de conteneur(s) à vide !==공컨테이너중량==! */
      , Z.TTWG                                 /** Poids brut !==총중량==! */
      , Z.SEAL_NO1                             /** N°1 de scellé !==봉인번호1==! */
      , Z.SEAL_NO2                             /** N°2 de scellé !==봉인번호2==! */
      , Z.SEAL_NO3                             /** N°3 de scellé !==봉인번호3==! */
      , Z.SEAL_CHPN1                          /** Responsable de scellé 1 !==봉인담당자1==! */
      , Z.SEAL_CHPN2                          /** Responsable de scellé 2 !==봉인담당자2==! */
      , Z.SEAL_CHPN3                          /** Responsable de scellé 3 !==봉인담당자3==! */
--      , Z.SEAL_CHPN_CD                         /** Code de la personne scellant !==봉인담당자코드==! */
--      , Z.SFKP_MIN_TPRT                       /** !==보관최소온도==! */
--      , Z.SFKP_MAX_TPRT                       /** !==보관최대온도==! */
--      , Z.TPRT_CTRL_EQIP_YN                   /** !==온도제어장비여부==! */        
      , Z.DEL_YN                               /** Suppression ON !==삭제여부==! */
      , Z.FRST_REGST_ID                        /** ID du premier enregistrant  !==최초등록자ID==! */
      , TO_CHAR(Z.FRST_RGSR_DTTM,'DD/MM/YYYY HH24:MI:SS') AS FRST_RGSR_DTTM  /** Date et heure de premier enregistrement !==최초등록일시==! */
      , Z.LAST_CHPR_ID                         /** ID du modificateur final !==최종변경자ID==! */
      , TO_CHAR(Z.LAST_CHG_DTTM,'DD/MM/YYYY HH24:MI:SS') AS LAST_CHG_DTTM  /** Date et heure de modification finale !==최종변경일시==! */
    FROM TB_CARI_CAG_DCSH_BL_CNTR Z, TB_CARI_CAG_DCSH_BL BL
    WHERE 1=1
      AND BL.DEL_YN = 'N'
      AND Z.DEL_YN = 'N' 
      AND BL.MRN = Z.MRN
      AND BL.CAG_MGMT_NO = Z.CAG_MGMT_NO
      AND BL.CAG_MGMT_NO = #{cagMgmtNo}
    ORDER BY CNTR_SRNO ASC
  </select>

  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (véhicule) ]  !==화물신고서 정정(차량) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyBlVhcl" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVhclVo">
    /* selectCagDcshMdfyBlVhcl*/
    SELECT
              #{mrn}                                              AS mrn           /** MRN !== MRN ==! */
        , A.cag_dcsh_mdfy_rqst_no                                  AS cag_dcsh_mdfy_rqst_no/** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
                , A.bl_srno                                                AS bl_srno             /** N° De Séquence De Bl !== BL일련번호 ==! */
                , A.vhcl_srno                                              AS vhcl_srno           /** Numéro De Séquence De Véhicule !== 차량일련번호 ==! */
                , A.chss_no                                                AS chss_no             /** N° De Châssis !== 차대번호 ==! */
                , A.vhcl_rgsr_no                                           AS vhcl_rgsr_no        /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */
                , A.vhcl_mnur_cd                                           AS vhcl_mnur_cd        /** Code De Fabricant Du Véhicule !== 차량제조사코드 ==! */
                , A.vhcl_mdl_cd                                            AS vhcl_mdl_cd         /** Code De Modèle Du Véhicule !== 차량모델코드 ==! */
                , A.vhcl_knd_nm                                            AS vhcl_knd_nm         /** Type De Véhicule !== 차량종류명 ==! */
                , A.vhcl_mnfc_yy                                           AS vhcl_mnfc_yy        /** Année De Fabrication De Véhicule !== 차량제조년도 ==! */
                , A.engn_clnd_gcnt                                         AS engn_clnd_gcnt      /** Nombre De Cylindres De Moteur !== 엔진기통개수 ==! */
                , A.vhcl_totl_wght                                         AS vhcl_totl_wght      /** Poids total en charge !== 차량총중량 ==! */
                , A.del_yn                                                 AS del_yn              /** Suppression On !== 삭제여부 ==! */
                , A.frst_regst_id                                          AS frst_regst_id       /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
                , TO_CHAR(A.frst_rgsr_dttm,'DD/MM/YYYY HH24:MI:SS')        AS frst_rgsr_dttm      /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
                , A.last_chpr_id                                           AS last_chpr_id        /** Id Du Modificateur Final !== 최종변경자ID ==! */
                , TO_CHAR(A.last_chg_dttm,'DD/MM/YYYY HH24:MI:SS')         AS last_chg_dttm       /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
    FROM TB_CARI_CAG_DCSH_MDFY_BL_VHCL a
    WHERE 1=1
      AND a.DEL_YN = 'N' 
      AND a.CAG_DCSH_MDFY_RQST_NO = #{cagDcshMdfyRqstNo}     /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */
      <!-- AND BL_SRNO = #{blSrno}             /** N° de sequence de BL !==BL일련번호==! */
      AND VHCL_SRNO = #{vhclSrno}              /** Numéro de séquence de véhicule !==차량일련번호==! */ -->

  </select>

  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (véhicule) ]  !==화물신고서 정정(차량) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyBlVhclMod" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVhclVo">
    /* selectCagDcshMdfyBlVhclMod*/
    SELECT
      Z.CAG_DCSH_MDFY_RQST_NO                    /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */
      , Z.BL_SRNO                            /** N° de sequence de BL !==BL일련번호==! */
      , Z.VHCL_SRNO                            /** Numéro de séquence de véhicule !==차량일련번호==! */
      , Z.CHSS_NO                              /** N° de châssis !==차대번호==! */
      , Z.VHCL_RGSR_NO                        /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */
      , Z.VHCL_MNUR_CD                         /** Code de fabricant du véhicule !==차량제조사코드==! */
            , (SELECT VHCL_MNUR_NM FROM TB_COM_VHCL_MNUR WHERE VHCL_MNUR_CD = Z.VHCL_MNUR_CD AND DEL_YN = 'N' AND ROWNUM = 1) AS VHCL_MNUR_NM  /** Nom de fabricant du véhicule !==차량제조사명==! */
      , Z.VHCL_MDL_CD                          /** Code de modèle du véhicule !==차량모델코드==! */
            , (SELECT VHCL_MDL_NM FROM TB_COM_VHCL_MDL WHERE VHCL_MDL_CD = Z.VHCL_MDL_CD AND DEL_YN = 'N' AND ROWNUM = 1) AS VHCL_MDL_NM    /** Nom de modèle du véhicule !==차량모델명==! */
      , Z.VHCL_KND_NM                          /** Type de véhicule !==차량종류명==! */
      , Z.VHCL_MNFC_YY                         /** Année de fabrication de véhicule !==차량제조년도==! */
      , Z.ENGN_CLND_GCNT                       /** Nombre de cylindres de moteur !==엔진기통개수==! */
      , Z.VHCL_TOTL_WGHT                      /** Poids total en charge !== 차량총중량 ==! */
      , Z.DEL_YN                               /** Suppression ON !==삭제여부==! */
      , Z.FRST_REGST_ID                        /** ID du premier enregistrant  !==최초등록자ID==! */
      , TO_CHAR(Z.FRST_RGSR_DTTM,'DD/MM/YYYY HH24:MI:SS') AS FRST_RGSR_DTTM  /** Date et heure de premier enregistrement !==최초등록일시==! */
      , Z.LAST_CHPR_ID                         /** ID du modificateur final !==최종변경자ID==! */
      , TO_CHAR(Z.LAST_CHG_DTTM,'DD/MM/YYYY HH24:MI:SS') AS LAST_CHG_DTTM  /** Date et heure de modification finale !==최종변경일시==! */
    FROM TB_CARI_CAG_DCSH_MDFY_BL_VHCL Z, TB_CARI_CAG_DCSH_MDFY_BL BL
    WHERE 1=1
      AND BL.DEL_YN = 'N'
      AND Z.DEL_YN = 'N' 
      AND BL.CAG_DCSH_MDFY_RQST_NO = Z.CAG_DCSH_MDFY_RQST_NO
      AND BL.BL_SRNO = Z.BL_SRNO
      AND BL.CAG_MGMT_NO = #{cagMgmtNo}
      AND Z.CAG_DCSH_MDFY_RQST_NO = #{cagDcshMdfyRqstNo}
    ORDER BY Z.BL_SRNO, Z.VHCL_SRNO ASC
  </select>

  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (véhicule) ]  !==화물신고서 정정(차량) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshBlVhclMod" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVhclVo">
    /* selectCagDcshBlVhclMod*/
    SELECT
      Z.MRN                            /** MRN !== MRN ==! */
      , Z.CAG_MGMT_NO                          /** CRN !==화물관리번호==! */
      , Z.VHCL_SRNO                            /** Numéro de séquence de véhicule !==차량일련번호==! */
      , Z.CHSS_NO                              /** N° de châssis !==차대번호==! */
      , Z.VHCL_MNUR_CD                         /** Code de fabricant du véhicule !==차량제조사코드==! */
            , (SELECT VHCL_MNUR_NM FROM TB_COM_VHCL_MNUR WHERE VHCL_MNUR_CD = Z.VHCL_MNUR_CD AND DEL_YN = 'N' AND ROWNUM = 1) AS VHCL_MNUR_NM  /** Nom de fabricant du véhicule !==차량제조사명==! */
      , Z.VHCL_MDL_CD                          /** Code de modèle du véhicule !==차량모델코드==! */
            , (SELECT VHCL_MDL_NM FROM TB_COM_VHCL_MDL WHERE VHCL_MDL_CD = Z.VHCL_MDL_CD AND DEL_YN = 'N' AND ROWNUM = 1) AS VHCL_MDL_NM    /** Nom de modèle du véhicule !==차량모델명==! */
      , Z.VHCL_KND_NM                          /** Type de véhicule !==차량종류명==! */
      , Z.VHCL_MNFC_YY                         /** Année de fabrication de véhicule !==차량제조년도==! */
      , Z.ENGN_CLND_GCNT                       /** Nombre de cylindres de moteur !==엔진기통개수==! */
      , Z.DEL_YN                               /** Suppression ON !==삭제여부==! */
      , Z.FRST_REGST_ID                        /** ID du premier enregistrant  !==최초등록자ID==! */
      , TO_CHAR(Z.FRST_RGSR_DTTM,'DD/MM/YYYY HH24:MI:SS') AS FRST_RGSR_DTTM  /** Date et heure de premier enregistrement !==최초등록일시==! */
      , Z.LAST_CHPR_ID                         /** ID du modificateur final !==최종변경자ID==! */
      , TO_CHAR(Z.LAST_CHG_DTTM,'DD/MM/YYYY HH24:MI:SS') AS LAST_CHG_DTTM  /** Date et heure de modification finale !==최종변경일시==! */
    FROM TB_CARI_CAG_DCSH_BL_VHCL Z, TB_CARI_CAG_DCSH_BL BL
    WHERE 1=1
      AND BL.DEL_YN = 'N'
      AND Z.DEL_YN = 'N' 
      AND BL.MRN = Z.MRN
      AND BL.CAG_MGMT_NO = Z.CAG_MGMT_NO
      AND BL.CAG_MGMT_NO = #{cagMgmtNo}
    ORDER BY Z.CAG_MGMT_NO, Z.VHCL_SRNO ASC
  </select>
  
  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (Accomplissement d'exportation) ]  !==화물신고서 정정(수출이행) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyBlExfmMod" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlExfmVo">
    /* selectCagDcshMdfyBlExfmMod */
    SELECT
      Z.CAG_DCSH_MDFY_RQST_NO                    /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */
      , Z.BL_SRNO                            /** N° de sequence de BL !==BL일련번호==! */
      , Z.EXP_FFMN_SRNO                        /** N° de séquence de l'apurement d'exportation !==수출이행일련번호==! */
      , Z.EXP_FFMN_TP_CD                       /** Type d'apurement d'exportation !==수출이행구분코드==! */
      , Z.EXP_FFMN_NO                          /** N° d'apurement d'exportation !==수출이행번호==! */
      , Z.DIVD_SHPM_YN                         /** Chargement partiel ON !==분할선적여부==! */
      , Z.DIVD_SHPM_DGCNT                      /** Nombre de chargement partiel !==분할선적차수==! */
      , Z.DIVD_SHPM_LAST_YN                    /** Dernier chargement partiel ON !==분할선적최종여부==! */
      , Z.PCKG_GCNT                            /** Nombre de colis !==포장개수==! */
      , Z.PCKG_UT_CD                           /** Code de l'unité de colis !==포장단위코드==! */
      , Z.TTWG                                 /** Poids brut !==총중량==! */
      , Z.DEL_YN                               /** Suppression ON !==삭제여부==! */
      , Z.FRST_REGST_ID                        /** ID du premier enregistrant  !==최초등록자ID==! */
      , TO_CHAR(Z.FRST_RGSR_DTTM,'DD/MM/YYYY HH24:MI:SS') AS FRST_RGSR_DTTM  /** Date et heure de premier enregistrement !==최초등록일시==! */
      , Z.LAST_CHPR_ID                         /** ID du modificateur final !==최종변경자ID==! */
      , TO_CHAR(Z.LAST_CHG_DTTM,'DD/MM/YYYY HH24:MI:SS') AS LAST_CHG_DTTM  /** Date et heure de modification finale !==최종변경일시==! */
    FROM TB_CARI_CAG_DCSH_MDFY_BL_EXFM Z, TB_CARI_CAG_DCSH_MDFY_BL BL
    WHERE 1=1
      AND BL.DEL_YN         = 'N'
      AND Z.DEL_YN = 'N' 
      AND BL.CAG_DCSH_MDFY_RQST_NO   = Z.CAG_DCSH_MDFY_RQST_NO
      AND BL.BL_SRNO         = Z.BL_SRNO
      AND BL.CAG_MGMT_NO = #{cagMgmtNo}
      AND Z.CAG_DCSH_MDFY_RQST_NO   = #{cagDcshMdfyRqstNo}
    ORDER BY Z.BL_SRNO, Z.EXP_FFMN_SRNO ASC
  </select>

  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (Accomplissement d'exportation) ]  !==화물신고서 정정(수출이행) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshBlExfmMod" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlExfmVo">
    /* selectCagDcshBlExfmMod */
    SELECT
      Z.MRN                            /** MRN !== MRN ==! */
      , Z.CAG_MGMT_NO                          /** CRN !==화물관리번호==! */
      , Z.EXP_FFMN_SRNO                        /** N° de séquence de l'apurement d'exportation !==수출이행일련번호==! */
      , Z.EXP_FFMN_TP_CD                       /** Type d'apurement d'exportation !==수출이행구분코드==! */
      , Z.EXP_FFMN_NO                          /** N° d'apurement d'exportation !==수출이행번호==! */
      , Z.DIVD_SHPM_YN                         /** Chargement partiel ON !==분할선적여부==! */
      , Z.DIVD_SHPM_DGCNT                      /** Nombre de chargement partiel !==분할선적차수==! */
      , Z.DIVD_SHPM_LAST_YN                    /** Dernier chargement partiel ON !==분할선적최종여부==! */
      , Z.PCKG_GCNT                            /** Nombre de colis !==포장개수==! */
      , Z.PCKG_UT_CD                           /** Code de l'unité de colis !==포장단위코드==! */
      , Z.TTWG                                 /** Poids brut !==총중량==! */
      , Z.DEL_YN                               /** Suppression ON !==삭제여부==! */
      , Z.FRST_REGST_ID                        /** ID du premier enregistrant  !==최초등록자ID==! */
      , TO_CHAR(Z.FRST_RGSR_DTTM,'DD/MM/YYYY HH24:MI:SS') AS FRST_RGSR_DTTM  /** Date et heure de premier enregistrement !==최초등록일시==! */
      , Z.LAST_CHPR_ID                         /** ID du modificateur final !==최종변경자ID==! */
      , TO_CHAR(Z.LAST_CHG_DTTM,'DD/MM/YYYY HH24:MI:SS') AS LAST_CHG_DTTM  /** Date et heure de modification finale !==최종변경일시==! */
    FROM TB_CARI_CAG_DCSH_BL_EXFM Z, TB_CARI_CAG_DCSH_BL BL
    WHERE 1=1
      AND BL.DEL_YN         = 'N'
      AND Z.DEL_YN = 'N' 
      AND BL.MRN   = Z.MRN
      AND BL.CAG_MGMT_NO       = Z.CAG_MGMT_NO
      AND BL.CAG_MGMT_NO = #{cagMgmtNo}
    ORDER BY Z.CAG_MGMT_NO, Z.EXP_FFMN_SRNO ASC
  </select>

  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (train) ]  !==화물신고서 정정(열차) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyBlTrnMod" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlTrnVo">
    /* selectCagDcshMdfyBlTrnMod */
    SELECT    Z.cag_dcsh_mdfy_rqst_no                                  AS cag_dcsh_mdfy_rqst_no/** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
                , Z.bl_srno                                                AS bl_srno             /** N° De Séquence De Bl !== BL일련번호 ==! */
                , Z.trn_srno                                               AS trn_srno            /** numéro de série du train !== 열차일련번호 ==! */
                , Z.trn_rgsr_no                                            AS trn_rgsr_no         /** N° enregistrement du train !== 열차등록번호 ==! */
                , Z.wgn_no                                                 AS wgn_no              /** N° De Wagon !== 왜건번호 ==! */
                , Z.wgn_type                                               AS wgn_type            /** type de wagon !== 왜건타입 ==! */
                , Z.del_yn                                                 AS del_yn              /** Suppression On !== 삭제여부 ==! */
                , Z.frst_regst_id                                          AS frst_regst_id       /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
                , TO_CHAR(Z.frst_rgsr_dttm,'DD/MM/YYYY HH24:MI:SS')        AS frst_rgsr_dttm      /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
                , Z.last_chpr_id                                           AS last_chpr_id        /** Id Du Modificateur Final !== 최종변경자ID ==! */
                , TO_CHAR(Z.last_chg_dttm,'DD/MM/YYYY HH24:MI:SS')         AS last_chg_dttm       /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
    FROM TB_CARI_CAG_DCSH_MDFY_BL_TRN Z, TB_CARI_CAG_DCSH_MDFY_BL BL
    WHERE 1=1
      AND BL.DEL_YN = 'N'
      AND Z.DEL_YN = 'N' 
      AND BL.CAG_DCSH_MDFY_RQST_NO   = Z.CAG_DCSH_MDFY_RQST_NO
      AND BL.BL_SRNO = Z.BL_SRNO
      AND BL.CAG_MGMT_NO = #{cagMgmtNo}
      AND Z.CAG_DCSH_MDFY_RQST_NO = #{cagDcshMdfyRqstNo}
    ORDER BY Z.BL_SRNO, Z.trn_srno ASC
  </select>

  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (train) ]  !==화물신고서 정정(열차) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshBlTrnMod" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlTrnVo">
    /* selectCagDcshBlTrnMod */
    SELECT Z.mrn                                                    AS mrn                 /** Mrn !== MRN ==! */
                , Z.cag_mgmt_no                                            AS cag_mgmt_no         /** N° Demande De La Création De Crn !== 화물관리번호 ==! */
                , Z.trn_srno                                               AS trn_srno            /** numéro de série du train !== 열차일련번호 ==! */
                , Z.wgn_no                                                 AS wgn_no              /** N° De Wagon !== 왜건번호 ==! */
                , Z.wgn_type                                               AS wgn_type            /** type de wagon !== 왜건타입 ==! */
                , Z.del_yn                                                 AS del_yn              /** Suppression On !== 삭제여부 ==! */
                , Z.frst_regst_id                                          AS frst_regst_id       /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
                , TO_CHAR(Z.frst_rgsr_dttm,'DD/MM/YYYY HH24:MI:SS')        AS frst_rgsr_dttm      /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
                , Z.last_chpr_id                                           AS last_chpr_id        /** Id Du Modificateur Final !== 최종변경자ID ==! */
                , TO_CHAR(Z.last_chg_dttm,'DD/MM/YYYY HH24:MI:SS')         AS last_chg_dttm       /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
                , Z.trn_rgsr_no                                            AS trn_rgsr_no         /** N° enregistrement du train !== 열차등록번호 ==! */
    FROM TB_CARI_CAG_DCSH_BL_TRN Z, TB_CARI_CAG_DCSH_BL BL
    WHERE 1=1
      AND BL.DEL_YN = 'N'
      AND Z.DEL_YN = 'N' 
      AND BL.MRN = Z.MRN
      AND BL.CAG_MGMT_NO = Z.CAG_MGMT_NO
      AND BL.CAG_MGMT_NO = #{cagMgmtNo}
    ORDER BY Z.CAG_MGMT_NO, Z.trn_srno ASC
  </select>
  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (train) ]  !==화물신고서 정정(열차) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyBlTrlrMod" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlTrlrVo">
    /* selectCagDcshMdfyBlTrlrMod */
    SELECT
      Z.cag_dcsh_mdfy_rqst_no                                  AS cag_dcsh_mdfy_rqst_no/** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
             , Z.bl_srno                                                AS bl_srno             /** N° De Séquence De Bl !== BL일련번호 ==! */
             , Z.trlr_srno                                              AS trlr_srno           /** Numéro de série de la remorque !== 트레일러일련번호 ==! */
             , Z.vhcl_rgsr_no                                           AS vhcl_rgsr_no        /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */
             , Z.chss_no                                                AS chss_no             /** N° De Châssis !== 차대번호 ==! */
             , Z.trlr_stsz                                              AS trlr_stsz           /** Gabarit De Remorque !== 트레일러규격 ==! */
             , Z.del_yn                                                 AS del_yn              /** Suppression On !== 삭제여부 ==! */
             , Z.frst_regst_id                                          AS frst_regst_id       /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
             , TO_CHAR(Z.frst_rgsr_dttm,'DD/MM/YYYY HH24:MI:SS')        AS frst_rgsr_dttm      /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
             , Z.last_chpr_id                                           AS last_chpr_id        /** Id Du Modificateur Final !== 최종변경자ID ==! */
             , TO_CHAR(Z.last_chg_dttm,'DD/MM/YYYY HH24:MI:SS')         AS last_chg_dttm       /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
    FROM TB_CARI_CAG_DCSH_MDFY_BL_TRLR Z, TB_CARI_CAG_DCSH_MDFY_BL BL
    WHERE 1=1
      AND BL.DEL_YN         = 'N'
      AND Z.DEL_YN = 'N' 
      AND BL.CAG_DCSH_MDFY_RQST_NO   = Z.CAG_DCSH_MDFY_RQST_NO
      AND BL.BL_SRNO         = Z.BL_SRNO
      AND BL.CAG_MGMT_NO = #{cagMgmtNo}
      AND Z.CAG_DCSH_MDFY_RQST_NO   = #{cagDcshMdfyRqstNo}
    ORDER BY Z.BL_SRNO, Z.TRLR_SRNO ASC
  </select>

  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (train) ]  !==화물신고서 정정(열차) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshBlTrlrMod" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlTrlrVo">
    /* selectCagDcshBlTrlrMod */
    SELECT
           Z.mrn
       , Z.cag_dcsh_mdfy_rqst_no                                  AS cag_dcsh_mdfy_rqst_no/** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
             , Z.bl_srno                                                AS bl_srno             /** N° De Séquence De Bl !== BL일련번호 ==! */
             , Z.trlr_srno                                              AS trlr_srno           /** Numéro de série de la remorque !== 트레일러일련번호 ==! */
             , Z.vhcl_rgsr_no                                           AS vhcl_rgsr_no        /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */
             , Z.chss_no                                                AS chss_no             /** N° De Châssis !== 차대번호 ==! */
             , Z.trlr_stsz                                              AS trlr_stsz           /** Gabarit De Remorque !== 트레일러규격 ==! */
             , Z.del_yn                                                 AS del_yn              /** Suppression On !== 삭제여부 ==! */
             , Z.frst_regst_id                                          AS frst_regst_id       /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
             , TO_CHAR(Z.frst_rgsr_dttm,'DD/MM/YYYY HH24:MI:SS')        AS frst_rgsr_dttm      /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
             , Z.last_chpr_id                                           AS last_chpr_id        /** Id Du Modificateur Final !== 최종변경자ID ==! */
             , TO_CHAR(Z.last_chg_dttm,'DD/MM/YYYY HH24:MI:SS')         AS last_chg_dttm       /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
    FROM TB_CARI_CAG_DCSH_BL_TRLR Z, TB_CARI_CAG_DCSH_BL BL
    WHERE 1=1
      AND BL.DEL_YN         = 'N'
      AND Z.DEL_YN = 'N' 
      AND BL.MRN   = Z.MRN
      AND BL.CAG_MGMT_NO       = Z.CAG_MGMT_NO
      AND BL.CAG_MGMT_NO = #{cagMgmtNo}
    ORDER BY Z.CAG_MGMT_NO, Z.TRLR_SRNO ASC
  </select>


  <!--
  [  Rectifier la déclaration de cargaison  ] Enregistrer le résultat du contrôle.      !== 화물신고서 정정 심사 결과를 등록한다. ==!
  (Lee KyoungSung)
  -->
  <update id="updateCagDcshMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" >
    /* updateCagDcshMdfy */
    UPDATE TB_CARI_CAG_DCSH_MDFY
       SET APRE_YN_CD       = #{apreYnCd}                           /** Autorisation O/N !==승인여부코드==! */
         , AUDT_OPIN_CN     = #{audtOpinCn}                           /** Contenu de notification !== 통보내용 ==! */
         , LAST_CHPR_ID     = #{lastChprId}
         , LAST_CHG_DTTM   = SYSTIMESTAMP
     WHERE  1=1
       AND CAG_DCSH_MDFY_RQST_NO = #{cagDcshMdfyRqstNo}                        /** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
  </update>
  
  <!--
  [  Rectifier la déclaration de cargaison  ] Enregistrer le résultat du contrôle.      !== 화물신고서 정정 심사 결과를 등록한다. ==!
  (Lee KyoungSung)
  -->
  <update id="updateCagDcshEptMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" >
    /* updateCagDcshEptMdfy */
    UPDATE alpassext.TB_CARE_CAG_DCSH_MDFY
       SET APRE_YN_CD = #{apreYnCd}                                 /** Autorisation O/N !==승인여부코드==! */
         , AUDT_OPIN_CN = #{audtOpinCn}                             /** Contenu de notification !== 통보내용 ==! */
         , PRCS_STTS_CD = #{prcsSttsCd}                             /** Code de statut de traitement !==처리상태코드==! */
         , PRCS_DTTM = TO_DATE(#{prcsDttm}, 'DD/MM/YYYY HH24:MI:SS')        /** Date et heure de traitement !==처리일시==! */
         , LAST_CHPR_ID = #{lastChprId}
         , LAST_CHG_DTTM = SYSTIMESTAMP
     WHERE  1=1
       AND CAG_DCSH_MDFY_RQST_MGRN = #{cagDcshMdfyRqstMgrn}                    /** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
  </update>
  
      
  <!--
  [  Rectifier la déclaration de cargaison ] Voir le mot-clé pour voir  !== 적하목록정정신청번호에 해당하는 키를 조회한다.   ==!
  (Lee, Dongho)
  -->
  <select id="selectCagDcshMdfyKeysByRqstNo" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo">
    /* selectCagDcshMdfyKeysByRqstNo */
    SELECT MDFY.CAG_DCSH_MDFY_RQST_MGRN                /** N° de gestion de modificaton de manifeste !==적하목록정정신청관리번호 ==! */
         , MDFY.CAG_DCSH_MDFY_RQST_NO                  /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */
         , MDFY.MRN                                    /** MRN !== MRN ==! */
         , MDFY.CAG_RQST_TP_CD                         /** Code de type de demande de cargaison !== 화물신청구분코드 ==! */
         , MDFY.TRSN_CO_CD                           /** Code de compagnie de envoye !== 전송업체코드 ==! */
         , MDFY.MDFY_DGCNT                           /** Nombre de fois de la modification !== 정정차수 ==! */
         , BRKD.PRCS_STTS_CD                         /** Code de statut de traitement !== 처리상태코드 ==! */
         , BRKD.JRSD_ORGN_CD                         /** Code d'unite competente  !==관할조직코드==! */
         , BRKD.HNOT_EMP_ID                           /** ID de distributeur !==배부직원ID==! */
         , BRKD.AUDT_EMP_ID                           /** ID de la personne verifiant !==심사직원ID==! */
         , BL.BL_NO                               /** N° de BL !==BL번호==! */
         , BL.MSN                               /** MSN !==MSN==! */
         , BL.HBL_NO                             /** N° de sous BL !==House BL번호==! */
         , BL.CAG_MGMT_NO                           /** CRN !== 화물관리번호 ==! */
         , BL.BL_SRNO                            /** N° de sequence de BL !==BL일련번호==! */
         , MDFY.CAG_DCSH_MDFY_TP_CD                  /** Code de classification de correction de la déclaration de fret !== 화물신고서정정구분코드 ==! */
      FROM TB_CARI_CAG_DCSH_MDFY MDFY
      LEFT OUTER JOIN TB_CARI_CAG_DCSH_MDFY_BL BL
        ON MDFY.CAG_DCSH_MDFY_RQST_NO = BL.CAG_DCSH_MDFY_RQST_NO
      LEFT OUTER JOIN TB_CARI_CAG_PRCS_BRKD BRKD
        ON BRKD.cag_rqst_no = MDFY.CAG_DCSH_MDFY_RQST_NO
       AND MDFY.CAG_RQST_TP_CD = BRKD.CAG_RQST_TP_CD
     WHERE MDFY.DEL_YN = 'N'
       AND MDFY.CAG_DCSH_MDFY_RQST_NO = #{cagDcshMdfyRqstNo} /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */
       <if test="@alpass.ipt.car.com.util.CarMyBatisUtil@isNotEmpty(cagMgmtNo)">
       AND BL.CAG_MGMT_NO = #{cagMgmtNo}
       </if>
       AND ROWNUM = 1
  </select>

  <!--
  [  Rectifier la déclaration de cargaison ] voir les clés du informations précédent !==[운송수단정정] 정정전 정보의 키를 조회한다.==!
  (Lee, Dongho)
  -->
  <select id="selectCagDcshMdfySlngOldDgcnt" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo">
    /* selectCagDcshMdfySlngOldDgcnt */
    SELECT * FROM (
        SELECT 
            MDFY.CAG_DCSH_MDFY_RQST_MGRN               /** N° de gestion de modification de chargement !==적하목록정정신청관리번호 ==! */
            , MDFY.CAG_DCSH_MDFY_RQST_NO                  /** N° de modification de demande de chargement !== 적하목록정정신청번호 ==! */
            , MDFY.MRN                            /** MRN */
            , MDFY_DGCNT                         /** Nombre de fois de la modification !== 정정차수 ==! */
            , MDFY.CAG_RQST_TP_CD                     /** Code de type de demande de cargaison !== 화물신청구분코드 ==! */
            , MDFY.CAG_DCSH_MDFY_TP_CD                    /** Code de type de modification de manifeste !== 적하목록정정구분코드 ==! */
            , MDFY.BL_NO                              /** N° de BL !==BL번호==! */
            , BRKD.PRCS_STTS_CD                       /** Code de statut de traitement !== 처리상태코드 ==! */
        FROM TB_CARI_CAG_DCSH_MDFY MDFY
             LEFT OUTER JOIN TB_CARI_CAG_PRCS_BRKD BRKD  ON BRKD.cag_rqst_no = MDFY.CAG_DCSH_MDFY_RQST_NO AND MDFY.CAG_RQST_TP_CD = BRKD.CAG_RQST_TP_CD
        WHERE 1=1
          AND MDFY.DEL_YN = 'N'
            AND MDFY.MRN = #{mrn}
            AND BRKD.PRCS_STTS_CD IN ('D08', 'D10')       /** Autorisé(e) !==승인==! */
            AND MDFY.CAG_DCSH_MDFY_TP_CD = '10'
            AND MDFY.MDFY_DGCNT <![CDATA[ < ]]> #{mdfyDgcnt}
        ORDER BY MDFY.MDFY_DGCNT DESC
    )
    WHERE ROWNUM = 1 
  </select>
  
  <!--
  [Modification du BL de manifeste] voir les clés du informations précédent !==[BL 정정] 정정전 정보의 키를 조회한다.==!
  (Lee, Dongho)
  -->
  <select id="selectCagDcshMdfyBlOldDgcnt" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo">
    /* selectCagDcshMdfyBlOldDgcnt */
    SELECT * FROM (
        SELECT 
            MDFY.CAG_DCSH_MDFY_RQST_MGRN               /** N° de gestion de modification de chargement !==적하목록정정신청관리번호 ==! */
            , MDFY.CAG_DCSH_MDFY_RQST_NO                  /** N° de modification de demande de chargement !== 적하목록정정신청번호 ==! */
            , MDFY.MRN                            /** MRN */
            , MDFY.MDFY_DGCNT                         /** Nombre de fois de la modification !== 정정차수 ==! */
            , MDFY.CAG_RQST_TP_CD                     /** Code de type de demande de cargaison !== 화물신청구분코드 ==! */
            , MDFY.CAG_DCSH_MDFY_TP_CD                    /** Code de type de modification de manifeste !== 적하목록정정구분코드 ==! */
            , MDFY.BL_NO                              /** N° de BL !==BL번호==! */
            , BRKD.PRCS_STTS_CD                       /** Code de statut de traitement !== 처리상태코드 ==! */
        FROM TB_CARI_CAG_DCSH_MDFY MDFY
             LEFT OUTER JOIN TB_CARI_CAG_PRCS_BRKD BRKD  ON BRKD.cag_rqst_no = MDFY.CAG_DCSH_MDFY_RQST_NO AND MDFY.CAG_RQST_TP_CD = BRKD.CAG_RQST_TP_CD
             LEFT OUTER JOIN TB_CARI_CAG_DCSH_MDFY_BL BL ON MDFY.CAG_DCSH_MDFY_RQST_NO = BL.CAG_DCSH_MDFY_RQST_NO AND BL.DEL_YN = 'N'
        WHERE 1=1
          AND MDFY.DEL_YN = 'N'
              AND BRKD.PRCS_STTS_CD IN ('D08', 'D10')
            AND MDFY.MRN = #{mrn}
            AND MDFY.CAG_DCSH_MDFY_TP_CD IN ('20', '21')
            AND BL.CAG_MGMT_NO = #{cagMgmtNo}
            AND MDFY.MDFY_DGCNT <![CDATA[ < ]]> #{mdfyDgcnt}
        ORDER BY MDFY.MDFY_DGCNT DESC
    )
    WHERE ROWNUM = 1 
  </select>
  
  <!-- 
  [Modification du sous BL de manifeste] voir les clés du informations précédent !==[House BL 정정] 정정전 정보의 키를 조회한다.==!
  (Lee, Dongho)
  -->
  <select id="selectCagDcshMdfyHblOldDgcnt" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo">
    /* selectCagDcshMdfyHblOldDgcnt */
    SELECT * FROM (
        SELECT 
            MDFY.CAG_DCSH_MDFY_RQST_MGRN               /** N° de gestion de modification de chargement !==적하목록정정신청관리번호 ==! */
            , MDFY.CAG_DCSH_MDFY_RQST_NO                  /** N° de modification de demande de chargement !== 적하목록정정신청번호 ==! */
            , MDFY.MRN                            /** MRN */
            , MDFY.MDFY_DGCNT                         /** Nombre de fois de la modification !== 정정차수 ==! */
            , MDFY.CAG_RQST_TP_CD                     /** Code de type de demande de cargaison !== 화물신청구분코드 ==! */
            , MDFY.CAG_DCSH_MDFY_TP_CD                    /** Code de type de modification de manifeste !== 적하목록정정구분코드 ==! */
            , BL.BL_NO                              /** N° de BL !==BL번호==! */
            , BRKD.PRCS_STTS_CD                       /** Code de statut de traitement !== 처리상태코드 ==! */
        FROM TB_CARI_CAG_DCSH_MDFY_BL BL, TB_CARI_CAG_DCSH_MDFY MDFY
             LEFT OUTER JOIN TB_CARI_CAG_PRCS_BRKD BRKD  ON BRKD.cag_rqst_no = MDFY.CAG_DCSH_MDFY_RQST_NO AND MDFY.CAG_RQST_TP_CD = BRKD.CAG_RQST_TP_CD
        WHERE 1=1
            AND MDFY.DEL_YN = 'N'
            AND BL.DEL_YN = 'N'
            AND MDFY.CAG_DCSH_MDFY_RQST_NO = BL.CAG_DCSH_MDFY_RQST_NO
              AND BRKD.PRCS_STTS_CD IN ('D08', 'D10')
            AND MDFY.CAG_DCSH_MDFY_TP_CD IN ('30', '31')
            AND MDFY.MRN = #{mrn}
            AND BL.CAG_MGMT_NO = #{cagMgmtNo}
            AND MDFY.MDFY_DGCNT <![CDATA[ < ]]> #{mdfyDgcnt}
        ORDER BY MDFY.MDFY_DGCNT DESC
    )
    WHERE ROWNUM = 1 
  </select>
  
  <!-- 
  [  Rectifier la déclaration de cargaison ] voir les clés du informations précédent !==정정전 정보의 키를 조회한다.==!
  (Lee, Dongho)
  -->
  <select id="selectCagDcshMdfyRqstNoOriginal" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo">
    /* selectCagDcshMdfyRqstNoOriginal */
    SELECT *
    FROM (
        SELECT cag_dcsh_mdfy_rqst_no                                  AS cag_dcsh_mdfy_rqst_no/** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
                 , cag_dcsh_mdfy_rqst_mgrn                                AS cag_dcsh_mdfy_rqst_mgrn/** Numéro de gestion de la demande de correction de la déclaration de fret !== 화물신고서정정신청관리번호 ==! */
        FROM TB_CARI_CAG_DCSH_MDFY
        WHERE 1=1
          AND DEL_YN = 'N'
            /* AND PRCS_STTS_CD IN ('D08', 'D10') */       /** 'D08' : Autorisé(e) !==승인==! */
            AND MRN = #{mrn} 
            <!-- AND CAG_RQST_TP_CD NOT IN ('ISS', 'IAS')  현재사용하지않는코드 -->
            AND MDFY_DGCNT = 0
        ORDER BY MDFY_DGCNT DESC
      )
    WHERE ROWNUM = 1 
  </select>
  
  <!-- 
  [  Rectifier la déclaration de cargaison ] voir les clés du informations précédent !==정정전 정보의 키를 조회한다.==!
  (Lee, Dongho)
  -->
  <select id="selectCagDcshHblMdfyRqstNoOriginal" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo">
    /* selectCagDcshHblMdfyRqstNoOriginal */
        SELECT MDFY.cag_dcsh_mdfy_rqst_no                                  AS cag_dcsh_mdfy_rqst_no/** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
                 , MDFY.cag_dcsh_mdfy_rqst_mgrn                                AS cag_dcsh_mdfy_rqst_mgrn/** Numéro de gestion de la demande de correction de la déclaration de fret !== 화물신고서정정신청관리번호 ==! */
        FROM TB_CARI_CAG_DCSH_MDFY MDFY, TB_CARI_CAG_DCSH_MDFY_BL BL
        WHERE 1=1
            AND MDFY.DEL_YN = 'N'
        AND BL.DEL_YN = 'N'
              AND MDFY.CAG_DCSH_MDFY_RQST_NO = BL.CAG_DCSH_MDFY_RQST_NO
            AND MRN = #{mrn}
            <!-- AND BL.BL_NO = #{blNo}
            <if test="hblNo != null and hblNo != ''">
            AND BL.HBL_NO = #{hblNo}
            </if> -->
            <!-- <if test="cagMgmtNo != null and cagMgmtNo != ''">
            AND BL.CAG_MGMT_NO = #{cagMgmtNo}
            </if> -->
            <if test="cagMgmtNoMbl != null and cagMgmtNoMbl != ''">
            AND BL.CAG_MGMT_NO = #{cagMgmtNoMbl}
            </if>
            <!-- AND MDFY.CAG_RQST_TP_CD IN ('ISS', 'IAS') -->
            AND MDFY.MDFY_DGCNT = 0
            AND ROWNUM = 1
        ORDER BY MDFY_DGCNT DESC
  </select>
  
  <!--
  Voir les informations sur N° de de demande de correction de la déclaration de fret !==화물신고서정정신청번호를 조회한다.==!
  (Kwon WooHyun)
  --> 
  <select id="selectCagDcshMdfyRqstNoSrbk" parameterType="string" resultType="string">
    /* selectCagDcshMdfyRqstNoSrbk */
    SELECT CAG_DCSH_MDFY_RQST_NO             /** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
      FROM TB_CARI_CAG_DCSH_MDFY
     WHERE DEL_YN = 'N'
      AND MDFY_DGCNT = 0
      AND MRN = #{value}
  </select>
  
  <!--
  On voit la valeur la plus haute parmi les MSNs. !==MSN 중 가장 큰값을 조회한다.==!
  (Lee, Dongho)
  --> 
  <select id="selectCagDcshMdfyMsnMax" parameterType="java.lang.String" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo">
    /* CarCagDcshMdfyMapper.selectCagDcshMdfyMsnMax */
    SELECT MAX(MSN) AS MSN
    FROM (
      SELECT MSN
        FROM TB_CARI_CAG_DCSH MNFS, TB_CARI_CAG_DCSH_BL BL
        WHERE MNFS.MRN = BL.MRN
          AND BL.BL_PT_CD = 'M'
          AND MNFS.MRN   = #{mrn} 
    )
  </select>
  
  <!--
  On voit la valeur la plus haute parmi les HSNs. !==HSN 중 가장 큰값을 조회한다.==!
  (Lee, Dongho)
  --> 
  <select id="selectCagDcshMdfyHsnMax" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo">
    /* CarCagDcshMdfyMapper.selectCagDcshMdfyHsnMax */
    SELECT MAX(HSN) AS HSN
    FROM 
    (
        (
        SELECT HSN AS HSN
        FROM TB_CARI_CAG_DCSH MNFS, TB_CARI_CAG_DCSH_BL BL
        WHERE MNFS.MRN = BL.MRN
          AND BL.BL_PT_CD = 'H'
          AND BL.MSN    = #{msn}
          AND MNFS.MRN   = #{mrn}
          /* AND MNFS.DEL_YN = 'N' */
      )
      
      <!-- 항공수입 중 목록통관인 경우 : 목록통관의 HSN과도 중복불가 -->
      <!-- if test="cagRqstTpCd != null and cagRqstTpCd != '' and cagRqstTpCd.equals('IAS')">
      UNION
      
      (  
        SELECT BL.HSN AS HSN
        FROM TB_CARI_LCLR LCLR, TB_CARI_LCLR_BL BL
        WHERE LCLR.LST_CSCL_RQST_NO = BL.LST_CSCL_RQST_NO
          AND LCLR.MSN  = #{msn}
          AND LCLR.MRN   = #{mrn}
          /* AND LCLR.DEL_YN = 'N' */
      )
       </if -->
    )
      
  </select>
  
  <!--
  [ Rectifier la déclaration de cargaison ] On modifie les CRN.   !==[화물신고서정정] 화물관리번호를 변경한다.==!
  (Lee, Dongho)
  --> 
  <update id="updateCagDcshIptMdfyBlCagMgmtNo" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" >
    /* CarCagDcshMdfyMapper.updateCagDcshIptMdfyBlCagMgmtNo */
    UPDATE TB_CARI_CAG_DCSH_MDFY_BL
       SET CAG_MGMT_NO = #{cagMgmtNo}              /** CRN !==화물관리번호==! */
         , MSN = #{msn}                     /** MSN !==MSN==! */
         , HSN = #{hsn}                     /** HSN !==HSN==! */
     WHERE  1=1
       AND CAG_DCSH_MDFY_RQST_NO = #{cagDcshMdfyRqstNo}  /** N° de gestion de modificaton de manifeste !==적하목록정정신청관리번호 ==! */
  </update>
  
  
  <!--
  [ Rectifier la déclaration de cargaison ] On modifie les CRN.   !==[화물신고서정정] 화물관리번호를 변경한다.==!
  (Lee, Dongho)
  --> 
  <update id="updateCagDcshEptMdfyBlCagMgmtNo" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" >
    /* CarCagDcshMdfyMapper.updateCagDcshEptMdfyBlCagMgmtNo */
    UPDATE alpassext.TB_CARE_CAG_DCSH_MDFY_BL
       SET CAG_MGMT_NO = #{cagMgmtNo}                     /** CRN !==화물관리번호==! */
         , MSN = #{msn}                     /** MSN !==MSN==! */
         , HSN = #{hsn}                     /** HSN !==HSN==! */
     WHERE  1=1
       AND CAG_DCSH_MDFY_RQST_MGRN = #{cagDcshMdfyRqstMgrn}  /** N° de gestion de modificaton de manifeste !==적하목록정정신청관리번호 ==! */
  </update>
  
  <!--
    Voir la liste des la [  déclaration de cargaison (BL) ]  !==화물신고서 (BL) 리스트를 조회한다.==!
    (Lee KyoungSung)
  --> 
  <select id="selectCagDcshBlCntrLst" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlCntrVo">
    /* CarCagDcshMdfyMapper.selectCagDcshBlCntrLst*/
    SELECT BL.MRN                            /** MRN !== MRN ==! */
         , CNTR.CAG_MGMT_NO                          /** CRN !==화물관리번호==! */
         , CNTR.CNTR_SRNO                            /** N° de séquence du conteneur !==컨테이너일련번호==! */
         , CNTR.CNTR_NO                              /** N° de conteneur !==컨테이너번호==! */
         , CNTR.CNTR_TP_CD                           /** Code de type de conteneur !==컨테이너구분코드==! */
         , CNTR.PCKG_GCNT                            /** Nombre de colis !==포장개수==! */
         , CNTR.PCKG_UT_CD                           /** Code de l'unité de colis !==포장단위코드==! */
         , CNTR.ECNTR_WGHT                           /** Tare de conteneur(s) à vide !==공컨테이너중량==! */
         , CNTR.TTWG                                 /** Poids brut !==총중량==! */
         , CNTR.SEAL_NO1                             /** N°1 de scellé !==봉인번호1==! */
         , CNTR.SEAL_NO2                             /** N°2 de scellé !==봉인번호2==! */
         , CNTR.SEAL_NO3                             /** N°3 de scellé !==봉인번호3==! */
         , CNTR.SEAL_CHPN1                           /** Responsable de scellé 1 !==봉인담당자1==! */
         , CNTR.SEAL_CHPN2                           /** Responsable de scellé 2 !==봉인담당자2==! */
         , CNTR.SEAL_CHPN3                           /** Responsable de scellé 3 !==봉인담당자3==! */
         , CNTR.DEL_YN                               /** Suppression ON !==삭제여부==! */
         , CNTR.FRST_REGST_ID                        /** ID du premier enregistrant  !==최초등록자ID==! */
         , TO_CHAR(CNTR.FRST_RGSR_DTTM,'DD/MM/YYYY HH24:MI:SS') AS FRST_RGSR_DTTM  /** Date et heure de premier enregistrement !==최초등록일시==! */
         , CNTR.LAST_CHPR_ID                         /** ID du modificateur final !==최종변경자ID==! */
         , TO_CHAR(CNTR.LAST_CHG_DTTM,'DD/MM/YYYY HH24:MI:SS') AS LAST_CHG_DTTM  /** Date et heure de modification finale !==최종변경일시==! */
      FROM TB_CARI_CAG_DCSH_BL_CNTR CNTR
         , TB_CARI_CAG_DCSH_BL BL
     WHERE 1=1
       AND CNTR.DEL_YN     = 'N'
       AND BL.DEL_YN     = 'N'
       AND BL.MRN       = CNTR.MRN
       AND BL.CAG_MGMT_NO   = CNTR.CAG_MGMT_NO
       AND BL.MRN       = #{mrn}
       AND BL.CAG_MGMT_NO   = #{cagMgmtNo}
  </select>
  
  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (remorque) ]  !==화물신고서 정정(트레일러) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyBlTrlr" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlTrlrVo">
    /* selectCagDcshMdfyBlTrlr*/
      SELECT #{mrn}                                       AS mrn           /** MRN !== MRN ==! */ 
       , A.cag_dcsh_mdfy_rqst_no                                  AS cag_dcsh_mdfy_rqst_no/** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
             , A.bl_srno                                                AS bl_srno             /** N° De Séquence De Bl !== BL일련번호 ==! */
             , A.trlr_srno                                              AS trlr_srno           /** Numéro de série de la remorque !== 트레일러일련번호 ==! */
             , A.vhcl_rgsr_no                                           AS vhcl_rgsr_no        /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */
             , A.chss_no                                                AS chss_no             /** N° De Châssis !== 차대번호 ==! */
             , A.trlr_stsz                                              AS trlr_stsz           /** Gabarit De Remorque !== 트레일러규격 ==! */
             , A.del_yn                                                 AS del_yn              /** Suppression On !== 삭제여부 ==! */
             , A.frst_regst_id                                          AS frst_regst_id       /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
             , TO_CHAR(A.frst_rgsr_dttm,'DD/MM/YYYY HH24:MI:SS')        AS frst_rgsr_dttm      /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
             , A.last_chpr_id                                           AS last_chpr_id        /** Id Du Modificateur Final !== 최종변경자ID ==! */
             , TO_CHAR(A.last_chg_dttm,'DD/MM/YYYY HH24:MI:SS')         AS last_chg_dttm       /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
             , CASE WHEN NVL(A.VHCL_RGSR_NO,'') != NVL(C.VHCL_RGSR_NO,'') THEN C.VHCL_RGSR_NO ELSE '' END BF_VHCL_RGSR_NO
      FROM TB_CARI_CAG_DCSH_MDFY_BL_TRLR A
      JOIN TB_CARI_CAG_DCSH_MDFY_BL B
            ON A.cag_dcsh_mdfy_rqst_no = B.cag_dcsh_mdfy_rqst_no
           AND A.BL_SRNO = B.BL_SRNO
          LEFT JOIN TB_CARI_CAG_DCSH_BL_TRLR C
            ON C.MRN = #{mrn}
           AND B.CAG_MGMT_NO = C.CAG_MGMT_NO
           AND A.TRLR_SRNO = C.TRLR_SRNO 
         WHERE 1=1
           AND A.DEL_YN = 'N'  
       AND a.CAG_DCSH_MDFY_RQST_NO = #{cagDcshMdfyRqstNo}     /** N° de demande de modification de manifeste !== 적하목록정정신청번호 ==! */
  </select>
  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (train) ]  !==화물신고서 정정(열차) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyBlTrn" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlTrnVo">
    /* selectCagDcshMdfyBlTrn*/
    SELECT #{mrn}                                       AS mrn           /** MRN !== MRN ==! */ 
       , A.cag_dcsh_mdfy_rqst_no                                  AS cag_dcsh_mdfy_rqst_no/** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
             , A.bl_srno                                                AS bl_srno             /** N° De Séquence De Bl !== BL일련번호 ==! */
             , A.trn_srno                                               AS trn_srno            /** numéro de série du train !== 열차일련번호 ==! */
             , A.trn_rgsr_no                                            AS trn_rgsr_no         /** N° enregistrement du train !== 열차등록번호 ==! */
             , A.wgn_no                                                 AS wgn_no              /** N° De Wagon !== 왜건번호 ==! */
             , A.wgn_type                                               AS wgn_type            /** type de wagon !== 왜건타입 ==! */
             , A.del_yn                                                 AS del_yn              /** Suppression On !== 삭제여부 ==! */
             , A.frst_regst_id                                          AS frst_regst_id       /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
             , TO_CHAR(A.frst_rgsr_dttm,'DD/MM/YYYY HH24:MI:SS')        AS frst_rgsr_dttm      /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
             , A.last_chpr_id                                           AS last_chpr_id        /** Id Du Modificateur Final !== 최종변경자ID ==! */
             , TO_CHAR(A.last_chg_dttm,'DD/MM/YYYY HH24:MI:SS')         AS last_chg_dttm       /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
             , CASE WHEN NVL(A.WGN_NO,'') != NVL(C.WGN_NO,'') THEN C.WGN_NO ELSE '' END BF_WGN_NO
          FROM TB_CARI_CAG_DCSH_MDFY_BL_TRN A
          JOIN TB_CARI_CAG_DCSH_MDFY_BL B
            ON A.cag_dcsh_mdfy_rqst_no = B.cag_dcsh_mdfy_rqst_no
           AND A.BL_SRNO = B.BL_SRNO
          LEFT JOIN TB_CARI_CAG_DCSH_BL_TRN C
            ON C.MRN = #{mrn}
           AND B.CAG_MGMT_NO = C.CAG_MGMT_NO
           AND A.TRN_SRNO = C.TRN_SRNO 
       WHERE 1=1
       AND a.DEL_YN = 'N' 
       AND a.CAG_DCSH_MDFY_RQST_NO = #{cagDcshMdfyRqstNo}     /** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
  </select>
  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (Accomplissement d'exportation) ]  !==화물신고서 정정(수출이행) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyBlExfm" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlExfmVo">
    /* selectCagDcshMdfyBlExfm*/
    SELECT    #{mrn}                                       AS mrn           /** MRN !== MRN ==! */ 
        , A.cag_dcsh_mdfy_rqst_no                                  AS cag_dcsh_mdfy_rqst_no/** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
                , A.bl_srno                                                AS bl_srno             /** N° De Séquence De Bl !== BL일련번호 ==! */
                , A.exp_ffmn_srno                                          AS exp_ffmn_srno       /** N° De Séquence De L'Apurement D'Exportation !== 수출이행일련번호 ==! */
                , A.exp_ffmn_tp_cd                                         AS exp_ffmn_tp_cd      /** Type D'Apurement D'Exportation !== 수출이행구분코드 ==! */
                , A.exp_ffmn_no                                            AS exp_ffmn_no         /** N° D'Apurement D'Exportation !== 수출이행번호 ==! */
                , A.divd_shpm_yn                                           AS divd_shpm_yn        /** Chargement Partiel On !== 분할선적여부 ==! */
                , A.divd_shpm_dgcnt                                        AS divd_shpm_dgcnt     /** Nombre De Chargement Partiel !== 분할선적차수 ==! */
                , A.divd_shpm_last_yn                                      AS divd_shpm_last_yn   /** Dernier Chargement Partiel On !== 분할선적최종여부 ==! */
                , A.pckg_gcnt                                              AS pckg_gcnt           /** Nombre De Colis !== 포장개수 ==! */
                , A.pckg_ut_cd                                             AS pckg_ut_cd          /** Code De L'Unité De Colis !== 포장단위코드 ==! */
                , A.ttwg                                                   AS ttwg                /** Poids Brut !== 총중량 ==! */
                , A.del_yn                                                 AS del_yn              /** Suppression On !== 삭제여부 ==! */
                , A.frst_regst_id                                          AS frst_regst_id       /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
                , TO_CHAR(A.frst_rgsr_dttm,'DD/MM/YYYY HH24:MI:SS')        AS frst_rgsr_dttm      /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
                , A.last_chpr_id                                           AS last_chpr_id        /** Id Du Modificateur Final !== 최종변경자ID ==! */
                , TO_CHAR(A.last_chg_dttm,'DD/MM/YYYY HH24:MI:SS')         AS last_chg_dttm       /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
         FROM TB_CARI_CAG_DCSH_MDFY_BL_EXFM A
    WHERE 1=1
      AND a.DEL_YN = 'N' 
      AND a.CAG_DCSH_MDFY_RQST_NO = #{cagDcshMdfyRqstNo}     /** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
  </select>

  <!--
    Enregistrement de la déclaration de cargaison (Conteneur) !==화물신고서 (컨테이너) 리스트를 조회한다.==!
    (Lee KyoungSung)
  --> 
  <insert id="insertCagDcshIptBlCntrByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlCntrVo" >
    /* CarCagDcshMdfyMapper.insertCagDcshIptBlCntrByMdfy */
    INSERT INTO TB_CARI_CAG_DCSH_BL_CNTR 
           ( mrn                           /** Mrn !== MRN ==! */
               , cag_mgmt_no                   /** N° Demande De La Création De Crn !== 화물관리번호 ==! */
               , cntr_srno                     /** N° De Séquence Du Conteneur !== 컨테이너일련번호 ==! */
               , cntr_no                       /** N° De Conteneur !== 컨테이너번호 ==! */
               , cntr_tp_cd                    /** Code De Type De Conteneur !== 컨테이너구분코드 ==! */
               , pckg_gcnt                     /** Nombre De Colis !== 포장개수 ==! */
               , pckg_ut_cd                    /** Code De L'Unité De Colis !== 포장단위코드 ==! */
               , ecntr_wght                    /** Tare De Conteneur(S) À Vide !== 공컨테이너중량 ==! */
               , ttwg                          /** Poids Brut !== 총중량 ==! */
               , seal_no1                      /** N° De Scellé1 !== 봉인번호1 ==! */
               , seal_no2                      /** N° De Scellé2 !== 봉인번호2 ==! */
               , seal_no3                      /** N° De Scellé3 !== 봉인번호3 ==! */
               , seal_chpn1                    /** Responsable de scellé 1 !== 봉인담당자1 ==! */
               , seal_chpn2                    /** Responsable de scellé 2 !== 봉인담당자2 ==! */
               , seal_chpn3                    /** Responsable de scellé 3 !== 봉인담당자3 ==! */
               , del_yn                        /** Suppression On !== 삭제여부 ==! */
               , frst_regst_id                 /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , frst_rgsr_dttm                /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , last_chpr_id                  /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , last_chg_dttm                 /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
        )  VALUES (
                 #{mrn}                        /** Mrn !== MRN ==! */
               , #{cagMgmtNo}                  /** N° Demande De La Création De Crn !== 화물관리번호 ==! */
               , #{cntrSrno}                   /** N° De Séquence Du Conteneur !== 컨테이너일련번호 ==! */
               , #{cntrNo}                     /** N° De Conteneur !== 컨테이너번호 ==! */
               , #{cntrTpCd}                   /** Code De Type De Conteneur !== 컨테이너구분코드 ==! */
               , #{pckgGcnt}                   /** Nombre De Colis !== 포장개수 ==! */
               , #{pckgUtCd}                   /** Code De L'Unité De Colis !== 포장단위코드 ==! */
               , #{ecntrWght}                  /** Tare De Conteneur(S) À Vide !== 공컨테이너중량 ==! */
               , #{ttwg}                       /** Poids Brut !== 총중량 ==! */
               , #{sealNo1}                    /** N° De Scellé1 !== 봉인번호1 ==! */
               , #{sealNo2}                    /** N° De Scellé2 !== 봉인번호2 ==! */
               , #{sealNo3}                    /** N° De Scellé3 !== 봉인번호3 ==! */
               , #{sealChpn1}                  /** Responsable de scellé 1 !== 봉인담당자1 ==! */
               , #{sealChpn2}                  /** Responsable de scellé 2 !== 봉인담당자2 ==! */
               , #{sealChpn3}                  /** Responsable de scellé 3 !== 봉인담당자3 ==! */
               , 'N'                           /** Suppression On !== 삭제여부 ==! */
               , #{frstRegstId}                /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , #{lastChprId}                 /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
        )
    ON CONFLICT ( MRN, CAG_MGMT_NO, CNTR_SRNO )
    DO UPDATE SET
          LAST_CHPR_ID     = #{lastChprId}
      , LAST_CHG_DTTM   = SYSTIMESTAMP
      , DEL_YN       = 'N'
      <if test="cntrNo         != null">,CNTR_NO            = #{cntrNo}              /** N° de conteneur !==컨테이너번호==! */                            </if>
      <if test="cntrTpCd       != null">,CNTR_TP_CD         = #{cntrTpCd}            /** Code de type de conteneur !==컨테이너구분코드==! */               </if>
      <if test="pckgGcnt       != null">,PCKG_GCNT          = #{pckgGcnt}            /** Nombre de colis !==포장개수==! */                                 </if>
      <if test="pckgUtCd       != null">,PCKG_UT_CD         = #{pckgUtCd}            /** Code de l'unite de colis !==포장단위코드==! */                    </if>
      <if test="ecntrWght      != null">,ECNTR_WGHT         = #{ecntrWght}           /** Tare de conteneur(s) a vide !==공컨테이너중량==! */               </if>
      <if test="ttwg           != null">,TTWG               = #{ttwg}                /** Poids brut !==총중량==! */                                        </if>
      ,SEAL_NO1           = #{sealNo1}             /** N°1 de scelle !==봉인번호1==! */
      ,SEAL_NO2           = #{sealNo2}             /** N°2 de scelle !==봉인번호2==! */
      ,SEAL_NO3           = #{sealNo3}             /** N°3 de scelle !==봉인번호3==! */
      <if test="sealChpn1 != null and sealChpn1 != ''">
            , seal_chpn1 = #{sealChpn1}                      /** Responsable de scellé 1 !== 봉인담당자1 ==! */ 
            </if>
            <if test="sealChpn2 != null and sealChpn2 != ''">
            , seal_chpn2 = #{sealChpn2}                      /** Responsable de scellé 2 !== 봉인담당자2 ==! */ 
            </if>
            <if test="sealChpn3 != null and sealChpn3 != ''">
            , seal_chpn3 = #{sealChpn3}                      /** Responsable de scellé 3 !== 봉인담당자3 ==! */ 
            </if>
  </insert>
  
  <!--
  Enregistrement de la déclaration de cargaison (véhicule) !==화물신고서 (자동차) 등록 한다.==!
  (Lee, Dongho) 
  --> 
  <insert id="insertCagDcshIptBlVhclByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVhclVo" >
    /* CarCagDcshMdfyMapper.insertCagDcshIptBlVhclByMdfy */
    INSERT INTO TB_CARI_CAG_DCSH_BL_VHCL
         ( mrn                           /** Mrn !== MRN ==! */
               , cag_mgmt_no                   /** N° Demande De La Création De Crn !== 화물관리번호 ==! */
               , vhcl_srno                     /** Numéro De Séquence De Véhicule !== 차량일련번호 ==! */
               , chss_no                       /** N° De Châssis !== 차대번호 ==! */
               , vhcl_rgsr_no                  /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */
               , vhcl_mnur_cd                  /** Code De Fabricant Du Véhicule !== 차량제조사코드 ==! */
               , vhcl_mdl_cd                   /** Code De Modèle Du Véhicule !== 차량모델코드 ==! */
               , vhcl_knd_nm                   /** Type De Véhicule !== 차량종류명 ==! */
               , vhcl_mnfc_yy                  /** Année De Fabrication De Véhicule !== 차량제조년도 ==! */
               , engn_clnd_gcnt                /** Nombre De Cylindres De Moteur !== 엔진기통개수 ==! */
               , vhcl_totl_wght                /** Poids total en charge !== 차량총중량 ==! */
               , del_yn                        /** Suppression On !== 삭제여부 ==! */
               , frst_regst_id                 /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , frst_rgsr_dttm                /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , last_chpr_id                  /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , last_chg_dttm                 /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
        )  VALUES (
                 #{mrn}                        /** Mrn !== MRN ==! */
               , #{cagMgmtNo}                  /** N° Demande De La Création De Crn !== 화물관리번호 ==! */
               , #{vhclSrno}                   /** Numéro De Séquence De Véhicule !== 차량일련번호 ==! */
               , #{chssNo}                     /** N° De Châssis !== 차대번호 ==! */
               , #{vhclRgsrNo}                 /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */
               , #{vhclMnurCd}                 /** Code De Fabricant Du Véhicule !== 차량제조사코드 ==! */
               , #{vhclMdlCd}                  /** Code De Modèle Du Véhicule !== 차량모델코드 ==! */
               , #{vhclKndNm}                  /** Type De Véhicule !== 차량종류명 ==! */
               , #{vhclMnfcYy}                 /** Année De Fabrication De Véhicule !== 차량제조년도 ==! */
               , #{engnClndGcnt}               /** Nombre De Cylindres De Moteur !== 엔진기통개수 ==! */
               , #{vhclTotlWght}               /** Poids total en charge !== 차량총중량 ==! */
               , 'N'                           /** Suppression On !== 삭제여부 ==! */
               , #{frstRegstId}                /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , #{lastChprId}                 /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
        )    
    ON CONFLICT ( MRN, CAG_MGMT_NO, VHCL_SRNO )
    DO UPDATE SET
          LAST_CHPR_ID     = #{lastChprId}
      , LAST_CHG_DTTM   = SYSTIMESTAMP
      , DEL_YN       = 'N'
      <if test="chssNo != null and chssNo != ''">
            , chss_no = #{chssNo}                            /** N° De Châssis !== 차대번호 ==! */ 
            </if>
            <if test="vhclRgsrNo != null and vhclRgsrNo != ''">
            , vhcl_rgsr_no = #{vhclRgsrNo}                   /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */ 
            </if>
            <if test="vhclMnurCd != null and vhclMnurCd != ''">
            , vhcl_mnur_cd = #{vhclMnurCd}                   /** Code De Fabricant Du Véhicule !== 차량제조사코드 ==! */ 
            </if>
            <if test="vhclMdlCd != null and vhclMdlCd != ''">
            , vhcl_mdl_cd = #{vhclMdlCd}                     /** Code De Modèle Du Véhicule !== 차량모델코드 ==! */ 
            </if>
            <if test="vhclKndNm != null and vhclKndNm != ''">
            , vhcl_knd_nm = #{vhclKndNm}                     /** Type De Véhicule !== 차량종류명 ==! */ 
            </if>
            <if test="vhclMnfcYy != null and vhclMnfcYy != ''">
            , vhcl_mnfc_yy = #{vhclMnfcYy}                   /** Année De Fabrication De Véhicule !== 차량제조년도 ==! */ 
            </if>
            <if test="engnClndGcnt != null and engnClndGcnt != ''">
            , engn_clnd_gcnt = #{engnClndGcnt}               /** Nombre De Cylindres De Moteur !== 엔진기통개수 ==! */ 
            </if>
            <if test="vhclTotlWght != null and vhclTotlWght != ''">
            , vhcl_totl_wght = #{vhclTotlWght}               /** Poids total en charge !== 차량총중량 ==! */ 
            </if>
  </insert>

  <!--
  Enregistrement de la déclaration de cargaison (remorque) !==화물신고서 (트레일러) 등록 한다.==!
  (Lee, Dongho)
  -->
  <insert id="insertCagDcshIptBlTrlrByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlTrlrVo" >
    /* CarCagDcshMdfyMapper.insertCagDcshIptBlVhclByMdfy */
    INSERT INTO TB_CARI_CAG_DCSH_BL_TRLR
           ( mrn                           /** Mrn !== MRN ==! */
               , cag_mgmt_no                   /** N° Demande De La Création De Crn !== 화물관리번호 ==! */
               , trlr_srno                     /** Numéro de série de la remorque !== 트레일러일련번호 ==! */
               , vhcl_rgsr_no                  /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */
               , chss_no                       /** N° De Châssis !== 차대번호 ==! */
               , trlr_stsz                     /** Gabarit De Remorque !== 트레일러규격 ==! */
               , del_yn                        /** Suppression On !== 삭제여부 ==! */
               , frst_regst_id                 /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , frst_rgsr_dttm                /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , last_chpr_id                  /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , last_chg_dttm                 /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
        )  VALUES (
                 #{mrn}                        /** Mrn !== MRN ==! */
               , #{cagMgmtNo}                  /** N° Demande De La Création De Crn !== 화물관리번호 ==! */
               , #{trlrSrno}                   /** Numéro de série de la remorque !== 트레일러일련번호 ==! */
               , #{vhclRgsrNo}                 /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */
               , #{chssNo}                     /** N° De Châssis !== 차대번호 ==! */
               , #{trlrStsz}                   /** Gabarit De Remorque !== 트레일러규격 ==! */
               , 'N'                           /** Suppression On !== 삭제여부 ==! */
               , #{frstRegstId}                /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , #{lastChprId}                 /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
        )
        ON CONFLICT ( MRN, CAG_MGMT_NO, TRLR_SRNO )
        DO UPDATE SET
       LAST_CHPR_ID     = #{lastChprId}
       , LAST_CHG_DTTM   = SYSTIMESTAMP
       , DEL_YN       = 'N'
       <if test="vhclRgsrNo != null and vhclRgsrNo != ''">
           , vhcl_rgsr_no = #{vhclRgsrNo}                   /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */ 
           </if>
           <if test="chssNo != null and chssNo != ''">
           , chss_no = #{chssNo}                            /** N° De Châssis !== 차대번호 ==! */ 
           </if>
           <if test="trlrStsz != null and trlrStsz != ''">
           , trlr_stsz = #{trlrStsz}                        /** Gabarit De Remorque !== 트레일러규격 ==! */ 
           </if>
  </insert>
  <!--
  Enregistrement de la déclaration de cargaison (train) !==화물신고서 (열차) 등록 한다.==!
  (Lee, Dongho)
  -->
  <insert id="insertCagDcshIptBlTrnByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlTrnVo" >
    /* CarCagDcshMdfyMapper.insertCagDcshIptBlTrnByMdfy */
    INSERT INTO TB_CARI_CAG_DCSH_BL_TRN
           ( mrn                           /** Mrn !== MRN ==! */
               , cag_mgmt_no                   /** N° Demande De La Création De Crn !== 화물관리번호 ==! */
               , trn_srno                      /** numéro de série du train !== 열차일련번호 ==! */
               , wgn_no                        /** N° De Wagon !== 왜건번호 ==! */
               , wgn_type                      /** type de wagon !== 왜건타입 ==! */
               , del_yn                        /** Suppression On !== 삭제여부 ==! */
               , frst_regst_id                 /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , frst_rgsr_dttm                /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , last_chpr_id                  /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , last_chg_dttm                 /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
               , trn_rgsr_no                   /** N° enregistrement du train !== 열차등록번호 ==! */
        )  VALUES (
                 #{mrn}                        /** Mrn !== MRN ==! */
               , #{cagMgmtNo}                  /** N° Demande De La Création De Crn !== 화물관리번호 ==! */
               , #{trnSrno}                    /** numéro de série du train !== 열차일련번호 ==! */
               , #{wgnNo}                      /** N° De Wagon !== 왜건번호 ==! */
               , #{wgnType}                    /** type de wagon !== 왜건타입 ==! */
               , 'N'                           /** Suppression On !== 삭제여부 ==! */
               , #{frstRegstId}                /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , #{lastChprId}                 /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
               , #{trnRgsrNo}                  /** N° enregistrement du train !== 열차등록번호 ==! */
        )
        ON CONFLICT ( MRN, CAG_MGMT_NO, TRN_SRNO )
        DO UPDATE SET
       LAST_CHPR_ID     = #{lastChprId}
       , LAST_CHG_DTTM   = SYSTIMESTAMP
       , DEL_YN       = 'N'
       <if test="wgnNo != null">
           , wgn_no = #{wgnNo}                              /** N° De Wagon !== 왜건번호 ==! */ 
           </if>
           <if test="wgnType != null">
           , wgn_type = #{wgnType}                          /** type de wagon !== 왜건타입 ==! */ 
           </if>
           <if test="trnRgsrNo != null">
           , trn_rgsr_no = #{trnRgsrNo}                     /** N° enregistrement du train !== 열차등록번호 ==! */ 
           </if>
  </insert>
  <!--
  Enregistrement de la déclaration de cargaison (Accomplissement d'exportation) !==화물신고서 (수출이행) 등록 한다.==!
  (Lee, Dongho)
  -->
  <insert id="insertCagDcshIptBlExfmByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlExfmVo" >
    /* CarCagDcshMdfyMapper.insertCagDcshIptBlExfmByMdfy */
    INSERT INTO TB_CARI_CAG_DCSH_BL_EXFM
           ( mrn                           /** Mrn !== MRN ==! */
               , cag_mgmt_no                   /** N° Demande De La Création De Crn !== 화물관리번호 ==! */
               , exp_ffmn_srno                 /** N° De Séquence De L'Apurement D'Exportation !== 수출이행일련번호 ==! */
               , exp_ffmn_tp_cd                /** Type D'Apurement D'Exportation !== 수출이행구분코드 ==! */
               , exp_ffmn_no                   /** N° D'Apurement D'Exportation !== 수출이행번호 ==! */
               , divd_shpm_yn                  /** Chargement Partiel On !== 분할선적여부 ==! */
               , divd_shpm_dgcnt               /** Nombre De Chargement Partiel !== 분할선적차수 ==! */
               , divd_shpm_last_yn             /** Dernier Chargement Partiel On !== 분할선적최종여부 ==! */
               , pckg_gcnt                     /** Nombre De Colis !== 포장개수 ==! */
               , pckg_ut_cd                    /** Code De L'Unité De Colis !== 포장단위코드 ==! */
               , ttwg                          /** Poids Brut !== 총중량 ==! */
               , del_yn                        /** Suppression On !== 삭제여부 ==! */
               , frst_regst_id                 /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , frst_rgsr_dttm                /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , last_chpr_id                  /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , last_chg_dttm                 /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
        )  VALUES (
                 #{mrn}                        /** Mrn !== MRN ==! */
               , #{cagMgmtNo}                  /** N° Demande De La Création De Crn !== 화물관리번호 ==! */
               , #{expFfmnSrno}                /** N° De Séquence De L'Apurement D'Exportation !== 수출이행일련번호 ==! */
               , #{expFfmnTpCd}                /** Type D'Apurement D'Exportation !== 수출이행구분코드 ==! */
               , REPLACE(#{expFfmnNo},'-','')  /** N° D'Apurement D'Exportation !== 수출이행번호 ==! */
               , #{divdShpmYn}                 /** Chargement Partiel On !== 분할선적여부 ==! */
               , #{divdShpmDgcnt}              /** Nombre De Chargement Partiel !== 분할선적차수 ==! */
               , #{divdShpmLastYn}             /** Dernier Chargement Partiel On !== 분할선적최종여부 ==! */
               , #{pckgGcnt}                   /** Nombre De Colis !== 포장개수 ==! */
               , #{pckgUtCd}                   /** Code De L'Unité De Colis !== 포장단위코드 ==! */
               , #{ttwg}                       /** Poids Brut !== 총중량 ==! */
               , 'N'                           /** Suppression On !== 삭제여부 ==! */
               , #{frstRegstId}                /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , #{lastChprId}                 /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
        )
        ON CONFLICT ( MRN, CAG_MGMT_NO, EXP_FFMN_SRNO )
        DO UPDATE SET
       LAST_CHPR_ID     = #{lastChprId}
       , LAST_CHG_DTTM   = SYSTIMESTAMP
       , DEL_YN       = 'N'
       <if test="expFfmnTpCd != null">
           , exp_ffmn_tp_cd = #{expFfmnTpCd}                /** Type D'Apurement D'Exportation !== 수출이행구분코드 ==! */ 
           </if>
           <if test="expFfmnNo != null">
           , exp_ffmn_no = #{expFfmnNo}                     /** N° D'Apurement D'Exportation !== 수출이행번호 ==! */ 
           </if>
           <if test="divdShpmYn != null">
           , divd_shpm_yn = #{divdShpmYn}                   /** Chargement Partiel On !== 분할선적여부 ==! */ 
           </if>
           <if test="divdShpmDgcnt != null">
           , divd_shpm_dgcnt = #{divdShpmDgcnt}             /** Nombre De Chargement Partiel !== 분할선적차수 ==! */ 
           </if>
           <if test="divdShpmLastYn != null">
           , divd_shpm_last_yn = #{divdShpmLastYn}          /** Dernier Chargement Partiel On !== 분할선적최종여부 ==! */ 
           </if>
           <if test="pckgGcnt != null">
           , pckg_gcnt = #{pckgGcnt}                        /** Nombre De Colis !== 포장개수 ==! */ 
           </if>
           <if test="pckgUtCd != null">
           , pckg_ut_cd = #{pckgUtCd}                       /** Code De L'Unité De Colis !== 포장단위코드 ==! */ 
           </if>
           <if test="ttwg != null">
           , ttwg = #{ttwg}                                 /** Poids Brut !== 총중량 ==! */ 
           </if>
  </insert>
    
  <!--
  Enregistrement de la déclaration de cargaison (BL) !==화물신고서 (BL) 등록 한다.==!
  (Lee, Dongho) 
  --> 
  <insert id="insertCagDcshIptBlByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* CarCagDcshMdfyMapper.insertCagDcshIptBlByMdfy */
    INSERT INTO TB_CARI_CAG_DCSH_BL 
           ( mrn                           /** Mrn !== MRN ==! */
               , cag_mgmt_no                   /** N° Demande De La Création De Crn !== 화물관리번호 ==! */
               , msn                           /** Msn !== MSN ==! */
               , hsn                           /** Hsn !== HSN ==! */
               , bl_no                         /** N° De Bl !== BL번호 ==! */
               , hbl_no                        /** N° de House B/L !== HBL번호 ==! */
               , cag_tp_cd                     /** Type de flux !== 화물구분코드 ==! */
               , bl_tp_cd                      /** Code De Catégorie De B/L !== BL구분코드 ==! */
               , bl_pt_cd                      /** Code De Type De Bl !== BL유형코드 ==! */
               , frwr_cd                       /** Code De Groupeur !== 포워더코드 ==! */
               , load_regn_cd                  /** Code De Lieu De Chargement !== 적재지역코드 ==! */
               , ldun_regn_cd                  /** Code De Lieu De Déchargement !== 하역지역코드 ==! */
               , ibobz_cd                      /** Code de zone sous douane !== 보세구역코드 ==! */
               , stvd_cd                       /** Code De Stevedoremanutentionnaire !== 하역업자코드 ==! */
<!--                , trns_regn_cd                  /** Code de lieu de transit international !== 트랜짓지역코드 ==! */ -->
               , trnh_regn_cd                  /** Code De Région De Transbordement !== 환적지역코드 ==! */
               , cag_chrc_cd                   /** Nature De Cargaison !== 화물특성코드 ==! */
               , cmdt_knd_cd                   /** Nature De Marchandise !== 물품종류코드 ==! */
               , cas_no                        /** Numero CAS !== CAS번호 ==! */
               , undg_id                        /** Identifiant UNDG !== UN번호 ==! */
               , send_way                      /** Mode de livraison !== 발송방식 ==! */
               , pdls_nm                       /** Nom De L'Article !== 품목명 ==! */
               , pckg_gcnt                     /** Nombre De Colis !== 포장개수 ==! */
               , ecntr_wght                    /** Tare De Conteneur(S) À Vide !== 공컨테이너중량 ==! */
               , ttwg                          /** Poids Brut !== 총중량 ==! */
               , ntwg                          /** Poids Net !== 순중량 ==! */
               , cbm_vol                       /** Volume (Mtq) !== 입방미터용적 ==! */
               , lir_vol                       /** Volume (Litre) !== 리터용적 ==! */
               , hdcb_tp_cd                    /** Code de type d'hydrocarbure !== 탄화수소구분코드 ==! */
               , shmr_cn                       /** Marque De Colis !== 화인내용 ==! */
               , add_info_cn                   /** Info Supplémentaire  !== 부가정보내용 ==! */
               , cntr_gcnt                     /** Nombre De Conteneurs !== 컨테이너개수 ==! */
               , vhcl_gcnt                     /** Nombre De Véhicules !== 차량개수 ==! */
               , prpm_dfpm_cach_tp_cd          /** Ind. fret prépayé/dû !== 선불후불운임구분코드 ==! */
               , cmdt_amt                      /** Valeur de marchandise !== 물품금액 ==! */
               , cmdt_amt_curr_cd              /** Article Montant Code de devise !== 물품금액통화코드 ==! */
               , exppn_txpr_idfy_no            /** NIF de l'exportateur !== 수출자납세자식별번호 ==! */
               , exppn_nm                      /** Nom De L'Exportateur !== 수출자명 ==! */
               , exppn_addr_nm                 /** Adresse De L'Exportateur !== 수출자주소명 ==! */
               , exppn_tlph_no                 /** Téléphone De L'Exportateur !== 수출자전화번호 ==! */
               , exppn_eml                     /** Email De L'Exportateur !== 수출자이메일 ==! */
               , abrd_frwr_nm                  /** Nom De L'Expéditeur !== 국외포워더명 ==! */
               , abrd_frwr_addr_nm             /** Adresse De L'Expéditeur !== 국외포워더주소명 ==! */
               , abrd_frwr_tlph_no             /** Téléphone De L'Expéditeur !== 국외포워더전화번호 ==! */
               , abrd_frwr_eml                 /** Email De L'Expéditeur !== 국외포워더이메일 ==! */
               , cnsi_txpr_idfy_no             /** Niu Du Destinataire !== 수하인납세자식별번호 ==! */
               , cnsi_nm                       /** Nom de destinataire !== 수하인명 ==! */
               , cnsi_addr_nm                  /** Adresse Du Destinataire !== 수하인주소명 ==! */
               , cnsi_tlph_no                  /** N° de téléphone de destinataire !== 수하인전화번호 ==! */
               , cnsi_eml                      /** E-mail de destinataire !== 수하인이메일 ==! */
               , ntpr_nm                       /** Nom De La Partie À Notifier !== 통지처명 ==! */
               , ntpr_addr_nm                  /** Adresse De La Partie À Notifier !== 통지처주소명 ==! */
               , ntpr_tlph_no                  /** Téléphone De La Partie À Notifier !== 통지처전화번호 ==! */
               , ntpr_eml                      /** Email De La Partie À Notifier !== 통지처이메일 ==! */
               , selc_trgt_yn                  /** Sélectivité O/N !== 선별대상여부 ==! */
               , rmrk_cn                       /** Contenu De Remarque !== 비고내용 ==! */
               , bf_cag_mgmt_no                /** Crn Précédent !== 이전화물관리번호 ==! */
               , bl_mdfy_tp_cd                 /** Code de catégorie de rectification de BL !== BL정정구분코드 ==! */
               , coat_trnp_yn                  /** Cabotage On !== 연안운송여부 ==! */
               , al_hbl_gcnt                   /** Nombre Total De Sous Bl !== 전체HBL개수 ==! */
               , del_yn                        /** Suppression On !== 삭제여부 ==! */
               , frst_regst_id                 /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , frst_rgsr_dttm                /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , last_chpr_id                  /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , last_chg_dttm                 /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
               , hs_cd                         /** Code Sh !== HS코드 ==! */
               , pckg_ut_cd                    /** Code De L'Unité De Colis !== 포장단위코드 ==! */
               , ldun_yn                       /** TODO:번역필요LKS !== 하역여부 ==! */
               , cnsi_txpr_idfy_no_nin         /** NIN de destinataire !== 수하인납세자식별번호(NIN) ==! */
               , exppn_txpr_idfy_no_nin        /** NIN de l'exportateur !== 수출자납세자식별번호(NIN) ==! */
         , BL_PBLS_DT /** Date de délivrance du B/L(LTA) !== BL발행일자 ==! */
               , UNDG_GD_CD /** Code de classe UNDG !== UNDG등급 ==! */
               , CHER_YN /** affréteur d’espace/slot !== 용선여부 ==! */
               , CHER_GVNM_NM /** nom de l’affréteur/slotteur !== 용선이름 ==! */
               , CHER_ADDR_NM /** adresse affréteur/slotteur !== 용선주소 ==! */
         
             )
    VALUES (
                 #{mrn}                        /** Mrn !== MRN ==! */
               , #{cagMgmtNo}                  /** N° Demande De La Création De Crn !== 화물관리번호 ==! */
               , #{msn}                        /** Msn !== MSN ==! */
               , #{hsn}                        /** Hsn !== HSN ==! */
               , #{blNo}                       /** N° De Bl !== BL번호 ==! */
               , #{hblNo}                      /** N° de House B/L !== HBL번호 ==! */
               , #{cagTpCd}                    /** Type de flux !== 화물구분코드 ==! */
               , #{blTpCd}                     /** Code De Catégorie De B/L !== BL구분코드 ==! */
               , #{blPtCd}                     /** Code De Type De Bl !== BL유형코드 ==! */
               , #{frwrCd}                     /** Code De Groupeur !== 포워더코드 ==! */
               , #{loadRegnCd}                 /** Code De Lieu De Chargement !== 적재지역코드 ==! */
               , #{ldunRegnCd}                 /** Code De Lieu De Déchargement !== 하역지역코드 ==! */
               , #{ibobzCd}                    /** Code de zone sous douane !== 보세구역코드 ==! */
               , #{stvdCd}                     /** Code De Stevedoremanutentionnaire !== 하역업자코드 ==! */
<!--                , #{trnsRegnCd}                 /** Code de lieu de transit international !== 트랜짓지역코드 ==! */ -->
               , #{trnhRegnCd}                 /** Code De Région De Transbordement !== 환적지역코드 ==! */
               , #{cagChrcCd}                  /** Nature De Cargaison !== 화물특성코드 ==! */
               , #{cmdtKndCd}                  /** Nature De Marchandise !== 물품종류코드 ==! */
               , #{casNo}                      /** Numero CAS !== CAS번호 ==! */
               , #{undgId}                      /** Identifiant UNDG !== UN번호 ==! */
               , #{sendWay}                    /** Mode de livraison !== 발송방식 ==! */
               , #{pdlsNm}                     /** Nom De L'Article !== 품목명 ==! */
               , #{pckgGcnt}                   /** Nombre De Colis !== 포장개수 ==! */
               , #{ecntrWght}                  /** Tare De Conteneur(S) À Vide !== 공컨테이너중량 ==! */
               , #{ttwg}                       /** Poids Brut !== 총중량 ==! */
               , #{ntwg}                       /** Poids Net !== 순중량 ==! */
               , #{cbmVol}                     /** Volume (Mtq) !== 입방미터용적 ==! */
               , #{lirVol}                     /** Volume (Litre) !== 리터용적 ==! */
               , #{hdcbTpCd}                   /** Code de type d'hydrocarbure !== 탄화수소구분코드 ==! */
               , #{shmrCn}                     /** Marque De Colis !== 화인내용 ==! */
               , #{addInfoCn}                  /** Info Supplémentaire  !== 부가정보내용 ==! */
               , #{cntrGcnt}                   /** Nombre De Conteneurs !== 컨테이너개수 ==! */
               , #{vhclGcnt}                   /** Nombre De Véhicules !== 차량개수 ==! */
               , #{prpmDfpmCachTpCd}           /** Ind. fret prépayé/dû !== 선불후불운임구분코드 ==! */
               , #{cmdtAmt}                    /** Valeur de marchandise !== 물품금액 ==! */
               , #{cmdtAmtCurrCd}              /** Article Montant Code de devise !== 물품금액통화코드 ==! */
               , #{exppnTxprIdfyNo}            /** NIF de l'exportateur !== 수출자납세자식별번호 ==! */
               , #{exppnNm}                    /** Nom De L'Exportateur !== 수출자명 ==! */
               , #{exppnAddrNm}                /** Adresse De L'Exportateur !== 수출자주소명 ==! */
               , #{exppnTlphNo}                /** Téléphone De L'Exportateur !== 수출자전화번호 ==! */
               , #{exppnEml}                   /** Email De L'Exportateur !== 수출자이메일 ==! */
               , #{abrdFrwrNm}                 /** Nom De L'Expéditeur !== 국외포워더명 ==! */
               , #{abrdFrwrAddrNm}             /** Adresse De L'Expéditeur !== 국외포워더주소명 ==! */
               , #{abrdFrwrTlphNo}             /** Téléphone De L'Expéditeur !== 국외포워더전화번호 ==! */
               , #{abrdFrwrEml}                /** Email De L'Expéditeur !== 국외포워더이메일 ==! */
               , #{cnsiTxprIdfyNo}             /** Niu Du Destinataire !== 수하인납세자식별번호 ==! */
               , #{cnsiNm}                     /** Nom de destinataire !== 수하인명 ==! */
               , #{cnsiAddrNm}                 /** Adresse Du Destinataire !== 수하인주소명 ==! */
               , #{cnsiTlphNo}                 /** N° de téléphone de destinataire !== 수하인전화번호 ==! */
               , #{cnsiEml}                    /** E-mail de destinataire !== 수하인이메일 ==! */
               , #{ntprNm}                     /** Nom De La Partie À Notifier !== 통지처명 ==! */
               , #{ntprAddrNm}                 /** Adresse De La Partie À Notifier !== 통지처주소명 ==! */
               , #{ntprTlphNo}                 /** Téléphone De La Partie À Notifier !== 통지처전화번호 ==! */
               , #{ntprEml}                    /** Email De La Partie À Notifier !== 통지처이메일 ==! */
               , #{selcTrgtYn}                 /** Sélectivité O/N !== 선별대상여부 ==! */
               , #{rmrkCn}                     /** Contenu De Remarque !== 비고내용 ==! */
               , #{bfCagMgmtNo}                /** Crn Précédent !== 이전화물관리번호 ==! */
               , #{blMdfyTpCd}                 /** Code de catégorie de rectification de BL !== BL정정구분코드 ==! */
               , #{coatTrnpYn}                 /** Cabotage On !== 연안운송여부 ==! */
               , #{alHblGcnt}                  /** Nombre Total De Sous Bl !== 전체HBL개수 ==! */
               , 'N'                           /** Suppression On !== 삭제여부 ==! */
               , #{frstRegstId}                /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , #{lastChprId}                 /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
               , #{hsCd}                       /** Code Sh !== HS코드 ==! */
               , #{pckgUtCd}                   /** Code De L'Unité De Colis !== 포장단위코드 ==! */
               , #{ldunYn}                     /** TODO:번역필요LKS !== 하역여부 ==! */
               , #{cnsiTxprIdfyNoNin}          /** NIN de destinataire !== 수하인납세자식별번호(NIN) ==! */
               , #{exppnTxprIdfyNoNin}         /** NIN de l'exportateur !== 수출자납세자식별번호(NIN) ==! */
         , to_char(to_date(#{blPblsDt}, 'dd/mm/yyyy'), 'yyyymmdd') /** Date de délivrance du B/L(LTA) !== BL발행일자 ==! */
         , #{undgGdCd} /** Code de classe UNDG !== UNDG등급 ==! */
         , #{cherYn} /** affréteur d’espace/slot !== 용선여부 ==! */
         , #{cherGvnmNm} /** nom de l’affréteur/slotteur !== 용선이름 ==! */
         , #{cherAddrNm} /** adresse affréteur/slotteur !== 용선주소 ==! */
             )
    ON CONFLICT ( MRN, CAG_MGMT_NO )
    DO UPDATE SET
         del_yn = 'N'                                  /** Suppression ON !== 삭제여부 ==! */
             , last_chpr_id = #{lastChprId}                  /** ID du modificateur final !== 최종변경자ID ==! */
             , last_chg_dttm = SYSTIMESTAMP                  /** Date et heure de modification finale !== 최종변경일시 ==! */
             <if test="msn != null">, MSN = #{msn}                                                              /** MSN !==MSN==! */  </if>
       <if test="hsn != null">, HSN = #{hsn}                                                              /** HSN !==HSN==! */  </if>
       <if test="blNo != null">, BL_NO = #{blNo}                                                  /** N° de BL !==BL번호==! */  </if>
       <if test="hblNo != null">, HBL_NO = #{hblNo}                                                       /** N° de sous BL !==HBL번호==! */  </if>
       <if test="cagTpCd != null">, CAG_TP_CD = #{cagTpCd}                                                /** Nature de type de cargaison !==화물구분코드==! */  </if>
       <if test="blTpCd != null">, BL_TP_CD = #{blTpCd}                                                   /** Type de BL !==BL구분코드==! */  </if>
       <if test="blPtCd != null">, BL_PT_CD = #{blPtCd}                                                   /** Code de type de BL !==BL유형코드==! */  </if>
             <if test="blMdfyTpCd != null and blMdfyTpCd != ''">
             , bl_mdfy_tp_cd = #{blMdfyTpCd}                  /** Code de catégorie de rectification de BL !== BL정정구분코드 ==! */ 
             </if>
             , frwr_cd = #{frwrCd}                            /** Code De Groupeur !== 포워더코드 ==! */
             , load_regn_cd = #{loadRegnCd}                   /** Code De Lieu De Chargement !== 적재지역코드 ==! */
             , ldun_regn_cd = #{ldunRegnCd}                   /** Code De Lieu De Déchargement !== 하역지역코드 ==! */
             , ibobz_cd = #{ibobzCd}                          /** Code de zone sous douane !== 보세구역코드 ==! */
             , stvd_cd = #{stvdCd}                            /** Code De Stevedoremanutentionnaire !== 하역업자코드 ==! */
<!--              , trns_regn_cd = #{trnsRegnCd}                   /** Code de lieu de transit international !== 트랜짓지역코드 ==! */ -->
             , trnh_regn_cd = #{trnhRegnCd}                   /** Code De Région De Transbordement !== 환적지역코드 ==! */
             , cag_chrc_cd = #{cagChrcCd}                     /** Nature De Cargaison !== 화물특성코드 ==! */
             , cmdt_knd_cd = #{cmdtKndCd}                     /** Nature De Marchandise !== 물품종류코드 ==! */
             , cas_no = #{casNo}                              /** Numero CAS !== CAS번호 ==! */
             , undg_id = #{undgId}                              /** Identifiant UNDG !== UN번호 ==! */
             , send_way = #{sendWay}                          /** Mode de livraison !== 발송방식 ==! */
             , pdls_nm = #{pdlsNm}                            /** Nom De L'Article !== 품목명 ==! */
             , pckg_gcnt = #{pckgGcnt}                        /** Nombre De Colis !== 포장개수 ==! */
             , ecntr_wght = #{ecntrWght}                      /** Tare De Conteneur(S) À Vide !== 공컨테이너중량 ==! */
             , ttwg = #{ttwg}                                 /** Poids Brut !== 총중량 ==! */
             , ntwg = #{ntwg}                                 /** Poids Net !== 순중량 ==! */
             , cbm_vol = #{cbmVol}                            /** Volume (Mtq) !== 입방미터용적 ==! */
             , lir_vol = #{lirVol}                            /** Volume (Litre) !== 리터용적 ==! */
             , hdcb_tp_cd = #{hdcbTpCd}                       /** Code de type d'hydrocarbure !== 탄화수소구분코드 ==! */
             , shmr_cn = #{shmrCn}                            /** Marque De Colis !== 화인내용 ==! */
             , add_info_cn = #{addInfoCn}                     /** Info Supplémentaire  !== 부가정보내용 ==! */
             , cntr_gcnt = #{cntrGcnt}                        /** Nombre De Conteneurs !== 컨테이너개수 ==! */
             , vhcl_gcnt = #{vhclGcnt}                        /** Nombre De Véhicules !== 차량개수 ==! */
             , prpm_dfpm_cach_tp_cd = #{prpmDfpmCachTpCd}     /** Ind. fret prépayé/dû !== 선불후불운임구분코드 ==! */
             , cmdt_amt = #{cmdtAmt}                          /** Valeur de marchandise !== 물품금액 ==! */
             , cmdt_amt_curr_cd = #{cmdtAmtCurrCd}            /** Article Montant Code de devise !== 물품금액통화코드 ==! */
             , exppn_txpr_idfy_no = #{exppnTxprIdfyNo}        /** NIF de l'exportateur !== 수출자납세자식별번호 ==! */
             , exppn_nm = #{exppnNm}                          /** Nom De L'Exportateur !== 수출자명 ==! */
             , exppn_addr_nm = #{exppnAddrNm}                 /** Adresse De L'Exportateur !== 수출자주소명 ==! */
             , exppn_tlph_no = #{exppnTlphNo}                 /** Téléphone De L'Exportateur !== 수출자전화번호 ==! */
             , exppn_eml = #{exppnEml}                        /** Email De L'Exportateur !== 수출자이메일 ==! */
             , abrd_frwr_nm = #{abrdFrwrNm}                   /** Nom De L'Expéditeur !== 국외포워더명 ==! */
             , abrd_frwr_addr_nm = #{abrdFrwrAddrNm}          /** Adresse De L'Expéditeur !== 국외포워더주소명 ==! */
             , abrd_frwr_tlph_no = #{abrdFrwrTlphNo}          /** Téléphone De L'Expéditeur !== 국외포워더전화번호 ==! */
             , abrd_frwr_eml = #{abrdFrwrEml}                 /** Email De L'Expéditeur !== 국외포워더이메일 ==! */
             , cnsi_txpr_idfy_no = #{cnsiTxprIdfyNo}          /** Niu Du Destinataire !== 수하인납세자식별번호 ==! */
             , cnsi_nm = #{cnsiNm}                            /** Nom de destinataire !== 수하인명 ==! */
             , cnsi_addr_nm = #{cnsiAddrNm}                   /** Adresse Du Destinataire !== 수하인주소명 ==! */
             , cnsi_tlph_no = #{cnsiTlphNo}                   /** N° de téléphone de destinataire !== 수하인전화번호 ==! */
             , cnsi_eml = #{cnsiEml}                          /** E-mail de destinataire !== 수하인이메일 ==! */
             , ntpr_nm = #{ntprNm}                            /** Nom De La Partie À Notifier !== 통지처명 ==! */
             , ntpr_addr_nm = #{ntprAddrNm}                   /** Adresse De La Partie À Notifier !== 통지처주소명 ==! */
             , ntpr_tlph_no = #{ntprTlphNo}                   /** Téléphone De La Partie À Notifier !== 통지처전화번호 ==! */
             , ntpr_eml = #{ntprEml}                          /** Email De La Partie À Notifier !== 통지처이메일 ==! */
             , selc_trgt_yn = #{selcTrgtYn}                   /** Sélectivité O/N !== 선별대상여부 ==! */
             , rmrk_cn = #{rmrkCn}                            /** Contenu De Remarque !== 비고내용 ==! */
             , bf_cag_mgmt_no = #{bfCagMgmtNo}                /** Crn Précédent !== 이전화물관리번호 ==! */
             , coat_trnp_yn = #{coatTrnpYn}                   /** Cabotage On !== 연안운송여부 ==! */
             , al_hbl_gcnt = #{alHblGcnt}                     /** Nombre Total De Sous Bl !== 전체HBL개수 ==! */
             , hs_cd = #{hsCd}                                /** Code Sh !== HS코드 ==! */
             , pckg_ut_cd = #{pckgUtCd}                       /** Code De L'Unité De Colis !== 포장단위코드 ==! */
             , ldun_yn = #{ldunYn}                            /** TODO:번역필요LKS !== 하역여부 ==! */
             , cnsi_txpr_idfy_no_nin = #{cnsiTxprIdfyNoNin}   /** NIN de destinataire !== 수하인납세자식별번호(NIN) ==! */
             , exppn_txpr_idfy_no_nin = #{exppnTxprIdfyNoNin}  /** NIN de l'exportateur !== 수출자납세자식별번호(NIN) ==! */
             , BL_PBLS_DT = to_char(to_date(#{blPblsDt}, 'dd/mm/yyyy'), 'yyyymmdd') /** Date de délivrance du B/L(LTA) !== BL발행일자 ==! */
       , UNDG_GD_CD = #{undgGdCd} /** Code de classe UNDG !== UNDG등급 ==! */
       , CHER_YN = #{cherYn} /** affréteur d’espace/slot !== 용선여부 ==! */
       , CHER_GVNM_NM = #{cherGvnmNm} /** nom de l’affréteur/slotteur !== 용선이름 ==! */
       , CHER_ADDR_NM = #{cherAddrNm} /** adresse affréteur/slotteur !== 용선주소 ==! */
    </insert>
  
  <!--
  Supprimer la Rectifier la déclaration de cargaison (Conteneur) !==화물신고서 정정 (컨테이너) 삭제 한다.==!
  (Lee, Dongho)
  --> 
  <update id="deleteCagDcshIptBlCntrByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* CarCagDcshMdfyMapper.deleteCagDcshIptBlCntrByMdfy */
    UPDATE TB_CARI_CAG_DCSH_BL_CNTR
    SET 
      DEL_YN        = 'Y'                     /** Suppression ON !==삭제여부==! */
    WHERE  1=1 
      AND MRN          = #{mrn}                      /** MRN !==MRN==! */
      AND CAG_MGMT_NO  = #{cagMgmtNo}                 /** CRN !==화물관리번호==! */
  </update>
  
  <!--
  Supprimer la Rectifier la déclaration de cargaison (véhicule) !==화물신고서 정정 (자동차) 삭제 한다.==!
  (Lee, Dongho)
  --> 
  <update id="deleteCagDcshIptBlVhclByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* CarCagDcshMdfyMapper.deleteCagDcshIptBlVhclByMdfy */
    UPDATE TB_CARI_CAG_DCSH_BL_VHCL
    SET 
      DEL_YN        = 'Y'                     /** Suppression ON !==삭제여부==! */
    WHERE  1=1 
      AND MRN          = #{mrn}                      /** MRN !==MRN==! */
      AND CAG_MGMT_NO  = #{cagMgmtNo}                 /** CRN !==화물관리번호==! */
  </update>
  
  <!--
  Supprimer la Rectifier la déclaration de cargaison (remorque) !==화물신고서 정정 (트레일러) 삭제 한다.==!
  (Lee, Dongho)
  --> 
  <update id="deleteCagDcshIptBlTrlrByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* CarCagDcshMdfyMapper.deleteCagDcshIptBlTrlrByMdfy */
    UPDATE TB_CARI_CAG_DCSH_BL_TRLR
    SET 
      DEL_YN        = 'Y'                     /** Suppression ON !==삭제여부==! */
    WHERE  1=1 
      AND MRN          = #{mrn}                      /** MRN !==MRN==! */
      AND CAG_MGMT_NO  = #{cagMgmtNo}                 /** CRN !==화물관리번호==! */
  </update>

  <!--
  Supprimer la Rectifier la déclaration de cargaison (train) !==화물신고서 정정 (열차) 삭제 한다.==!
  (Lee, Dongho)
  -->
  <update id="deleteCagDcshIptBlTrnByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* CarCagDcshMdfyMapper.deleteCagDcshIptBlTrnByMdfy */
    UPDATE TB_CARI_CAG_DCSH_BL_TRN
    SET 
      DEL_YN        = 'Y'                     /** Suppression ON !==삭제여부==! */
    WHERE  1=1 
      AND MRN          = #{mrn}                      /** MRN !==MRN==! */
      AND CAG_MGMT_NO  = #{cagMgmtNo}                 /** CRN !==화물관리번호==! */
  </update>

  <!--
  Supprimer la Rectifier la déclaration de cargaison (Accomplissement d'exportation) !==화물신고서 정정 (수출이행) 삭제 한다.==!
  (Lee, Dongho)
  -->
  <update id="deleteCagDcshIptBlExfmByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* CarCagDcshMdfyMapper.deleteCagDcshIptBlExfmByMdfy */
    UPDATE TB_CARI_CAG_DCSH_BL_EXFM
    SET 
      DEL_YN        = 'Y'                     /** Suppression ON !==삭제여부==! */
    WHERE  1=1 
      AND MRN          = #{mrn}                      /** MRN !==MRN==! */
      AND CAG_MGMT_NO  = #{cagMgmtNo}                 /** CRN !==화물관리번호==! */
  </update>
  

  <!--
  Modification des sommaires de la déclaration de cargaison (BL, Poids brut, Nombre de colis, de conteneurs, de véhicules)
  * !== 화물신고서 요약정보 변경(BL,포장,총중량,컨테이너, 차량 개수) ==!
  (Lee, Dongho)
  --> 
  <update id="updateCagDcshIptSummaryInfo" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* CarCagDcshMdfyMapper.updateCagDcshIptSummaryInfo */
    UPDATE TB_CARI_CAG_DCSH M
       SET AL_BL_GCNT   = ( SELECT COUNT(1)          
                              FROM TB_CARI_CAG_DCSH_BL               
                             WHERE MRN = M.MRN
                               AND BL_PT_CD='M' 
                               AND DEL_YN = 'N') /** Nombre total de BL !==전체BL개수==! */
         , AL_PCKG_GCNT = ( SELECT NVL(SUM(PCKG_GCNT), 0) 
                              FROM TB_CARI_CAG_DCSH_BL
                             WHERE MRN = M.MRN
                               AND BL_PT_CD='M' 
                               AND DEL_YN = 'N') /** Nombre total de colis  !==전체포장개수==! */
         , AL_TTWG     = ( SELECT NVL(SUM(DECODE(CAG_CHRC_CD, '9', LIR_VOL, TTWG)), 0)
                              FROM TB_CARI_CAG_DCSH_BL               
                             WHERE MRN = M.MRN
                               AND BL_PT_CD='M' 
                               AND DEL_YN = 'N') /** Poids brut total !==전체총중량==! */
         , AL_CNTR_GCNT = ( SELECT COUNT(DISTINCT C.cntr_no )
                              FROM TB_CARI_CAG_DCSH_BL B
                             INNER JOIN TB_CARI_CAG_DCSH_BL_CNTR C
                                ON B.MRN = C.MRN
                               AND B.cag_mgmt_no = C.cag_mgmt_no
                             WHERE B.MRN = M.MRN
                               AND B.BL_PT_CD='M'
                               AND B.DEL_YN = 'N'
                               AND C.DEL_YN = 'N'
                           ) /** Nombre total de conteneurs !==전체컨테이너개수==! */
       , AL_VHCL_GCNT   = ( SELECT NVL(SUM(VHCL_GCNT), 0)
                              FROM TB_CARI_CAG_DCSH_BL
                             WHERE MRN = M.MRN
                               AND BL_PT_CD = 'M' 
                               AND DEL_YN = 'N') /** Nombre total de véhicules !==전체차량개수==! */
       , AL_NTWG        = ( SELECT NVL(SUM(DECODE(CAG_CHRC_CD, '9', LIR_VOL, NTWG)), 0)
                              FROM TB_CARI_CAG_DCSH_BL
                             WHERE MRN = M.MRN
                               AND BL_PT_CD='M'
                               AND DEL_YN = 'N')      /** Poids Net Total !== 전체순중량 ==! */
         , LDUN_BL_GCNT = ( SELECT COUNT(1)
                              FROM TB_CARI_CAG_DCSH_BL
                             WHERE MRN = M.MRN
                             AND BL_PT_CD='M' 
                             AND DEL_YN = 'N'
                               AND nvl(LDUN_YN,'N') = 'Y'
                           )  /** Nombre de BL déchargé !== 양하BL개수 ==! */       
         , AL_ECNTR_CNT = ( SELECT COUNT(Y.CNTR_SRNO)
                              FROM TB_CARI_CAG_DCSH_BL X
                              JOIN TB_CARI_CAG_DCSH_BL_CNTR Y
                                ON X.MRN = Y.MRN
                               AND X.CAG_MGMT_NO = X.CAG_MGMT_NO
                             WHERE X.CAG_CHRC_CD = '7'
                               AND X.BL_PT_CD = 'M'
                               AND X.DEL_YN = 'N'
                               AND Y.DEL_YN = 'N'
                               AND X.MRN = M.MRN
                          )
    WHERE 1=1
      AND M.DEL_YN = 'N'
      AND M.MRN = #{mrn}      /** MRN !==MRN==! */
  </update>
  
  <!--
  Modification des sommaires de la déclaration de cargaison (BL, Poids brut, Nombre de colis, de conteneurs, de véhicules)
  * !== 화물신고서 요약정보 변경(BL,포장,총중량,컨테이너, 차량 개수) ==!
  (Lee, Dongho)
  --> 
  <update id="updateCagDcshIptBlSummaryInfo" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* CarCagDcshMdfyMapper.updateCagDcshIptBlSummaryInfo */
    UPDATE TB_CARI_CAG_DCSH_BL a
       SET PCKG_GCNT = ( SELECT NVL(SUM(PCKG_GCNT), 0)
                           FROM TB_CARI_CAG_DCSH_BL   
                           WHERE MRN = #{mrn} 
                             AND BL_NO = #{blNo} 
                             AND BL_PT_CD='H' AND DEL_YN = 'N'
                       ) /** Nombre total de colis  !==전체포장개수==! */
         , LIR_VOL = ( SELECT NVL(SUM(LIR_VOL), 0)    
                         FROM TB_CARI_CAG_DCSH_BL   
                        WHERE MRN = #{mrn} 
                          AND BL_NO = #{blNo} 
                          AND BL_PT_CD='H' 
                          AND CAG_CHRC_CD = '9'
                          AND DEL_YN = 'N'
                     ) /** Volume (Litre) !==리터용적==! */
         , TTWG = ( SELECT NVL(SUM(TTWG), 0)    
                      FROM TB_CARI_CAG_DCSH_BL   
                     WHERE MRN = #{mrn} 
                       AND BL_NO = #{blNo} 
                       AND BL_PT_CD='H' 
                       AND CAG_CHRC_CD != '9'
                       AND DEL_YN = 'N'
                  ) /** Poids brut total !==전체총중량==! */
             , NTWG = ( SELECT NVL(SUM(NTWG), 0)    
                          FROM TB_CARI_CAG_DCSH_BL   
                         WHERE MRN = #{mrn} 
                           AND BL_NO = #{blNo} 
                           AND BL_PT_CD='H' 
                           AND CAG_CHRC_CD != '9'
                           AND DEL_YN = 'N'
                      ) /** Poids Net Total !== 전체순중량 ==! */          
         , CNTR_GCNT = ( SELECT COUNT(*) 
                               FROM TB_CARI_CAG_DCSH_BL_CNTR X
                              WHERE X.MRN = A.MRN
                                AND X.CAG_MGMT_NO = A.CAG_MGMT_NO
                                AND X.DEL_YN = 'N'   
                           ) /** Nombre total de conteneurs !==전체컨테이너개수==! */
         , VHCL_GCNT = ( SELECT COUNT(1)
                       FROM (SELECT VHCL.CHSS_NO
                             FROM TB_CARI_CAG_DCSH_BL BL, 
                                  TB_CARI_CAG_DCSH_BL_VHCL VHCL
                            WHERE BL.MRN = VHCL.MRN 
                            AND BL.CAG_MGMT_NO = VHCL.CAG_MGMT_NO 
                            AND BL.MRN = #{mrn} 
                            AND BL.BL_NO = #{blNo}
                            AND BL.BL_PT_CD='H'
                            AND BL.DEL_YN = 'N'
                            AND VHCL.DEL_YN = 'N'
                        )
                   ) /** Nombre total de véhicules !==전체차량개수==! */
         , PCKG_UT_CD = ( SELECT PCKG_UT_CD
                                FROM TB_CARI_CAG_DCSH_BL
                               WHERE MRN = #{mrn} 
                                 AND BL_NO = #{blNo} 
                                 AND BL_PT_CD='H' 
                                 AND DEL_YN = 'N'
                               ORDER BY TTWG DESC
                               LIMIT 1
                     ) /** Code De L'Unité De Colis !== 포장단위코드 ==! */
             , AL_HBL_GCNT = ( SELECT count(*)
                                 FROM TB_CARI_CAG_DCSH_BL
                                WHERE MRN = #{mrn} 
                                  AND BL_NO = #{blNo} 
                                  AND BL_PT_CD='H' 
                                  AND DEL_YN = 'N'
               ) /** Nombre Total De Sous Bl !== 전체HBL개수 ==! */           
     WHERE 1=1
       AND MRN = #{mrn}  /** MRN !==MRN==! */
       AND BL_NO = #{blNo}
       AND BL_PT_CD = 'M'
       AND DEL_YN = 'N'
  </update>
  

  <!--
  [BL] Numéroter l'ordre.      !== [BL] 순번을 채번한다. ==!
  (Lee, Dongho)
  --> 
  <select id="selectCagDcshIptBlNewBlSrno" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="java.math.BigDecimal">
    /* CarCagDcshMdfyMapper.selectCagDcshIptBlNewBlSrno */
    SELECT NVL(MAX(BL_SRNO), 0) + 1
    FROM alpassext.TB_CARE_CAG_DCSH_BL
    WHERE CAG_DCSH_RGSR_MGMT_NO = #{cagDcshRgsrMgmtNo}
  </select>
  
  <!--
  [BL] Consulter l'ordre.      !== [BL] 순번을 조회한다. ==!
  (Lee, Dongho)
  --> 
  <select id="selectCagDcshIptBlSrno" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" resultType="java.math.BigDecimal">
    /* CarCagDcshMdfyMapper.selectCagDcshIptBlSrno */
    SELECT BL_SRNO
    FROM alpassext.TB_CARE_CAG_DCSH_BL
    WHERE CAG_DCSH_RGSR_MGMT_NO = #{cagDcshRgsrMgmtNo}
      AND CAG_MGMT_NO = #{cagMgmtNo}
  </select>

  <!--
  Enregistrement de la B/L !==B/L 등록 한다.==!
  (Lee, Dongho) 
  --> 
  <insert id="insertCagDcshEptBlByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* CarCagDcshMdfyMapper.insertCagDcshEptBlByMdfy */
    INSERT INTO alpassext.TB_CARE_CAG_DCSH_BL
               ( bl_srno                       /** N° De Séquence De Bl !== N° De Séquence De Bl ==! */
               , cag_dcsh_rgsr_mgmt_no         /** Numéro de gestion de l'enregistrement de la déclaration de fret !== Numéro de gestion de l'enregistrement de la déclaration de fret ==! */
               , cag_mgmt_no                   /** N° Demande De La Création De Crn !== Crn ==! */
               , msn                           /** Msn !== Msn ==! */
               , hsn                           /** Hsn !== Hsn ==! */
               , bl_no                         /** N° De Bl !== N° De Bl ==! */
               , hbl_no                        /** N° de House B/L !== N° de House B/L ==! */
               , cag_tp_cd                     /** Type de flux !== Type de flux ==! */
               , send_way                      /** Mode de livraison !== Mode de livraison ==! */
               , bl_tp_cd                      /** Code De Catégorie De B/L !== Code De Catégorie De B/L ==! */
               , bl_pt_cd                      /** Code De Type De Bl !== Code De Type De Bl ==! */
               , frwr_cd                       /** Code De Groupeur !== Code De Groupeur ==! */
               , load_regn_cd                  /** Code De Lieu De Chargement !== Code De Lieu De Chargement ==! */
               , ldun_regn_cd                  /** Code De Lieu De Déchargement !== Code De Lieu De Déchargement ==! */
               , ibobz_cd                      /** Code de zone sous douane !== Code de zone sous douane ==! */
               , stvd_cd                       /** Code De Stevedoremanutentionnaire !== Code De Stevedoremanutentionnaire ==! */
<!--                , trns_regn_cd                  /** Code de lieu de transit international !== Code de lieu de transit international ==! */ -->
               , trnh_regn_cd                  /** Code De Région De Transbordement !== Code De Région De Transbordement ==! */
               , cag_chrc_cd                   /** Nature De Cargaison !== Nature De Cargaison ==! */
               , pdls_nm                       /** Nom De L'Article !== Nom De L'Article ==! */
               , cmdt_knd_cd                   /** Nature De Marchandise !== Nature De Marchandise ==! */
               , cas_no                        /** Numero CAS !== Numero CAS ==! */
               , undg_id                        /** Identifiant UNDG !== Identifiant UNDG ==! */
               , pckg_gcnt                     /** Nombre De Colis !== Nombre De Colis ==! */
               , ecntr_wght                    /** Tare De Conteneur(S) À Vide !== Tare De Conteneur(S) À Vide ==! */
               , ttwg                          /** Poids Brut !== Poids Brut ==! */
               , ntwg                          /** Poids Net !== Poids Net ==! */
               , cbm_vol                       /** Volume (Mtq) !== Volume (Mtq) ==! */
               , lir_vol                       /** Volume (Litre) !== Volume (Litre) ==! */
               , hdcb_tp_cd                    /** Code de type d'hydrocarbure !== Code de type d'hydrocarbure ==! */
               , shmr_cn                       /** Marque De Colis !== Marque De Colis ==! */
               , add_info_cn                   /** Info Supplémentaire  !== Info Supplémentaire  ==! */
               , cntr_gcnt                     /** Nombre De Conteneurs !== Nombre De Conteneurs ==! */
               , vhcl_gcnt                     /** Nombre De Véhicules !== Nombre De Véhicules ==! */
               , prpm_dfpm_cach_tp_cd          /** Ind. fret prépayé/dû !== Ind. fret prépayé/dû ==! */
               , cmdt_amt                      /** Valeur de marchandise !== Valeur de marchandise ==! */
               , cmdt_amt_curr_cd              /** Article Montant Code de devise !== Article Montant Code de devise ==! */
               , exppn_txpr_idfy_no            /** NIF de l'exportateur !== NIF de l'exportateur ==! */
               , exppn_nm                      /** Nom De L'Exportateur !== Nom De L'Exportateur ==! */
               , exppn_addr_nm                 /** Adresse De L'Exportateur !== Adresse De L'Exportateur ==! */
               , exppn_tlph_no                 /** Téléphone De L'Exportateur !== Téléphone De L'Exportateur ==! */
               , exppn_eml                     /** Email De L'Exportateur !== Email De L'Exportateur ==! */
               , abrd_frwr_nm                  /** Nom De L'Expéditeur !== Nom De L'Expéditeur ==! */
               , abrd_frwr_addr_nm             /** Adresse De L'Expéditeur !== Adresse De L'Expéditeur ==! */
               , abrd_frwr_tlph_no             /** Téléphone De L'Expéditeur !== Téléphone De L'Expéditeur ==! */
               , abrd_frwr_eml                 /** Email De L'Expéditeur !== Email De L'Expéditeur ==! */
               , cnsi_txpr_idfy_no             /** Niu Du Destinataire !== Niu Du Destinataire ==! */
               , cnsi_nm                       /** Nom de destinataire !== Nom de destinataire ==! */
               , cnsi_addr_nm                  /** Adresse Du Destinataire !== Adresse Du Destinataire ==! */
               , cnsi_tlph_no                  /** N° de téléphone de destinataire !== N° de téléphone de destinataire ==! */
               , cnsi_eml                      /** E-mail de destinataire !== E-mail de destinataire ==! */
               , ntpr_nm                       /** Nom De La Partie À Notifier !== Nom De La Partie À Notifier ==! */
               , ntpr_addr_nm                  /** Adresse De La Partie À Notifier !== Adresse De La Partie À Notifier ==! */
               , ntpr_tlph_no                  /** Téléphone De La Partie À Notifier !== Téléphone De La Partie À Notifier ==! */
               , ntpr_eml                      /** Email De La Partie À Notifier !== Email De La Partie À Notifier ==! */
               , bf_cag_mgmt_no                /** Crn Précédent !== Crn Précédent ==! */
               , bl_mdfy_tp_cd                 /** Code de catégorie de rectification de BL !== Code de catégorie de rectification de BL ==! */
               , del_yn                        /** Suppression On !== Suppression On ==! */
               , frst_regst_id                 /** Id Du Premier Enregistrant  !== Id Du Premier Enregistrant  ==! */
               , frst_rgsr_dttm                /** Date Et Heure De Premier Enregistrement !== Date Et Heure De Premier Enregistrement ==! */
               , last_chpr_id                  /** Id Du Modificateur Final !== Id Du Modificateur Final ==! */
               , last_chg_dttm                 /** Date Et Heure De Modification Finale !== Date Et Heure De Modification Finale ==! */
               , coat_trnp_yn                  /** Cabotage On !== Cabotage On ==! */
               , al_hbl_gcnt                   /** Nombre Total De Sous Bl !== Nombre Total De Sous Bl ==! */
               , hs_cd                         /** Code Sh !== Code Sh ==! */
               , pckg_ut_cd                    /** Code De L'Unité De Colis !== Code De L'Unité De Colis ==! */
               , ldun_yn                       /** TODO:번역필요LKS !== 하역여부 ==! */
               , cnsi_txpr_idfy_no_nin         /** NIN de destinataire !== 수하인납세자식별번호(NIN) ==! */
               , exppn_txpr_idfy_no_nin        /** NIN de l'exportateur !== 수출자납세자식별번호(NIN) ==! */
               , BL_PBLS_DT         /** Date de délivrance du B/L(LTA) !== BL발행일자 ==! */
             , UNDG_GD_CD         /** Code de classe UNDG !== UNDG등급 ==! */
           , CHER_YN           /** affréteur d’espace/slot !== 용선여부 ==! */
              , CHER_GVNM_NM       /** nom de l’affréteur/slotteur !== 용선이름 ==! */
           , CHER_ADDR_NM          /** adresse affréteur/slotteur !== 용선주소 ==! */ 
        )  VALUES (
                 #{blSrno}                     /** N° De Séquence De Bl !== N° De Séquence De Bl ==! */
               , #{cagDcshRgsrMgmtNo}          /** Numéro de gestion de l'enregistrement de la déclaration de fret !== Numéro de gestion de l'enregistrement de la déclaration de fret ==! */
               , #{cagMgmtNo}                  /** N° Demande De La Création De Crn !== Crn ==! */
               , #{msn}                        /** Msn !== Msn ==! */
               , #{hsn}                        /** Hsn !== Hsn ==! */
               , #{blNo}                       /** N° De Bl !== N° De Bl ==! */
               , #{hblNo}                      /** N° de House B/L !== N° de House B/L ==! */
               , #{cagTpCd}                    /** Type de flux !== Type de flux ==! */
               , #{sendWay}                    /** Mode de livraison !== Mode de livraison ==! */
               , #{blTpCd}                     /** Code De Catégorie De B/L !== Code De Catégorie De B/L ==! */
               , #{blPtCd}                     /** Code De Type De Bl !== Code De Type De Bl ==! */
               , #{frwrCd}                     /** Code De Groupeur !== Code De Groupeur ==! */
               , #{loadRegnCd}                 /** Code De Lieu De Chargement !== Code De Lieu De Chargement ==! */
               , #{ldunRegnCd}                 /** Code De Lieu De Déchargement !== Code De Lieu De Déchargement ==! */
               , #{ibobzCd}                    /** Code de zone sous douane !== Code de zone sous douane ==! */
               , #{stvdCd}                     /** Code De Stevedoremanutentionnaire !== Code De Stevedoremanutentionnaire ==! */
<!--                , #{trnsRegnCd}                 /** Code de lieu de transit international !== Code de lieu de transit international ==! */ -->
               , #{trnhRegnCd}                 /** Code De Région De Transbordement !== Code De Région De Transbordement ==! */
               , #{cagChrcCd}                  /** Nature De Cargaison !== Nature De Cargaison ==! */
               , #{pdlsNm}                     /** Nom De L'Article !== Nom De L'Article ==! */
               , #{cmdtKndCd}                  /** Nature De Marchandise !== Nature De Marchandise ==! */
               , #{casNo}                      /** Numero CAS !== Numero CAS ==! */
               , #{undgId}                      /** Identifiant UNDG !== Identifiant UNDG ==! */
               , #{pckgGcnt}                   /** Nombre De Colis !== Nombre De Colis ==! */
               , #{ecntrWght}                  /** Tare De Conteneur(S) À Vide !== Tare De Conteneur(S) À Vide ==! */
               , #{ttwg}                       /** Poids Brut !== Poids Brut ==! */
               , #{ntwg}                       /** Poids Net !== Poids Net ==! */
               , #{cbmVol}                     /** Volume (Mtq) !== Volume (Mtq) ==! */
               , #{lirVol}                     /** Volume (Litre) !== Volume (Litre) ==! */
               , #{hdcbTpCd}                   /** Code de type d'hydrocarbure !== Code de type d'hydrocarbure ==! */
               , #{shmrCn}                     /** Marque De Colis !== Marque De Colis ==! */
               , #{addInfoCn}                  /** Info Supplémentaire  !== Info Supplémentaire  ==! */
               , #{cntrGcnt}                   /** Nombre De Conteneurs !== Nombre De Conteneurs ==! */
               , #{vhclGcnt}                   /** Nombre De Véhicules !== Nombre De Véhicules ==! */
               , #{prpmDfpmCachTpCd}           /** Ind. fret prépayé/dû !== Ind. fret prépayé/dû ==! */
               , #{cmdtAmt}                    /** Valeur de marchandise !== Valeur de marchandise ==! */
               , #{cmdtAmtCurrCd}              /** Article Montant Code de devise !== Article Montant Code de devise ==! */
               , #{exppnTxprIdfyNo}            /** NIF de l'exportateur !== NIF de l'exportateur ==! */
               , #{exppnNm}                    /** Nom De L'Exportateur !== Nom De L'Exportateur ==! */
               , #{exppnAddrNm}                /** Adresse De L'Exportateur !== Adresse De L'Exportateur ==! */
               , #{exppnTlphNo}                /** Téléphone De L'Exportateur !== Téléphone De L'Exportateur ==! */
               , #{exppnEml}                   /** Email De L'Exportateur !== Email De L'Exportateur ==! */
               , #{abrdFrwrNm}                 /** Nom De L'Expéditeur !== Nom De L'Expéditeur ==! */
               , #{abrdFrwrAddrNm}             /** Adresse De L'Expéditeur !== Adresse De L'Expéditeur ==! */
               , #{abrdFrwrTlphNo}             /** Téléphone De L'Expéditeur !== Téléphone De L'Expéditeur ==! */
               , #{abrdFrwrEml}                /** Email De L'Expéditeur !== Email De L'Expéditeur ==! */
               , #{cnsiTxprIdfyNo}             /** Niu Du Destinataire !== Niu Du Destinataire ==! */
               , #{cnsiNm}                     /** Nom de destinataire !== Nom de destinataire ==! */
               , #{cnsiAddrNm}                 /** Adresse Du Destinataire !== Adresse Du Destinataire ==! */
               , #{cnsiTlphNo}                 /** N° de téléphone de destinataire !== N° de téléphone de destinataire ==! */
               , #{cnsiEml}                    /** E-mail de destinataire !== E-mail de destinataire ==! */
               , #{ntprNm}                     /** Nom De La Partie À Notifier !== Nom De La Partie À Notifier ==! */
               , #{ntprAddrNm}                 /** Adresse De La Partie À Notifier !== Adresse De La Partie À Notifier ==! */
               , #{ntprTlphNo}                 /** Téléphone De La Partie À Notifier !== Téléphone De La Partie À Notifier ==! */
               , #{ntprEml}                    /** Email De La Partie À Notifier !== Email De La Partie À Notifier ==! */
               , #{bfCagMgmtNo}                /** Crn Précédent !== Crn Précédent ==! */
               , #{blMdfyTpCd}                 /** Code de catégorie de rectification de BL !== Code de catégorie de rectification de BL ==! */
               , 'N'                           /** Suppression On !== Suppression On ==! */
               , #{frstRegstId}                /** Id Du Premier Enregistrant  !== Id Du Premier Enregistrant  ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Premier Enregistrement !== Date Et Heure De Premier Enregistrement ==! */
               , #{lastChprId}                 /** Id Du Modificateur Final !== Id Du Modificateur Final ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Modification Finale !== Date Et Heure De Modification Finale ==! */
               , #{coatTrnpYn}                 /** Cabotage On !== Cabotage On ==! */
               , #{alHblGcnt}                  /** Nombre Total De Sous Bl !== Nombre Total De Sous Bl ==! */
               , #{hsCd}                       /** Code Sh !== Code Sh ==! */
               , #{pckgUtCd}                   /** Code De L'Unité De Colis !== Code De L'Unité De Colis ==! */
               , #{ldunYn}                     /** TODO:번역필요LKS !== 하역여부 ==! */
               , #{cnsiTxprIdfyNoNin}          /** NIN de destinataire !== 수하인납세자식별번호(NIN) ==! */
               , #{exppnTxprIdfyNoNin}         /** NIN de l'exportateur !== 수출자납세자식별번호(NIN) ==! */
               , to_char(to_date(#{blPblsDt}, 'dd/mm/yyyy'), 'yyyymmdd') /** Date de délivrance du B/L(LTA) !== BL발행일자 ==! */
         , #{undgGdCd} /** Code de classe UNDG !== UNDG등급 ==! */
         , #{cherYn} /** affréteur d’espace/slot !== 용선여부 ==! */
         , #{cherGvnmNm} /** nom de l’affréteur/slotteur !== 용선이름 ==! */
         , #{cherAddrNm} /** adresse affréteur/slotteur !== 용선주소 ==! */
        )    
    ON CONFLICT ( BL_SRNO, CAG_DCSH_RGSR_MGMT_NO )
    DO UPDATE SET
         LAST_CHPR_ID = #{lastChprId}
       , LAST_CHG_DTTM = SYSTIMESTAMP
         , DEL_YN = 'N'
       <if test="cagMgmtNo != null and cagMgmtNo != ''">
             , cag_mgmt_no = #{cagMgmtNo}                     /** N° Demande De La Création De Crn !== Crn ==! */ 
             </if>
             <if test="msn != null and msn != ''">
             , msn = #{msn}                                   /** Msn !== Msn ==! */ 
             </if>
             <if test="hsn != null and hsn != ''">
             , hsn = #{hsn}                                   /** Hsn !== Hsn ==! */ 
             </if>
             <if test="blNo != null and blNo != ''">
             , bl_no = #{blNo}                                /** N° De Bl !== N° De Bl ==! */ 
             </if>
             <if test="hblNo != null and hblNo != ''">
             , hbl_no = #{hblNo}                              /** N° de House B/L !== N° de House B/L ==! */ 
             </if>
             <if test="cagTpCd != null and cagTpCd != ''">
             , cag_tp_cd = #{cagTpCd}                         /** Type de flux !== Type de flux ==! */ 
             </if>
             <if test="sendWay != null and sendWay != ''">
             , send_way = #{sendWay}                          /** Mode de livraison !== Mode de livraison ==! */ 
             </if>
             <if test="blTpCd != null and blTpCd != ''">
             , bl_tp_cd = #{blTpCd}                           /** Code De Catégorie De B/L !== Code De Catégorie De B/L ==! */ 
             </if>
             <if test="blPtCd != null and blPtCd != ''">
             , bl_pt_cd = #{blPtCd}                           /** Code De Type De Bl !== Code De Type De Bl ==! */ 
             </if>
             <if test="frwrCd != null and frwrCd != ''">
             , frwr_cd = #{frwrCd}                            /** Code De Groupeur !== Code De Groupeur ==! */ 
             </if>
             <if test="loadRegnCd != null and loadRegnCd != ''">
             , load_regn_cd = #{loadRegnCd}                   /** Code De Lieu De Chargement !== Code De Lieu De Chargement ==! */ 
             </if>
             <if test="ldunRegnCd != null and ldunRegnCd != ''">
             , ldun_regn_cd = #{ldunRegnCd}                   /** Code De Lieu De Déchargement !== Code De Lieu De Déchargement ==! */ 
             </if>
             <if test="ibobzCd != null and ibobzCd != ''">
             , ibobz_cd = #{ibobzCd}                          /** Code de zone sous douane !== Code de zone sous douane ==! */ 
             </if>
             <if test="stvdCd != null and stvdCd != ''">
             , stvd_cd = #{stvdCd}                            /** Code De Stevedoremanutentionnaire !== Code De Stevedoremanutentionnaire ==! */ 
             </if>
<!--              <if test="trnsRegnCd != null and trnsRegnCd != ''">
             , trns_regn_cd = #{trnsRegnCd}                   /** Code de lieu de transit international !== Code de lieu de transit international ==! */ 
             </if> -->
             <if test="trnhRegnCd != null and trnhRegnCd != ''">
             , trnh_regn_cd = #{trnhRegnCd}                   /** Code De Région De Transbordement !== Code De Région De Transbordement ==! */ 
             </if>
             <if test="cagChrcCd != null and cagChrcCd != ''">
             , cag_chrc_cd = #{cagChrcCd}                     /** Nature De Cargaison !== Nature De Cargaison ==! */ 
             </if>
             <if test="pdlsNm != null and pdlsNm != ''">
             , pdls_nm = #{pdlsNm}                            /** Nom De L'Article !== Nom De L'Article ==! */ 
             </if>
             <if test="cmdtKndCd != null and cmdtKndCd != ''">
             , cmdt_knd_cd = #{cmdtKndCd}                     /** Nature De Marchandise !== Nature De Marchandise ==! */ 
             </if>
             <if test="casNo != null and casNo != ''">
             , cas_no = #{casNo}                              /** Numero CAS !== Numero CAS ==! */ 
             </if>
             <if test="undgId != null and undgId != ''">
             , undg_id = #{undgId}                              /** Identifiant UNDG !== Identifiant UNDG ==! */ 
             </if>
             <if test="pckgGcnt != null and pckgGcnt != ''">
             , pckg_gcnt = #{pckgGcnt}                        /** Nombre De Colis !== Nombre De Colis ==! */ 
             </if>
             <if test="ecntrWght != null and ecntrWght != ''">
             , ecntr_wght = #{ecntrWght}                      /** Tare De Conteneur(S) À Vide !== Tare De Conteneur(S) À Vide ==! */ 
             </if>
             <if test="ttwg != null and ttwg != ''">
             , ttwg = #{ttwg}                                 /** Poids Brut !== Poids Brut ==! */ 
             </if>
             <if test="ntwg != null and ntwg != ''">
             , ntwg = #{ntwg}                                 /** Poids Net !== Poids Net ==! */ 
             </if>
             <if test="cbmVol != null and cbmVol != ''">
             , cbm_vol = #{cbmVol}                            /** Volume (Mtq) !== Volume (Mtq) ==! */ 
             </if>
             <if test="lirVol != null and lirVol != ''">
             , lir_vol = #{lirVol}                            /** Volume (Litre) !== Volume (Litre) ==! */ 
             </if>
             <if test="hdcbTpCd != null and hdcbTpCd != ''">
             , hdcb_tp_cd = #{hdcbTpCd}                       /** Code de type d'hydrocarbure !== Code de type d'hydrocarbure ==! */ 
             </if>
             <if test="shmrCn != null and shmrCn != ''">
             , shmr_cn = #{shmrCn}                            /** Marque De Colis !== Marque De Colis ==! */ 
             </if>
             <if test="addInfoCn != null and addInfoCn != ''">
             , add_info_cn = #{addInfoCn}                     /** Info Supplémentaire  !== Info Supplémentaire  ==! */ 
             </if>
             <if test="cntrGcnt != null and cntrGcnt != ''">
             , cntr_gcnt = #{cntrGcnt}                        /** Nombre De Conteneurs !== Nombre De Conteneurs ==! */ 
             </if>
             <if test="vhclGcnt != null and vhclGcnt != ''">
             , vhcl_gcnt = #{vhclGcnt}                        /** Nombre De Véhicules !== Nombre De Véhicules ==! */ 
             </if>
             <if test="prpmDfpmCachTpCd != null and prpmDfpmCachTpCd != ''">
             , prpm_dfpm_cach_tp_cd = #{prpmDfpmCachTpCd}     /** Ind. fret prépayé/dû !== Ind. fret prépayé/dû ==! */ 
             </if>
             <if test="cmdtAmt != null and cmdtAmt != ''">
             , cmdt_amt = #{cmdtAmt}                          /** Valeur de marchandise !== Valeur de marchandise ==! */ 
             </if>
             <if test="cmdtAmtCurrCd != null and cmdtAmtCurrCd != ''">
             , cmdt_amt_curr_cd = #{cmdtAmtCurrCd}            /** Article Montant Code de devise !== Article Montant Code de devise ==! */ 
             </if>
             <if test="exppnTxprIdfyNo != null and exppnTxprIdfyNo != ''">
             , exppn_txpr_idfy_no = #{exppnTxprIdfyNo}        /** NIF de l'exportateur !== NIF de l'exportateur ==! */ 
             </if>
             <if test="exppnNm != null and exppnNm != ''">
             , exppn_nm = #{exppnNm}                          /** Nom De L'Exportateur !== Nom De L'Exportateur ==! */ 
             </if>
             <if test="exppnAddrNm != null and exppnAddrNm != ''">
             , exppn_addr_nm = #{exppnAddrNm}                 /** Adresse De L'Exportateur !== Adresse De L'Exportateur ==! */ 
             </if>
             <if test="exppnTlphNo != null and exppnTlphNo != ''">
             , exppn_tlph_no = #{exppnTlphNo}                 /** Téléphone De L'Exportateur !== Téléphone De L'Exportateur ==! */ 
             </if>
             <if test="exppnEml != null and exppnEml != ''">
             , exppn_eml = #{exppnEml}                        /** Email De L'Exportateur !== Email De L'Exportateur ==! */ 
             </if>
             <if test="abrdFrwrNm != null and abrdFrwrNm != ''">
             , abrd_frwr_nm = #{abrdFrwrNm}                   /** Nom De L'Expéditeur !== Nom De L'Expéditeur ==! */ 
             </if>
             <if test="abrdFrwrAddrNm != null and abrdFrwrAddrNm != ''">
             , abrd_frwr_addr_nm = #{abrdFrwrAddrNm}          /** Adresse De L'Expéditeur !== Adresse De L'Expéditeur ==! */ 
             </if>
             <if test="abrdFrwrTlphNo != null and abrdFrwrTlphNo != ''">
             , abrd_frwr_tlph_no = #{abrdFrwrTlphNo}          /** Téléphone De L'Expéditeur !== Téléphone De L'Expéditeur ==! */ 
             </if>
             <if test="abrdFrwrEml != null and abrdFrwrEml != ''">
             , abrd_frwr_eml = #{abrdFrwrEml}                 /** Email De L'Expéditeur !== Email De L'Expéditeur ==! */ 
             </if>
             <if test="cnsiTxprIdfyNo != null and cnsiTxprIdfyNo != ''">
             , cnsi_txpr_idfy_no = #{cnsiTxprIdfyNo}          /** Niu Du Destinataire !== Niu Du Destinataire ==! */ 
             </if>
             <if test="cnsiNm != null and cnsiNm != ''">
             , cnsi_nm = #{cnsiNm}                            /** Nom de destinataire !== Nom de destinataire ==! */ 
             </if>
             <if test="cnsiAddrNm != null and cnsiAddrNm != ''">
             , cnsi_addr_nm = #{cnsiAddrNm}                   /** Adresse Du Destinataire !== Adresse Du Destinataire ==! */ 
             </if>
             <if test="cnsiTlphNo != null and cnsiTlphNo != ''">
             , cnsi_tlph_no = #{cnsiTlphNo}                   /** N° de téléphone de destinataire !== N° de téléphone de destinataire ==! */ 
             </if>
             <if test="cnsiEml != null and cnsiEml != ''">
             , cnsi_eml = #{cnsiEml}                          /** E-mail de destinataire !== E-mail de destinataire ==! */ 
             </if>
             <if test="ntprNm != null and ntprNm != ''">
             , ntpr_nm = #{ntprNm}                            /** Nom De La Partie À Notifier !== Nom De La Partie À Notifier ==! */ 
             </if>
             <if test="ntprAddrNm != null and ntprAddrNm != ''">
             , ntpr_addr_nm = #{ntprAddrNm}                   /** Adresse De La Partie À Notifier !== Adresse De La Partie À Notifier ==! */ 
             </if>
             <if test="ntprTlphNo != null and ntprTlphNo != ''">
             , ntpr_tlph_no = #{ntprTlphNo}                   /** Téléphone De La Partie À Notifier !== Téléphone De La Partie À Notifier ==! */ 
             </if>
             <if test="ntprEml != null and ntprEml != ''">
             , ntpr_eml = #{ntprEml}                          /** Email De La Partie À Notifier !== Email De La Partie À Notifier ==! */ 
             </if>
             <if test="bfCagMgmtNo != null and bfCagMgmtNo != ''">
             , bf_cag_mgmt_no = #{bfCagMgmtNo}                /** Crn Précédent !== Crn Précédent ==! */ 
             </if>
             <if test="blMdfyTpCd != null and blMdfyTpCd != ''">
             , bl_mdfy_tp_cd = #{blMdfyTpCd}                  /** Code de catégorie de rectification de BL !== Code de catégorie de rectification de BL ==! */ 
             </if>
             <if test="coatTrnpYn != null and coatTrnpYn != ''">
             , coat_trnp_yn = #{coatTrnpYn}                   /** Cabotage On !== Cabotage On ==! */ 
             </if>
             <if test="alHblGcnt != null and alHblGcnt != ''">
             , al_hbl_gcnt = #{alHblGcnt}                     /** Nombre Total De Sous Bl !== Nombre Total De Sous Bl ==! */ 
             </if>
             <if test="hsCd != null and hsCd != ''">
             , hs_cd = #{hsCd}                                /** Code Sh !== Code Sh ==! */ 
             </if>
             <if test="pckgUtCd != null and pckgUtCd != ''">
             , pckg_ut_cd = #{pckgUtCd}                       /** Code De L'Unité De Colis !== Code De L'Unité De Colis ==! */ 
             </if>
             <if test="ldunYn != null and ldunYn != ''">
             , ldun_yn = #{ldunYn}                            /** TODO:번역필요LKS !== 하역여부 ==! */ 
             </if>
             <if test="cnsiTxprIdfyNoNin != null and cnsiTxprIdfyNoNin != ''">
             , cnsi_txpr_idfy_no_nin = #{cnsiTxprIdfyNoNin}   /** NIN de destinataire !== 수하인납세자식별번호(NIN) ==! */ 
             </if>
             <if test="exppnTxprIdfyNoNin != null and exppnTxprIdfyNoNin != ''">
             , exppn_txpr_idfy_no_nin = #{exppnTxprIdfyNoNin}  /** NIN de l'exportateur !== 수출자납세자식별번호(NIN) ==! */ 
             </if>
<!--              <if test="grdastNm != null">
             , grdast_nm = #{grdastNm}              /** Assistant au sol !==조업사명==! */
             </if> -->    
             <if test="blPblsDt != null">
       , BL_PBLS_DT = to_char(to_date(#{blPblsDt}, 'dd/mm/yyyy'), 'yyyymmdd') /** Date de délivrance du B/L(LTA) !== BL발행일자 ==! */
       </if>
       <if test="undgGdCd != null">
       , UNDG_GD_CD = #{undgGdCd} /** Code de classe UNDG !== UNDG등급 ==! */
       </if>
       <if test="cherYn != null">
       , CHER_YN = #{cherYn} /** affréteur d’espace/slot !== 용선여부 ==! */
       </if>
       <if test="cherGvnmNm != null">
       , CHER_GVNM_NM = #{cherGvnmNm} /** nom de l’affréteur/slotteur !== 용선이름 ==! */
       </if>
       <if test="cherAddrNm != null">
       , CHER_ADDR_NM = #{cherAddrNm} /** adresse affréteur/slotteur !== 용선주소 ==! */
       </if>
  </insert>
  

  <!--
  Supprimer la déclaration de cargaison (Conteneur) !==화물신고서 (컨테이너) 삭제 한다.==!
  (Lee, Dongho)
  --> 
  <update id="deleteCagDcshEptBlCntrByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* CarCagDcshMdfyMapper.deleteCagDcshEptBlCntrByMdfy */
    UPDATE alpassext.TB_CARE_CAG_DCSH_BL_CNTR TGTBL
    SET 
      TGTBL.DEL_YN        = 'Y'                        /** Suppression ON !==삭제여부==! */
    WHERE  1=1 
      AND TGTBL.BL_SRNO IN (
        SELECT BL.BL_SRNO
        FROM alpassext.TB_CARE_CAG_DCSH_BL BL, alpassext.TB_CARE_CAG_DCSH MNFS
        WHERE 
          MNFS.CAG_DCSH_RGSR_MGMT_NO = BL.CAG_DCSH_RGSR_MGMT_NO
          AND MNFS.MRN   = #{mrn}                           /** MRN !==MRN==! */
          <!-- AND BL.BL_NO  = #{blNo}                          /** N° de BL !==BL번호==! */ -->
          AND BL.CAG_MGMT_NO = #{cagMgmtNo}                  /** CRN !==화물관리번호==! */
          <!-- AND BL.CAG_MGMT_NO LIKE #{cagMgmtNo}||'%' 마스터 BL수정 시 하우스 BL의 컨테이너 입력정보까지 삭제. 재등록은 마스터 BL에만 됨. -->
      )
      AND TGTBL.CAG_DCSH_RGSR_MGMT_NO = (
        SELECT MNFS.CAG_DCSH_RGSR_MGMT_NO
        FROM alpassext.TB_CARE_CAG_DCSH_BL BL, alpassext.TB_CARE_CAG_DCSH MNFS
        WHERE 
          MNFS.CAG_DCSH_RGSR_MGMT_NO = BL.CAG_DCSH_RGSR_MGMT_NO
          AND MNFS.MRN   = #{mrn}                           /** MRN !==MRN==! */
          <!-- AND BL.BL_NO  = #{blNo}                          /** N° de BL !==BL번호==! */ -->
          AND BL.CAG_MGMT_NO = #{cagMgmtNo}                  /** CRN !==화물관리번호==! */
        GROUP BY MNFS.CAG_DCSH_RGSR_MGMT_NO
      )
  </update>
  
  <!--
  Supprimer la déclaration de cargaison (véhicule) !==화물신고서 (차량) 삭제 한다.==!
  (Lee, Dongho)
  --> 
  <update id="deleteCagDcshEptBlVhclByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* CarCagDcshMdfyMapper.deleteCagDcshEptBlVhclByMdfy */
    UPDATE alpassext.TB_CARE_CAG_DCSH_BL_VHCL TGTBL
    SET 
      TGTBL.DEL_YN        = 'Y'                        /** Suppression ON !==삭제여부==! */
    WHERE  1=1 
      AND TGTBL.BL_SRNO IN (
        SELECT BL.BL_SRNO
        FROM alpassext.TB_CARE_CAG_DCSH_BL BL, alpassext.TB_CARE_CAG_DCSH MNFS
        WHERE 
          MNFS.CAG_DCSH_RGSR_MGMT_NO = BL.CAG_DCSH_RGSR_MGMT_NO
          AND MNFS.MRN   = #{mrn}                           /** MRN !==MRN==! */
          <!-- AND BL.BL_NO  = #{blNo}                          /** N° de BL !==BL번호==! */ -->
          AND BL.CAG_MGMT_NO = #{cagMgmtNo}                  /** CRN !==화물관리번호==! */
      )
      AND TGTBL.CAG_DCSH_RGSR_MGMT_NO = (
        SELECT MNFS.CAG_DCSH_RGSR_MGMT_NO
        FROM alpassext.TB_CARE_CAG_DCSH_BL BL, alpassext.TB_CARE_CAG_DCSH MNFS
        WHERE 
          MNFS.CAG_DCSH_RGSR_MGMT_NO = BL.CAG_DCSH_RGSR_MGMT_NO
          AND MNFS.MRN   = #{mrn}                           /** MRN !==MRN==! */
          <!-- AND BL.BL_NO  = #{blNo}                          /** N° de BL !==BL번호==! */ -->
          AND BL.CAG_MGMT_NO = #{cagMgmtNo}                  /** CRN !==화물관리번호==! */
        GROUP BY MNFS.CAG_DCSH_RGSR_MGMT_NO
      )
  </update>
  
   <!--
  Supprimer la déclaration de cargaison (véhicule) !==화물신고서 (차량) 삭제 한다.==!
  (Lee, Dongho)
  --> 
  <update id="deleteCagDcshEptBlTrlrByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* CarCagDcshMdfyMapper.deleteCagDcshEptBlVhclByMdfy */
    UPDATE alpassext.TB_CARE_CAG_DCSH_BL_TRLR TGTBL
    SET 
      TGTBL.DEL_YN        = 'Y'                        /** Suppression ON !==삭제여부==! */
    WHERE  1=1 
      AND TGTBL.BL_SRNO IN (
        SELECT BL.BL_SRNO
        FROM alpassext.TB_CARE_CAG_DCSH_BL BL, alpassext.TB_CARE_CAG_DCSH MNFS
        WHERE 
          MNFS.CAG_DCSH_RGSR_MGMT_NO = BL.CAG_DCSH_RGSR_MGMT_NO
          AND MNFS.MRN   = #{mrn}                           /** MRN !==MRN==! */
          <!-- AND BL.BL_NO  = #{blNo}                          /** N° de BL !==BL번호==! */ -->
          AND BL.CAG_MGMT_NO = #{cagMgmtNo}                  /** CRN !==화물관리번호==! */
      )
      AND TGTBL.CAG_DCSH_RGSR_MGMT_NO = (
        SELECT MNFS.CAG_DCSH_RGSR_MGMT_NO
        FROM alpassext.TB_CARE_CAG_DCSH_BL BL, alpassext.TB_CARE_CAG_DCSH MNFS
        WHERE 
          MNFS.CAG_DCSH_RGSR_MGMT_NO = BL.CAG_DCSH_RGSR_MGMT_NO
          AND MNFS.MRN   = #{mrn}                           /** MRN !==MRN==! */
          <!-- AND BL.BL_NO  = #{blNo}                          /** N° de BL !==BL번호==! */ -->
          AND BL.CAG_MGMT_NO = #{cagMgmtNo}                  /** CRN !==화물관리번호==! */
        GROUP BY MNFS.CAG_DCSH_RGSR_MGMT_NO
      )
  </update>

  <!--
  Supprimer la déclaration de cargaison (train) !==화물신고서 (열차) 삭제 한다.==!
  (Lee, Dongho)
  -->
  <update id="deleteCagDcshEptBlTrnByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* CarCagDcshMdfyMapper.deleteCagDcshEptBlTrnByMdfy */
    UPDATE alpassext.TB_CARE_CAG_DCSH_BL_TRN TGTBL
    SET 
      TGTBL.DEL_YN        = 'Y'                        /** Suppression ON !==삭제여부==! */
    WHERE  1=1 
      AND TGTBL.BL_SRNO IN (
        SELECT BL.BL_SRNO
        FROM alpassext.TB_CARE_CAG_DCSH_BL BL, alpassext.TB_CARE_CAG_DCSH MNFS
        WHERE 
          MNFS.CAG_DCSH_RGSR_MGMT_NO = BL.CAG_DCSH_RGSR_MGMT_NO
          AND MNFS.MRN   = #{mrn}                           /** MRN !==MRN==! */
          <!-- AND BL.BL_NO  = #{blNo}                          /** N° de BL !==BL번호==! */ -->
          AND BL.CAG_MGMT_NO = #{cagMgmtNo}                  /** CRN !==화물관리번호==! */
      )
      AND TGTBL.CAG_DCSH_RGSR_MGMT_NO = (
        SELECT MNFS.CAG_DCSH_RGSR_MGMT_NO
        FROM alpassext.TB_CARE_CAG_DCSH_BL BL, alpassext.TB_CARE_CAG_DCSH MNFS
        WHERE 
          MNFS.CAG_DCSH_RGSR_MGMT_NO = BL.CAG_DCSH_RGSR_MGMT_NO
          AND MNFS.MRN   = #{mrn}                           /** MRN !==MRN==! */
          <!-- AND BL.BL_NO  = #{blNo}                          /** N° de BL !==BL번호==! */ -->
          AND BL.CAG_MGMT_NO = #{cagMgmtNo}                  /** CRN !==화물관리번호==! */
        GROUP BY MNFS.CAG_DCSH_RGSR_MGMT_NO
      )
  </update>

  <!--
  Supprimer la déclaration de cargaison (Accomplissement d'exportation) !==화물신고서 (수출이행) 삭제 한다.==!
  (Lee, Dongho)
  -->
  <update id="deleteCagDcshEptBlExfmByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* CarCagDcshMdfyMapper.deleteCagDcshEptBlVhclByMdfy */
    UPDATE alpassext.TB_CARE_CAG_DCSH_BL_EXFM TGTBL
    SET 
      TGTBL.DEL_YN        = 'Y'                        /** Suppression ON !==삭제여부==! */
    WHERE  1=1 
      AND TGTBL.BL_SRNO IN (
        SELECT BL.BL_SRNO
        FROM alpassext.TB_CARE_CAG_DCSH_BL BL, alpassext.TB_CARE_CAG_DCSH MNFS
        WHERE 
          MNFS.CAG_DCSH_RGSR_MGMT_NO = BL.CAG_DCSH_RGSR_MGMT_NO
          AND MNFS.MRN   = #{mrn}                           /** MRN !==MRN==! */
          <!-- AND BL.BL_NO  = #{blNo}                          /** N° de BL !==BL번호==! */ -->
          AND BL.CAG_MGMT_NO = #{cagMgmtNo}                  /** CRN !==화물관리번호==! */
      )
      AND TGTBL.CAG_DCSH_RGSR_MGMT_NO = (
        SELECT MNFS.CAG_DCSH_RGSR_MGMT_NO
        FROM alpassext.TB_CARE_CAG_DCSH_BL BL, alpassext.TB_CARE_CAG_DCSH MNFS
        WHERE 
          MNFS.CAG_DCSH_RGSR_MGMT_NO = BL.CAG_DCSH_RGSR_MGMT_NO
          AND MNFS.MRN   = #{mrn}                           /** MRN !==MRN==! */
          <!-- AND BL.BL_NO  = #{blNo}                          /** N° de BL !==BL번호==! */ -->
          AND BL.CAG_MGMT_NO = #{cagMgmtNo}                  /** CRN !==화물관리번호==! */
        GROUP BY MNFS.CAG_DCSH_RGSR_MGMT_NO
      )
  </update>

  <!--
  Enregistrement de la déclaration de cargaison (Conteneur) !==화물신고서 (컨테이너) 등록 한다.==!
  (Lee, Dongho) 
  --> 
  <insert id="insertCagDcshEptBlCntrByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlCntrVo" >
    /* CarCagDcshMdfyMapper.insertCagDcshEptBlCntrByMdfy */
    INSERT INTO alpassext.TB_CARE_CAG_DCSH_BL_CNTR
               ( cag_dcsh_rgsr_mgmt_no         /** Numéro de gestion de l'enregistrement de la déclaration de fret !== Numéro de gestion de l'enregistrement de la déclaration de fret ==! */
               , bl_srno                       /** N° De Séquence De Bl !== N° De Séquence De Bl ==! */
               , cntr_srno                     /** N° De Séquence Du Conteneur !== N° De Séquence Du Conteneur ==! */
               , cntr_no                       /** N° De Conteneur !== N° De Conteneur ==! */
               , cntr_tp_cd                    /** Code De Type De Conteneur !== Code De Type De Conteneur ==! */
               , pckg_gcnt                     /** Nombre De Colis !== Nombre De Colis ==! */
               , pckg_ut_cd                    /** Code De L'Unité De Colis !== Code De L'Unité De Colis ==! */
               , ecntr_wght                    /** Tare De Conteneur(S) À Vide !== Tare De Conteneur(S) À Vide ==! */
               , ttwg                          /** Poids Brut !== Poids Brut ==! */
               , seal_no1                      /** N° De Scellé1 !== N° De Scellé1 ==! */
               , seal_no2                      /** N° De Scellé2 !== N° De Scellé2 ==! */
               , seal_no3                      /** N° De Scellé3 !== N° De Scellé3 ==! */
               , seal_chpn1                    /** Responsable de scellé 1 !== Responsable de scellé 1 ==! */
               , seal_chpn2                    /** Responsable de scellé 2 !== Responsable de scellé 2 ==! */
               , seal_chpn3                    /** Responsable de scellé 3 !== Responsable de scellé 3 ==! */
               , del_yn                        /** Suppression On !== Suppression On ==! */
               , frst_regst_id                 /** Id Du Premier Enregistrant  !== Id Du Premier Enregistrant  ==! */
               , frst_rgsr_dttm                /** Date Et Heure De Premier Enregistrement !== Date Et Heure De Premier Enregistrement ==! */
               , last_chpr_id                  /** Id Du Modificateur Final !== Id Du Modificateur Final ==! */
               , last_chg_dttm                 /** Date Et Heure De Modification Finale !== Date Et Heure De Modification Finale ==! */
        )  VALUES (
                 #{cagDcshRgsrMgmtNo}          /** Numéro de gestion de l'enregistrement de la déclaration de fret !== Numéro de gestion de l'enregistrement de la déclaration de fret ==! */
               , #{blSrno}                     /** N° De Séquence De Bl !== N° De Séquence De Bl ==! */
               , #{cntrSrno}                   /** N° De Séquence Du Conteneur !== N° De Séquence Du Conteneur ==! */
               , #{cntrNo}                     /** N° De Conteneur !== N° De Conteneur ==! */
               , #{cntrTpCd}                   /** Code De Type De Conteneur !== Code De Type De Conteneur ==! */
               , #{pckgGcnt}                   /** Nombre De Colis !== Nombre De Colis ==! */
               , #{pckgUtCd}                   /** Code De L'Unité De Colis !== Code De L'Unité De Colis ==! */
               , #{ecntrWght}                  /** Tare De Conteneur(S) À Vide !== Tare De Conteneur(S) À Vide ==! */
               , #{ttwg}                       /** Poids Brut !== Poids Brut ==! */
               , #{sealNo1}                    /** N° De Scellé1 !== N° De Scellé1 ==! */
               , #{sealNo2}                    /** N° De Scellé2 !== N° De Scellé2 ==! */
               , #{sealNo3}                    /** N° De Scellé3 !== N° De Scellé3 ==! */
               , #{sealChpn1}                  /** Responsable de scellé 1 !== Responsable de scellé 1 ==! */
               , #{sealChpn2}                  /** Responsable de scellé 2 !== Responsable de scellé 2 ==! */
               , #{sealChpn3}                  /** Responsable de scellé 3 !== Responsable de scellé 3 ==! */
               , 'N'                           /** Suppression On !== Suppression On ==! */
               , #{frstRegstId}                /** Id Du Premier Enregistrant  !== Id Du Premier Enregistrant  ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Premier Enregistrement !== Date Et Heure De Premier Enregistrement ==! */
               , #{lastChprId}                 /** Id Du Modificateur Final !== Id Du Modificateur Final ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Modification Finale !== Date Et Heure De Modification Finale ==! */
        )    
    ON CONFLICT ( CAG_DCSH_RGSR_MGMT_NO, BL_SRNO, CNTR_SRNO )
    DO UPDATE SET
         LAST_CHPR_ID     = #{lastChprId}
         , LAST_CHG_DTTM   = SYSTIMESTAMP
       , DEL_YN       = 'N'
      <if test="cntrNo != null and cntrNo != ''">
             , cntr_no = #{cntrNo}                            /** N° De Conteneur !== N° De Conteneur ==! */ 
             </if>
             <if test="cntrTpCd != null and cntrTpCd != ''">
             , cntr_tp_cd = #{cntrTpCd}                       /** Code De Type De Conteneur !== Code De Type De Conteneur ==! */ 
             </if>
             <if test="pckgGcnt != null and pckgGcnt != ''">
             , pckg_gcnt = #{pckgGcnt}                        /** Nombre De Colis !== Nombre De Colis ==! */ 
             </if>
             <if test="pckgUtCd != null and pckgUtCd != ''">
             , pckg_ut_cd = #{pckgUtCd}                       /** Code De L'Unité De Colis !== Code De L'Unité De Colis ==! */ 
             </if>
             <if test="ecntrWght != null and ecntrWght != ''">
             , ecntr_wght = #{ecntrWght}                      /** Tare De Conteneur(S) À Vide !== Tare De Conteneur(S) À Vide ==! */ 
             </if>
             <if test="ttwg != null and ttwg != ''">
             , ttwg = #{ttwg}                                 /** Poids Brut !== Poids Brut ==! */ 
             </if>
             <if test="sealNo1 != null and sealNo1 != ''">
             , seal_no1 = #{sealNo1}                          /** N° De Scellé1 !== N° De Scellé1 ==! */ 
             </if>
             <if test="sealNo2 != null and sealNo2 != ''">
             , seal_no2 = #{sealNo2}                          /** N° De Scellé2 !== N° De Scellé2 ==! */ 
             </if>
             <if test="sealNo3 != null and sealNo3 != ''">
             , seal_no3 = #{sealNo3}                          /** N° De Scellé3 !== N° De Scellé3 ==! */ 
             </if>
             <if test="sealChpn1 != null and sealChpn1 != ''">
             , seal_chpn1 = #{sealChpn1}                      /** Responsable de scellé 1 !== Responsable de scellé 1 ==! */ 
             </if>
             <if test="sealChpn2 != null and sealChpn2 != ''">
             , seal_chpn2 = #{sealChpn2}                      /** Responsable de scellé 2 !== Responsable de scellé 2 ==! */ 
             </if>
             <if test="sealChpn3 != null and sealChpn3 != ''">
             , seal_chpn3 = #{sealChpn3}                      /** Responsable de scellé 3 !== Responsable de scellé 3 ==! */ 
             </if>    
  </insert>
  
  <!--
  Enregistrement de la déclaration de cargaison (véhicule) !==화물신고서 (차량) 등록 한다.==!
  (Lee, Dongho) 
  --> 
  <insert id="insertCagDcshEptBlVhclByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVhclVo" >
    /* CarCagDcshMdfyMapper.insertCagDcshEptBlVhclByMdfy */
    INSERT INTO alpassext.TB_CARE_CAG_DCSH_BL_VHCL
           ( cag_dcsh_rgsr_mgmt_no         /** Numéro de gestion de l'enregistrement de la déclaration de fret !== Numéro de gestion de l'enregistrement de la déclaration de fret ==! */
               , bl_srno                       /** N° De Séquence De Bl !== N° De Séquence De Bl ==! */
               , vhcl_srno                     /** Numéro De Séquence De Véhicule !== Numéro De Séquence De Véhicule ==! */
               , chss_no                       /** N° De Châssis !== N° De Châssis ==! */
               , vhcl_rgsr_no                  /** N° d'immatriculation du véhicule !== N° d'immatriculation du véhicule ==! */
               , vhcl_mnur_cd                  /** Code De Fabricant Du Véhicule !== Code De Fabricant Du Véhicule ==! */
               , vhcl_mdl_cd                   /** Code De Modèle Du Véhicule !== Code De Modèle Du Véhicule ==! */
               , vhcl_knd_nm                   /** Type De Véhicule !== Type De Véhicule ==! */
               , vhcl_mnfc_yy                  /** Année De Fabrication De Véhicule !== Année De Fabrication De Véhicule ==! */
               , vhcl_totl_wght                /** Poids total en charge !== Poids total en charge ==! */
               , del_yn                        /** Suppression On !== Suppression On ==! */
               , frst_rgsr_dttm                /** Date Et Heure De Premier Enregistrement !== Date Et Heure De Premier Enregistrement ==! */
               , last_chpr_id                  /** Id Du Modificateur Final !== Id Du Modificateur Final ==! */
               , last_chg_dttm                 /** Date Et Heure De Modification Finale !== Date Et Heure De Modification Finale ==! */
               , engn_clnd_gcnt                /** Nombre De Cylindres De Moteur !== Nombre De Cylindres De Moteur ==! */
               , frst_regst_id                 /** Id Du Premier Enregistrant  !== Id Du Premier Enregistrant  ==! */
        )  VALUES (
                 #{cagDcshRgsrMgmtNo}          /** Numéro de gestion de l'enregistrement de la déclaration de fret !== Numéro de gestion de l'enregistrement de la déclaration de fret ==! */
               , #{blSrno}                     /** N° De Séquence De Bl !== N° De Séquence De Bl ==! */
               , #{vhclSrno}                   /** Numéro De Séquence De Véhicule !== Numéro De Séquence De Véhicule ==! */
               , #{chssNo}                     /** N° De Châssis !== N° De Châssis ==! */
               , #{vhclRgsrNo}                 /** N° d'immatriculation du véhicule !== N° d'immatriculation du véhicule ==! */
               , #{vhclMnurCd}                 /** Code De Fabricant Du Véhicule !== Code De Fabricant Du Véhicule ==! */
               , #{vhclMdlCd}                  /** Code De Modèle Du Véhicule !== Code De Modèle Du Véhicule ==! */
               , #{vhclKndNm}                  /** Type De Véhicule !== Type De Véhicule ==! */
               , #{vhclMnfcYy}                 /** Année De Fabrication De Véhicule !== Année De Fabrication De Véhicule ==! */
               , #{vhclTotlWght}               /** Poids total en charge !== Poids total en charge ==! */
               , 'N'                           /** Suppression On !== Suppression On ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Premier Enregistrement !== Date Et Heure De Premier Enregistrement ==! */
               , #{lastChprId}                 /** Id Du Modificateur Final !== Id Du Modificateur Final ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Modification Finale !== Date Et Heure De Modification Finale ==! */
               , #{engnClndGcnt}               /** Nombre De Cylindres De Moteur !== Nombre De Cylindres De Moteur ==! */
               , #{frstRegstId}                /** Id Du Premier Enregistrant  !== Id Du Premier Enregistrant  ==! */
        )
    ON CONFLICT ( CAG_DCSH_RGSR_MGMT_NO, BL_SRNO, VHCL_SRNO )
    DO UPDATE SET
         LAST_CHPR_ID     = #{lastChprId}
       , LAST_CHG_DTTM   = SYSTIMESTAMP
       , DEL_YN       = 'N'
       <if test="chssNo != null and chssNo != ''">
             , chss_no = #{chssNo}                            /** N° De Châssis !== N° De Châssis ==! */ 
             </if>
             <if test="vhclRgsrNo != null and vhclRgsrNo != ''">
             , vhcl_rgsr_no = #{vhclRgsrNo}                   /** N° d'immatriculation du véhicule !== N° d'immatriculation du véhicule ==! */ 
             </if>
             <if test="vhclMnurCd != null and vhclMnurCd != ''">
             , vhcl_mnur_cd = #{vhclMnurCd}                   /** Code De Fabricant Du Véhicule !== Code De Fabricant Du Véhicule ==! */ 
             </if>
             <if test="vhclMdlCd != null and vhclMdlCd != ''">
             , vhcl_mdl_cd = #{vhclMdlCd}                     /** Code De Modèle Du Véhicule !== Code De Modèle Du Véhicule ==! */ 
             </if>
             <if test="vhclKndNm != null and vhclKndNm != ''">
             , vhcl_knd_nm = #{vhclKndNm}                     /** Type De Véhicule !== Type De Véhicule ==! */ 
             </if>
             <if test="vhclMnfcYy != null and vhclMnfcYy != ''">
             , vhcl_mnfc_yy = #{vhclMnfcYy}                   /** Année De Fabrication De Véhicule !== Année De Fabrication De Véhicule ==! */ 
             </if>
             <if test="vhclTotlWght != null and vhclTotlWght != ''">
             , vhcl_totl_wght = #{vhclTotlWght}               /** Poids total en charge !== Poids total en charge ==! */ 
             </if>
             <if test="engnClndGcnt != null and engnClndGcnt != ''">
             , engn_clnd_gcnt = #{engnClndGcnt}               /** Nombre De Cylindres De Moteur !== Nombre De Cylindres De Moteur ==! */ 
             </if>
  </insert>
  

  <!--
  Enregistrement de la déclaration de cargaison (remorque) !==화물신고서 (트레일러) 등록 한다.==!
  (Lee, Dongho) 
  --> 
  <insert id="insertCagDcshEptBlTrlrByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlTrlrVo" >
    /* CarCagDcshMdfyMapper.insertCagDcshEptBlTrlrByMdfy */
    INSERT INTO alpassext.TB_CARE_CAG_DCSH_BL_TRLR
           ( bl_srno                       /** N° De Séquence De Bl !== N° De Séquence De Bl ==! */
               , cag_dcsh_rgsr_mgmt_no         /** Numéro de gestion de l'enregistrement de la déclaration de fret !== Numéro de gestion de l'enregistrement de la déclaration de fret ==! */
               , trlr_srno                     /** Numéro de série de la remorque !== Numéro de série de la remorque ==! */
               , vhcl_rgsr_no                  /** N° d'immatriculation du véhicule !== N° d'immatriculation du véhicule ==! */
               , chss_no                       /** N° De Châssis !== N° De Châssis ==! */
               , trlr_stsz                     /** Gabarit De Remorque !== Gabarit De Remorque ==! */
               , del_yn                        /** Suppression On !== Suppression On ==! */
               , frst_regst_id                 /** Id Du Premier Enregistrant  !== Id Du Premier Enregistrant  ==! */
               , frst_rgsr_dttm                /** Date Et Heure De Premier Enregistrement !== Date Et Heure De Premier Enregistrement ==! */
               , last_chpr_id                  /** Id Du Modificateur Final !== Id Du Modificateur Final ==! */
               , last_chg_dttm                 /** Date Et Heure De Modification Finale !== Date Et Heure De Modification Finale ==! */
        )  VALUES (
                 #{blSrno}                     /** N° De Séquence De Bl !== N° De Séquence De Bl ==! */
               , #{cagDcshRgsrMgmtNo}          /** Numéro de gestion de l'enregistrement de la déclaration de fret !== Numéro de gestion de l'enregistrement de la déclaration de fret ==! */
               , #{trlrSrno}                   /** Numéro de série de la remorque !== Numéro de série de la remorque ==! */
               , #{vhclRgsrNo}                 /** N° d'immatriculation du véhicule !== N° d'immatriculation du véhicule ==! */
               , #{chssNo}                     /** N° De Châssis !== N° De Châssis ==! */
               , #{trlrStsz}                   /** Gabarit De Remorque !== Gabarit De Remorque ==! */
               , 'N'                           /** Suppression On !== Suppression On ==! */
               , #{frstRegstId}                /** Id Du Premier Enregistrant  !== Id Du Premier Enregistrant  ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Premier Enregistrement !== Date Et Heure De Premier Enregistrement ==! */
               , #{lastChprId}                 /** Id Du Modificateur Final !== Id Du Modificateur Final ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Modification Finale !== Date Et Heure De Modification Finale ==! */
        )
    ON CONFLICT( CAG_DCSH_RGSR_MGMT_NO, BL_SRNO, TRLR_SRNO )
    DO UPDATE SET
        LAST_CHPR_ID     = #{lastChprId}
      , LAST_CHG_DTTM   = SYSTIMESTAMP
      , DEL_YN       = 'N'
      <if test="vhclRgsrNo != null and vhclRgsrNo != ''">
            , vhcl_rgsr_no = #{vhclRgsrNo}                   /** N° d'immatriculation du véhicule !== N° d'immatriculation du véhicule ==! */ 
            </if>
            <if test="chssNo != null and chssNo != ''">
            , chss_no = #{chssNo}                            /** N° De Châssis !== N° De Châssis ==! */ 
            </if>
            <if test="trlrStsz != null and trlrStsz != ''">
            , trlr_stsz = #{trlrStsz}                        /** Gabarit De Remorque !== Gabarit De Remorque ==! */ 
            </if>
  </insert>
  <!--
  Enregistrement de la déclaration de cargaison (train) !==화물신고서 (열차) 등록 한다.==!
  (Lee, Dongho)
  -->
  <insert id="insertCagDcshEptBlTrnByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlTrnVo" >
    /* CarCagDcshMdfyMapper.insertCagDcshEptBlTrnByMdfy */
    INSERT INTO alpassext.TB_CARE_CAG_DCSH_BL_TRN
           ( bl_srno                       /** N° De Séquence De Bl !== N° De Séquence De Bl ==! */
               , cag_dcsh_rgsr_mgmt_no         /** Numéro de gestion de l'enregistrement de la déclaration de fret !== Numéro de gestion de l'enregistrement de la déclaration de fret ==! */
               , trn_srno                      /** numéro de série du train !== numéro de série du train ==! */
               , wgn_no                        /** N° De Wagon !== N° De Wagon ==! */
               , wgn_type                      /** type de wagon !== type de wagon ==! */
               , del_yn                        /** Suppression On !== Suppression On ==! */
               , frst_regst_id                 /** Id Du Premier Enregistrant  !== Id Du Premier Enregistrant  ==! */
               , frst_rgsr_dttm                /** Date Et Heure De Premier Enregistrement !== Date Et Heure De Premier Enregistrement ==! */
               , last_chpr_id                  /** Id Du Modificateur Final !== Id Du Modificateur Final ==! */
               , last_chg_dttm                 /** Date Et Heure De Modification Finale !== Date Et Heure De Modification Finale ==! */
               , trn_rgsr_no                   /** N° enregistrement du train !== N° enregistrement du train ==! */
        )  VALUES (
                 #{blSrno}                     /** N° De Séquence De Bl !== N° De Séquence De Bl ==! */
               , #{cagDcshRgsrMgmtNo}          /** Numéro de gestion de l'enregistrement de la déclaration de fret !== Numéro de gestion de l'enregistrement de la déclaration de fret ==! */
               , #{trnSrno}                    /** numéro de série du train !== numéro de série du train ==! */
               , #{wgnNo}                      /** N° De Wagon !== N° De Wagon ==! */
               , #{wgnType}                    /** type de wagon !== type de wagon ==! */
               , 'N'                           /** Suppression On !== Suppression On ==! */
               , #{frstRegstId}                /** Id Du Premier Enregistrant  !== Id Du Premier Enregistrant  ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Premier Enregistrement !== Date Et Heure De Premier Enregistrement ==! */
               , #{lastChprId}                 /** Id Du Modificateur Final !== Id Du Modificateur Final ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Modification Finale !== Date Et Heure De Modification Finale ==! */
               , #{trnRgsrNo}                  /** N° enregistrement du train !== N° enregistrement du train ==! */
        )
    ON CONFLICT( CAG_DCSH_RGSR_MGMT_NO, BL_SRNO, TRN_SRNO )
    DO UPDATE SET
        LAST_CHPR_ID     = #{lastChprId}
      , LAST_CHG_DTTM   = SYSTIMESTAMP
      , DEL_YN       = 'N'
      <if test="wgnNo != null">
            , wgn_no = #{wgnNo}                              /** N° De Wagon !== N° De Wagon ==! */ 
            </if>
            <if test="wgnType != null">
            , wgn_type = #{wgnType}                          /** type de wagon !== type de wagon ==! */ 
            </if>
            <if test="trnRgsrNo != null">
            , trn_rgsr_no = #{trnRgsrNo}                     /** N° enregistrement du train !== N° enregistrement du train ==! */ 
            </if>
  </insert>

  <!--
  Enregistrement de la déclaration de cargaison (Accomplissement d'exportation) !==화물신고서 (수출이행) 등록 한다.==!
  (Lee, Dongho)
  -->
  <insert id="insertCagDcshEptBlExfmByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlExfmVo" >
    /* CarCagDcshMdfyMapper.insertCagDcshEptBlExfmByMdfy */
    INSERT INTO alpassext.TB_CARE_CAG_DCSH_BL_EXFM
           ( cag_dcsh_rgsr_mgmt_no         /** Numéro de gestion de l'enregistrement de la déclaration de fret !== Numéro de gestion de l'enregistrement de la déclaration de fret ==! */
               , bl_srno                       /** N° De Séquence De Bl !== N° De Séquence De Bl ==! */
               , exp_ffmn_srno                 /** N° De Séquence De L'Apurement D'Exportation !== N° De Séquence De L'Apurement D'Exportation ==! */
               , exp_ffmn_tp_cd                /** Type D'Apurement D'Exportation !== Type D'Apurement D'Exportation ==! */
               , exp_ffmn_no                   /** N° D'Apurement D'Exportation !== N° D'Apurement D'Exportation ==! */
               , divd_shpm_yn                  /** Chargement Partiel On !== Chargement Partiel On ==! */
               , divd_shpm_dgcnt               /** Nombre De Chargement Partiel !== Nombre De Chargement Partiel ==! */
               , divd_shpm_last_yn             /** Dernier Chargement Partiel On !== Dernier Chargement Partiel On ==! */
               , pckg_gcnt                     /** Nombre De Colis !== Nombre De Colis ==! */
               , pckg_ut_cd                    /** Code De L'Unité De Colis !== Code De L'Unité De Colis ==! */
               , ttwg                          /** Poids Brut !== Poids Brut ==! */
               , del_yn                        /** Suppression On !== Suppression On ==! */
               , frst_regst_id                 /** Id Du Premier Enregistrant  !== Id Du Premier Enregistrant  ==! */
               , frst_rgsr_dttm                /** Date Et Heure De Premier Enregistrement !== Date Et Heure De Premier Enregistrement ==! */
               , last_chpr_id                  /** Id Du Modificateur Final !== Id Du Modificateur Final ==! */
               , last_chg_dttm                 /** Date Et Heure De Modification Finale !== Date Et Heure De Modification Finale ==! */
        )  VALUES (
                 #{cagDcshRgsrMgmtNo}          /** Numéro de gestion de l'enregistrement de la déclaration de fret !== Numéro de gestion de l'enregistrement de la déclaration de fret ==! */
               , #{blSrno}                     /** N° De Séquence De Bl !== N° De Séquence De Bl ==! */
               , #{expFfmnSrno}                /** N° De Séquence De L'Apurement D'Exportation !== N° De Séquence De L'Apurement D'Exportation ==! */
               , #{expFfmnTpCd}                /** Type D'Apurement D'Exportation !== Type D'Apurement D'Exportation ==! */
               , REPLACE(#{expFfmnNo},'-','')  /** N° D'Apurement D'Exportation !== N° D'Apurement D'Exportation ==! */
               , #{divdShpmYn}                 /** Chargement Partiel On !== Chargement Partiel On ==! */
               , #{divdShpmDgcnt}              /** Nombre De Chargement Partiel !== Nombre De Chargement Partiel ==! */
               , #{divdShpmLastYn}             /** Dernier Chargement Partiel On !== Dernier Chargement Partiel On ==! */
               , #{pckgGcnt}                   /** Nombre De Colis !== Nombre De Colis ==! */
               , #{pckgUtCd}                   /** Code De L'Unité De Colis !== Code De L'Unité De Colis ==! */
               , #{ttwg}                       /** Poids Brut !== Poids Brut ==! */
               , 'N'                           /** Suppression On !== Suppression On ==! */
               , #{frstRegstId}                /** Id Du Premier Enregistrant  !== Id Du Premier Enregistrant  ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Premier Enregistrement !== Date Et Heure De Premier Enregistrement ==! */
               , #{lastChprId}                 /** Id Du Modificateur Final !== Id Du Modificateur Final ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Modification Finale !== Date Et Heure De Modification Finale ==! */
        )
    ON CONFLICT( CAG_DCSH_RGSR_MGMT_NO, BL_SRNO, EXP_FFMN_SRNO )
    DO UPDATE SET
        LAST_CHPR_ID     = #{lastChprId}
      , LAST_CHG_DTTM   = SYSTIMESTAMP
      , DEL_YN       = 'N'
      <if test="expFfmnTpCd != null">
            , exp_ffmn_tp_cd = #{expFfmnTpCd}                /** Type D'Apurement D'Exportation !== Type D'Apurement D'Exportation ==! */ 
            </if>
            <if test="expFfmnNo != null">
            , exp_ffmn_no = #{expFfmnNo}                     /** N° D'Apurement D'Exportation !== N° D'Apurement D'Exportation ==! */ 
            </if>
            <if test="divdShpmYn != null">
            , divd_shpm_yn = #{divdShpmYn}                   /** Chargement Partiel On !== Chargement Partiel On ==! */ 
            </if>
            <if test="divdShpmDgcnt != null">
            , divd_shpm_dgcnt = #{divdShpmDgcnt}             /** Nombre De Chargement Partiel !== Nombre De Chargement Partiel ==! */ 
            </if>
            <if test="divdShpmLastYn != null">
            , divd_shpm_last_yn = #{divdShpmLastYn}          /** Dernier Chargement Partiel On !== Dernier Chargement Partiel On ==! */ 
            </if>
            <if test="pckgGcnt != null">
            , pckg_gcnt = #{pckgGcnt}                        /** Nombre De Colis !== Nombre De Colis ==! */ 
            </if>
            <if test="pckgUtCd != null">
            , pckg_ut_cd = #{pckgUtCd}                       /** Code De L'Unité De Colis !== Code De L'Unité De Colis ==! */ 
            </if>
            <if test="ttwg != null">
            , ttwg = #{ttwg}                                 /** Poids Brut !== Poids Brut ==! */ 
            </if>
  </insert>
  
  <!--
  Modification des sommaires de la déclaration de cargaison (BL, Poids brut, Nombre de colis, de conteneurs, de véhicules)
  * !== 화물신고서 요약정보 변경(BL,포장,총중량,컨테이너, 차량 개수) ==!
  (Lee, Dongho)
  --> 
  <update id="updateCagDcshEptSummaryInfo" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* CarCagDcshMdfyMapper.updateCagDcshEptSummaryInfo */
    UPDATE alpassext.TB_CARE_CAG_DCSH A
    SET AL_BL_GCNT   = ( SELECT COUNT(1)
                                  FROM TB_CARE_CAG_DCSH_BL
                                 WHERE cag_dcsh_rgsr_mgmt_no = a.cag_dcsh_rgsr_mgmt_no
                                   AND BL_PT_CD = 'M'
                                   AND DEL_YN = 'N'
                               ) /** Nombre total de BL !==전체BL개수==! */
             , AL_PCKG_GCNT = ( SELECT NVL(SUM(PCKG_GCNT), 0)
                                  FROM TB_CARE_CAG_DCSH_BL
                                 WHERE cag_dcsh_rgsr_mgmt_no = a.cag_dcsh_rgsr_mgmt_no
                                   AND BL_PT_CD = 'M'
                                   AND DEL_YN = 'N'
                               ) /** Nombre total de colis  !==전체포장개수==! */
             , AL_TTWG      = ( SELECT NVL(SUM(DECODE(CAG_CHRC_CD, '9', LIR_VOL, TTWG)), 0)
                                  FROM TB_CARE_CAG_DCSH_BL
                                 WHERE cag_dcsh_rgsr_mgmt_no =a.cag_dcsh_rgsr_mgmt_no
                                   AND BL_PT_CD = 'M'
                                   AND DEL_YN = 'N'
                              ) /** Poids brut total !==전체총중량==! */
             , AL_CNTR_GCNT = ( SELECT count (DISTINCT c.cntr_no )
                                  FROM TB_CARE_CAG_DCSH_BL b
                                 INNER JOIN tb_care_cag_dcsh_bl_cntr c
                                    ON b.cag_dcsh_rgsr_mgmt_no = c.cag_dcsh_rgsr_mgmt_no
                                   AND b.bl_srno = c.bl_srno
                                 WHERE b.cag_dcsh_rgsr_mgmt_no = a.cag_dcsh_rgsr_mgmt_no
                                   AND b.BL_PT_CD = 'M'
                                   AND b.DEL_YN = 'N'
                                   AND c.DEL_YN = 'N'
                              ) /** Nombre total de conteneurs !==전체컨테이너개수==! */
             , AL_VHCL_GCNT = ( SELECT NVL(SUM(VHCL_GCNT), 0)
                                  FROM TB_CARE_CAG_DCSH_BL
                                 WHERE cag_dcsh_rgsr_mgmt_no = a.cag_dcsh_rgsr_mgmt_no
                                   AND BL_PT_CD = 'M'
                                   AND DEL_YN = 'N'
                              ) /** Nombre total de véhicules !==전체차량개수==! */
             , AL_NTWG      = ( SELECT NVL(SUM(DECODE(CAG_CHRC_CD, '9', LIR_VOL, NTWG)), 0)
                                  FROM TB_CARE_CAG_DCSH_BL
                                 WHERE cag_dcsh_rgsr_mgmt_no = a.cag_dcsh_rgsr_mgmt_no
                                   AND BL_PT_CD = 'M'
                                   AND DEL_YN = 'N'
                              )                    /** Poids net total (KG) !== 전체 순중량 ==! */   
             , LDUN_BL_GCNT = ( SELECT COUNT(1)
                              FROM TB_CARE_CAG_DCSH_BL
                             WHERE cag_dcsh_rgsr_mgmt_no = a.cag_dcsh_rgsr_mgmt_no
                               AND BL_PT_CD = 'M'
                               AND DEL_YN = 'N'
                               AND nvl(LDUN_YN,'N') = 'Y'
                           )  /** Nombre de BL déchargé !== 양하BL개수 ==! */  
         , AL_ECNTR_CNT = ( SELECT COUNT(Y.CNTR_SRNO)
                          FROM TB_CARE_CAG_DCSH_BL X
                          JOIN TB_CARE_CAG_DCSH_BL_CNTR Y
                            ON X.cag_dcsh_rgsr_mgmt_no = Y.cag_dcsh_rgsr_mgmt_no
                           AND X.bl_srno = X.bl_srno
                         WHERE X.CAG_CHRC_CD = '7'
                           AND X.BL_PT_CD = 'M'
                           AND X.DEL_YN = 'N'
                           AND Y.DEL_YN = 'N'
                           AND X.cag_dcsh_rgsr_mgmt_no = a.cag_dcsh_rgsr_mgmt_no
                      )                    
    WHERE 1=1
      AND MRN = #{mrn}      /** MRN !==MRN==! */
  </update>
  
  <!--
  Modification des sommaires de la déclaration de cargaison (BL, Poids brut, Nombre de colis, de conteneurs, de véhicules)
  * !== 화물신고서 요약정보 변경(BL,포장,총중량,컨테이너, 차량 개수) ==!
  --> 
  <update id="updateCagDcshEptBlSummaryInfo" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* CarCagDcshMdfyMapper.updateCagDcshEptBlSummaryInfo */
    UPDATE alpassext.TB_CARE_CAG_DCSH_BL A
       SET PCKG_GCNT = ( SELECT NVL(SUM(PCKG_GCNT), 0)
                               FROM TB_CARE_CAG_DCSH_BL
                              WHERE cag_dcsh_rgsr_mgmt_no = a.cag_dcsh_rgsr_mgmt_no
                                AND BL_NO = a.BL_NO
                                AND BL_PT_CD = 'H'
                                AND DEL_YN = 'N'
                       ) /** Nombre total de colis  !==전체포장개수==! */
             , LIR_VOL = ( SELECT NVL(SUM(LIR_VOL), 0)
                             FROM TB_CARE_CAG_DCSH_BL
                            WHERE cag_dcsh_rgsr_mgmt_no = a.cag_dcsh_rgsr_mgmt_no
                              AND BL_NO = a.BL_NO
                              AND BL_PT_CD = 'H'
                              AND CAG_CHRC_CD = '9'
                              AND DEL_YN = 'N'
                    ) /** Volume (Litre) !==리터용적==! */
             , TTWG = ( SELECT NVL(SUM(TTWG), 0)
                          FROM TB_CARE_CAG_DCSH_BL
                         WHERE cag_dcsh_rgsr_mgmt_no = a.cag_dcsh_rgsr_mgmt_no
                           AND BL_NO = a.BL_NO
                           AND BL_PT_CD = 'H'
                           AND CAG_CHRC_CD != '9'
                           AND DEL_YN = 'N'
                     ) /** Poids brut total !==전체총중량==! */
             , NTWG = ( SELECT NVL(SUM(NTWG), 0)
                          FROM TB_CARE_CAG_DCSH_BL
                         WHERE cag_dcsh_rgsr_mgmt_no = a.cag_dcsh_rgsr_mgmt_no
                           AND BL_NO = a.BL_NO
                           AND BL_PT_CD = 'H'
                           AND CAG_CHRC_CD != '9'
                           AND DEL_YN = 'N'
                      ) /** Poids Net Total !== 전체순중량 ==! */  
             , CNTR_GCNT = ( SELECT COUNT(*) 
                               FROM TB_CARE_CAG_DCSH_BL_CNTR X
                              WHERE X.cag_dcsh_rgsr_mgmt_no = A.cag_dcsh_rgsr_mgmt_no
                                AND X.BL_SRNO = A.BL_SRNO
                                AND X.DEL_YN = 'N'   
                           ) /** Nombre total de conteneurs !==전체컨테이너개수==! */
             /*, VHCL_GCNT = ( SELECT NVL(SUM(VHCL_GCNT), 0)
                               FROM TB_CARE_CAG_DCSH_BL
                              WHERE cag_dcsh_rgsr_mgmt_no = a.cag_dcsh_rgsr_mgmt_no
                                AND BL_NO = a.BL_NO
                                AND BL_PT_CD = 'H'
                                AND DEL_YN = 'N'
                             ) */ /** Nombre total de véhicules !==전체차량개수==! */
             , VHCL_GCNT = ( SELECT COUNT(1) 
                               FROM (SELECT VHCL.CHSS_NO
                             FROM TB_CARE_CAG_DCSH_BL BL,
                                  TB_CARE_CAG_DCSH_BL_VHCL VHCL
                            WHERE BL.cag_dcsh_rgsr_mgmt_no = VHCL.cag_dcsh_rgsr_mgmt_no
                            AND BL.bl_srno = VHCL.bl_srno
                            AND BL.cag_dcsh_rgsr_mgmt_no = a.cag_dcsh_rgsr_mgmt_no
                          AND BL.BL_NO = a.BL_NO
                            AND BL.BL_PT_CD='H'
                            AND BL.DEL_YN = 'N'
                            AND VHCL.DEL_YN = 'N'
                        )
                   ) /** Nombre total de véhicules !==전체차량개수==! */                 
             , PCKG_UT_CD = ( SELECT PCKG_UT_CD
                                FROM TB_CARE_CAG_DCSH_BL
                               WHERE cag_dcsh_rgsr_mgmt_no = a.cag_dcsh_rgsr_mgmt_no
                                 AND BL_NO = a.BL_NO
                                 AND BL_PT_CD = 'H'
                                 AND DEL_YN = 'N'
                               ORDER BY TTWG DESC
                               LIMIT 1
                     ) /** Code De L'Unité De Colis !== 포장단위코드 ==! */
             , AL_HBL_GCNT = ( SELECT count(*)
                                 FROM TB_CARE_CAG_DCSH_BL
                                WHERE cag_dcsh_rgsr_mgmt_no = a.cag_dcsh_rgsr_mgmt_no
                                  AND BL_NO = a.BL_NO
                                  AND BL_PT_CD = 'H'
                                  AND DEL_YN = 'N'
               ) /** Nombre Total De Sous Bl !== 전체HBL개수 ==! */
    WHERE 1=1
        AND CAG_DCSH_RGSR_MGMT_NO = #{cagDcshRgsrMgmtNo}  /** N° de gestion d'enregistrement de manifeste !==적하목록등록관리번호==! */
        AND BL_NO = #{blNo}
        AND BL_PT_CD = 'M'
        AND DEL_YN = 'N'
  </update>
  
  <!--
  Supprimer la Rectifier la déclaration de cargaison (BL) !==화물신고서 정정 (BL) 삭제 한다.==!
  (Lee, Dongho)
  --> 
  <update id="deleteCagDcshIptBlByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* CarCagDcshMdfyMapper.deleteCagDcshIptBlByMdfy */
    UPDATE TB_CARI_CAG_DCSH_BL
       SET DEL_YN        = 'Y'                     /** Suppression ON !==삭제여부==! */
         , BL_MDFY_TP_CD  = #{blMdfyTpCd}
     WHERE  1=1
       AND MRN          = #{mrn}                      /** MRN !==MRN==! */
       AND CAG_MGMT_NO  = #{cagMgmtNo}                 /** CRN !==화물관리번호==! */
  </update>  
  
  <!--
  Supprimer la Rectifier la déclaration de cargaison (BL) !==화물신고서 정정 (BL) 삭제 한다.==!
  (Lee, Dongho)
  --> 
  <update id="deleteCagDcshEptBlByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* CarCagDcshMdfyMapper.deleteCagDcshEptBlByMdfy */
    UPDATE alpassext.TB_CARE_CAG_DCSH_BL TGTBL
    SET 
      TGTBL.DEL_YN        = 'Y'                        /** Suppression ON !==삭제여부==! */
      , TGTBL.BL_MDFY_TP_CD  = #{blMdfyTpCd}
    WHERE  1=1 
      AND TGTBL.BL_SRNO IN (
        SELECT BL.BL_SRNO
        FROM alpassext.TB_CARE_CAG_DCSH_BL BL, alpassext.TB_CARE_CAG_DCSH MNFS
        WHERE 
          MNFS.CAG_DCSH_RGSR_MGMT_NO = BL.CAG_DCSH_RGSR_MGMT_NO
          AND MNFS.MRN   = #{mrn}                           /** MRN !==MRN==! */
          <!-- AND BL.BL_NO  = #{blNo}                          /** N° de BL !==BL번호==! */ -->
          AND BL.CAG_MGMT_NO = #{cagMgmtNo}                  /** CRN !==화물관리번호==! */
      )
      AND TGTBL.CAG_DCSH_RGSR_MGMT_NO = (
        SELECT MNFS.CAG_DCSH_RGSR_MGMT_NO
        FROM alpassext.TB_CARE_CAG_DCSH_BL BL, alpassext.TB_CARE_CAG_DCSH MNFS
        WHERE 
          MNFS.CAG_DCSH_RGSR_MGMT_NO = BL.CAG_DCSH_RGSR_MGMT_NO
          AND MNFS.MRN   = #{mrn}                           /** MRN !==MRN==! */
          <!-- AND BL.BL_NO  = #{blNo}                          /** N° de BL !==BL번호==! */ -->
          AND BL.CAG_MGMT_NO = #{cagMgmtNo}                  /** CRN !==화물관리번호==! */
        GROUP BY MNFS.CAG_DCSH_RGSR_MGMT_NO
      )
  </update>
  


  <!--
  [  déclaration de cargaison ] Voir le mot-clé pour voir  !== 화물신고서 신청번호에 해당하는 키를 조회한다.   ==!
  (Lee, Dongho)
  --> 
  <select id="selectCagDcshBlKeyByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo">
    /* CarCagDcshMdfyMapper.selectCagDcshBlKeyByMdfy */
    SELECT M.CAG_DCSH_RGSR_MGMT_NO               /** Numéro de gestion de l'enregistrement de la déclaration de fret !== 화물신고서등록관리번호 ==! */
         , M.MRN                                /** MRN !==MRN==! */
         , CAG_MGMT_NO                          /** CRN !==화물관리번호==! */
         , MSN                                  /** MSN !==MSN==! */
         , HSN                                  /** HSN !==HSN==! */
         , BL_NO                                /** N° de BL !==BL번호==! */
         , HBL_NO                               /** N° de sous BL !==HBL번호==! */
         , CAG_TP_CD                            /** Nature de type de cargaison !==화물구분코드==! */
         , BL_TP_CD                             /** Type de BL !==BL구분코드==! */
         , BL_PT_CD                             /** Code de type de BL !==BL유형코드==! */
         , B.TTWG                               /** Poids brut !==총중량==! */
         , B.PCKG_GCNT                            /** Nombre de colis !==포장개수==! */
         , B.DEL_YN                               /** Suppression ON !==삭제여부==! */
         , B.FRST_REGST_ID                        /** ID du premier enregistrant  !==최초등록자ID==! */
         , TO_CHAR(B.FRST_RGSR_DTTM,'DD/MM/YYYY HH24:MI:SS') AS FRST_RGSR_DTTM  /** Date et heure de premier enregistrement !==최초등록일시==! */
         , B.LAST_CHPR_ID                         /** ID du modificateur final !==최종변경자ID==! */
         , TO_CHAR(B.LAST_CHG_DTTM,'DD/MM/YYYY HH24:MI:SS') AS LAST_CHG_DTTM  /** Date et heure de modification finale !==최종변경일시==! */
      FROM TB_CARI_CAG_DCSH M
      LEFT OUTER JOIN TB_CARI_CAG_DCSH_BL B
        ON M.MRN = B.MRN AND B.DEL_YN='N'
       <if test="blPtCd != null and blPtCd != ''">
       AND B.BL_PT_CD = #{blPtCd}          /** Code de type de BL !==BL유형코드==! */
       </if>
       <if test="cagTpCd != null and cagTpCd != ''">
       AND B.CAG_TP_CD = #{cagTpCd}          /** Nature de type de cargaison !==화물구분코드==! */
       </if>
       <if test="blTpCd != null and blTpCd != ''">
       AND B.BL_TP_CD = #{blTpCd}            /** Type de BL !==BL구분코드==! */
       </if>
       <if test="cagMgmtNo != null and cagMgmtNo != ''">
       AND B.CAG_MGMT_NO = #{cagMgmtNo}       /** CRN !==화물관리번호==! */
       </if>
       <if test="cagMgmtNoMbl != null and cagMgmtNoMbl != ''">
       AND B.CAG_MGMT_NO = #{cagMgmtNoMbl}       /** CRN MASTER !==마스터 화물관리번호==! */
       </if>
     WHERE 1=1
       AND M.MRN = B.MRN
       AND M.DEL_YN = 'N'
       AND M.MRN = #{mrn}                      /** MRN !==MRN==! */
       AND ROWNUM = 1
  </select>
  

  <!--
  Enregistrement de la Rectifier la déclaration de cargaison (véhicule) !==화물신고서 (자동차) 등록 한다.==!
  (Shin Munsik)
  -->
  <insert  id="insertCagDcshIptMdfyBlVhcl" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVhclVo" >
    /* CariComnAprvBatch.insertCariMnfsMdfyBlVhcl */
    INSERT INTO TB_CARI_CAG_DCSH_MDFY_BL_VHCL
               ( cag_dcsh_mdfy_rqst_no         /** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
               , bl_srno                       /** N° De Séquence De Bl !== BL일련번호 ==! */
               , vhcl_srno                     /** Numéro De Séquence De Véhicule !== 차량일련번호 ==! */
               , chss_no                       /** N° De Châssis !== 차대번호 ==! */
               , vhcl_rgsr_no                  /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */
               , vhcl_mnur_cd                  /** Code De Fabricant Du Véhicule !== 차량제조사코드 ==! */
               , vhcl_mdl_cd                   /** Code De Modèle Du Véhicule !== 차량모델코드 ==! */
               , vhcl_knd_nm                   /** Type De Véhicule !== 차량종류명 ==! */
               , vhcl_mnfc_yy                  /** Année De Fabrication De Véhicule !== 차량제조년도 ==! */
               , engn_clnd_gcnt                /** Nombre De Cylindres De Moteur !== 엔진기통개수 ==! */
               , vhcl_totl_wght                /** Poids total en charge !== 차량총중량 ==! */
               , del_yn                        /** Suppression On !== 삭제여부 ==! */
               , frst_regst_id                 /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , frst_rgsr_dttm                /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , last_chpr_id                  /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , last_chg_dttm                 /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
        )  VALUES (
                 #{cagDcshMdfyRqstNo}          /** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
               , #{blSrno}                     /** N° De Séquence De Bl !== BL일련번호 ==! */
      , #{vhclSrno}                   /** Numéro De Séquence De Véhicule !== 차량일련번호 ==! */
               , #{chssNo}                     /** N° De Châssis !== 차대번호 ==! */
               , #{vhclRgsrNo}                 /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */
               , #{vhclMnurCd}                 /** Code De Fabricant Du Véhicule !== 차량제조사코드 ==! */
               , #{vhclMdlCd}                  /** Code De Modèle Du Véhicule !== 차량모델코드 ==! */
               , #{vhclKndNm}                  /** Type De Véhicule !== 차량종류명 ==! */
               , #{vhclMnfcYy}                 /** Année De Fabrication De Véhicule !== 차량제조년도 ==! */
               , #{engnClndGcnt}               /** Nombre De Cylindres De Moteur !== 엔진기통개수 ==! */
               , #{vhclTotlWght}               /** Poids total en charge !== 차량총중량 ==! */
               , #{delYn}                      /** Suppression On !== 삭제여부 ==! */
               , #{frstRegstId}                /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , #{lastChprId}                 /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
        )
  </insert>
  
  <!--
  Enregistrement de la Rectifier la déclaration de cargaison (BL) !==화물신고서 (BL) 등록 한다.==!
  (Shin Munsik)
  -->
  <insert id="insertCagDcshIptMdfyBl" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo">
      /* CarCagDcshMdfyMapper.insertCagDcshIptMdfyBl */
        INSERT INTO TB_CARI_CAG_DCSH_MDFY_BL
               ( bl_srno                       /** N° De Séquence De Bl !== BL일련번호 ==! */
               , cag_dcsh_mdfy_rqst_no         /** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
               , cag_mgmt_no                   /** N° Demande De La Création De Crn !== 화물관리번호 ==! */
               , msn                           /** Msn !== MSN ==! */
               , hsn                           /** Hsn !== HSN ==! */
               , bl_no                         /** N° De Bl !== BL번호 ==! */
               , hbl_no                        /** N° de House B/L !== HBL번호 ==! */
               , cag_tp_cd                     /** Type de flux !== 화물구분코드 ==! */
               , bl_tp_cd                      /** Code De Catégorie De B/L !== BL구분코드 ==! */
               , bl_pt_cd                      /** Code De Type De Bl !== BL유형코드 ==! */
               , frwr_cd                       /** Code De Groupeur !== 포워더코드 ==! */
               , load_regn_cd                  /** Code De Lieu De Chargement !== 적재지역코드 ==! */
               , ldun_regn_cd                  /** Code De Lieu De Déchargement !== 하역지역코드 ==! */
               , ibobz_cd                      /** Code de zone sous douane !== 보세구역코드 ==! */
               , stvd_cd                       /** Code De Stevedoremanutentionnaire !== 하역업자코드 ==! */
<!--                , trns_regn_cd                  /** Code de lieu de transit international !== 트랜짓지역코드 ==! */ -->
               , trnh_regn_cd                  /** Code De Région De Transbordement !== 환적지역코드 ==! */
               , cag_chrc_cd                   /** Nature De Cargaison !== 화물특성코드 ==! */
               , cmdt_knd_cd                   /** Nature De Marchandise !== 물품종류코드 ==! */
               , pdls_nm                       /** Nom De L'Article !== 품목명 ==! */
               , cas_no                        /** Numero CAS !== CAS번호 ==! */
               , undg_id                        /** Identifiant UNDG !== UNDGID ==! */
               , hs_cd                         /** Code Sh !== HS코드 ==! */
               , send_way                      /** Mode de livraison !== 발송방식 ==! */
               , pckg_gcnt                     /** Nombre De Colis !== 포장개수 ==! */
               , ecntr_wght                    /** Tare De Conteneur(S) À Vide !== 공컨테이너중량 ==! */
               , ttwg                          /** Poids Brut !== 총중량 ==! */
               , ntwg                          /** Poids Net !== 순중량 ==! */
               , cbm_vol                       /** Volume (Mtq) !== 입방미터용적 ==! */
               , lir_vol                       /** Volume (Litre) !== 리터용적 ==! */
               , hdcb_tp_cd                    /** Code de type d'hydrocarbure !== 탄화수소구분코드 ==! */
               , shmr_cn                       /** Marque De Colis !== 화인내용 ==! */
               , add_info_cn                   /** Info Supplémentaire  !== 부가정보내용 ==! */
               , cntr_gcnt                     /** Nombre De Conteneurs !== 컨테이너개수 ==! */
               , vhcl_gcnt                     /** Nombre De Véhicules !== 차량개수 ==! */
               , prpm_dfpm_cach_tp_cd          /** Ind. fret prépayé/dû !== 선불후불운임구분코드 ==! */
               , cmdt_amt                      /** Valeur de marchandise !== 물품금액 ==! */
               , cmdt_amt_curr_cd              /** Article Montant Code de devise !== 물품금액통화코드 ==! */
               , exppn_txpr_idfy_no            /** NIF de l'exportateur !== 수출자납세자식별번호 ==! */
               , exppn_nm                      /** Nom De L'Exportateur !== 수출자명 ==! */
               , exppn_addr_nm                 /** Adresse De L'Exportateur !== 수출자주소명 ==! */
               , exppn_tlph_no                 /** Téléphone De L'Exportateur !== 수출자전화번호 ==! */
               , exppn_eml                     /** Email De L'Exportateur !== 수출자이메일 ==! */
               , abrd_frwr_nm                  /** Nom De L'Expéditeur !== 국외포워더명 ==! */
               , abrd_frwr_addr_nm             /** Adresse De L'Expéditeur !== 국외포워더주소명 ==! */
               , abrd_frwr_tlph_no             /** Téléphone De L'Expéditeur !== 국외포워더전화번호 ==! */
               , abrd_frwr_eml                 /** Email De L'Expéditeur !== 국외포워더이메일 ==! */
               , cnsi_txpr_idfy_no             /** Niu Du Destinataire !== 수하인납세자식별번호 ==! */
               , cnsi_nm                       /** Nom de destinataire !== 수하인명 ==! */
               , cnsi_addr_nm                  /** Adresse Du Destinataire !== 수하인주소명 ==! */
               , cnsi_tlph_no                  /** N° de téléphone de destinataire !== 수하인전화번호 ==! */
               , cnsi_eml                      /** E-mail de destinataire !== 수하인이메일 ==! */
               , ntpr_nm                       /** Nom De La Partie À Notifier !== 통지처명 ==! */
               , ntpr_addr_nm                  /** Adresse De La Partie À Notifier !== 통지처주소명 ==! */
               , ntpr_tlph_no                  /** Téléphone De La Partie À Notifier !== 통지처전화번호 ==! */
               , ntpr_eml                      /** Email De La Partie À Notifier !== 통지처이메일 ==! */
               , bf_cag_mgmt_no                /** Crn Précédent !== 이전화물관리번호 ==! */
               , bl_mdfy_tp_cd                 /** Code de catégorie de rectification de BL !== BL정정구분코드 ==! */
               , del_yn                        /** Suppression On !== 삭제여부 ==! */
               , frst_regst_id                 /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , frst_rgsr_dttm                /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , last_chpr_id                  /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , last_chg_dttm                 /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
               , coat_trnp_yn                  /** Cabotage On !== 연안운송여부 ==! */
               , al_hbl_gcnt                   /** Nombre Total De Sous Bl !== 전체HBL개수 ==! */
               , pckg_ut_cd                    /** Code De L'Unité De Colis !== 포장단위코드 ==! */
               , ldun_yn                       /** TODO:번역필요LKS !== 하역여부 ==! */
               , cnsi_txpr_idfy_no_nin         /** NIN de destinataire !== 수하인납세자식별번호(NIN) ==! */
               , exppn_txpr_idfy_no_nin        /** NIN de l'exportateur !== 수출자납세자식별번호(NIN) ==! */
         , BL_PBLS_DT         /** Date de délivrance du B/L(LTA) !== BL발행일자 ==! */
              , UNDG_GD_CD         /** Code de classe UNDG !== UNDG등급 ==! */
              , CHER_YN           /** affréteur d’espace/slot !== 용선여부 ==! */
             , CHER_GVNM_NM       /** nom de l’affréteur/slotteur !== 용선이름 ==! */
             , CHER_ADDR_NM          /** adresse affréteur/slotteur !== 용선주소 ==! */
        )  VALUES (
                 #{blSrno}                     /** N° De Séquence De Bl !== BL일련번호 ==! */
               , #{cagDcshMdfyRqstNo}          /** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
               , #{cagMgmtNo}                  /** N° Demande De La Création De Crn !== 화물관리번호 ==! */
               , #{msn}                        /** Msn !== MSN ==! */
               , #{hsn}                        /** Hsn !== HSN ==! */
               , #{blNo}                       /** N° De Bl !== BL번호 ==! */
               , #{hblNo}                      /** N° de House B/L !== HBL번호 ==! */
               , #{cagTpCd}                    /** Type de flux !== 화물구분코드 ==! */
               , #{blTpCd}                     /** Code De Catégorie De B/L !== BL구분코드 ==! */
               , #{blPtCd}                     /** Code De Type De Bl !== BL유형코드 ==! */
               , #{frwrCd}                     /** Code De Groupeur !== 포워더코드 ==! */
               , #{loadRegnCd}                 /** Code De Lieu De Chargement !== 적재지역코드 ==! */
               , #{ldunRegnCd}                 /** Code De Lieu De Déchargement !== 하역지역코드 ==! */
               , #{ibobzCd}                    /** Code de zone sous douane !== 보세구역코드 ==! */
               , #{stvdCd}                     /** Code De Stevedoremanutentionnaire !== 하역업자코드 ==! */
<!--                , #{trnsRegnCd}                 /** Code de lieu de transit international !== 트랜짓지역코드 ==! */ -->
               , #{trnhRegnCd}                 /** Code De Région De Transbordement !== 환적지역코드 ==! */
               , #{cagChrcCd}                  /** Nature De Cargaison !== 화물특성코드 ==! */
               , #{cmdtKndCd}                  /** Nature De Marchandise !== 물품종류코드 ==! */
               , #{pdlsNm}                     /** Nom De L'Article !== 품목명 ==! */
               , #{casNo}                      /** Numero CAS !== CAS번호 ==! */
               , #{undgId}                      /** Identifiant UNDG !== UNDGID ==! */
               , #{hsCd}                       /** Code Sh !== HS코드 ==! */
               , #{sendWay}                    /** Mode de livraison !== 발송방식 ==! */
               , #{pckgGcnt}                   /** Nombre De Colis !== 포장개수 ==! */
               , #{ecntrWght}                  /** Tare De Conteneur(S) À Vide !== 공컨테이너중량 ==! */
               , #{ttwg}                       /** Poids Brut !== 총중량 ==! */
               , #{ntwg}                       /** Poids Net !== 순중량 ==! */
               , #{cbmVol}                     /** Volume (Mtq) !== 입방미터용적 ==! */
               , #{lirVol}                     /** Volume (Litre) !== 리터용적 ==! */
               , #{hdcbTpCd}                   /** Code de type d'hydrocarbure !== 탄화수소구분코드 ==! */
               , #{shmrCn}                     /** Marque De Colis !== 화인내용 ==! */
               , #{addInfoCn}                  /** Info Supplémentaire  !== 부가정보내용 ==! */
               , #{cntrGcnt}                   /** Nombre De Conteneurs !== 컨테이너개수 ==! */
               , #{vhclGcnt}                   /** Nombre De Véhicules !== 차량개수 ==! */
               , #{prpmDfpmCachTpCd}           /** Ind. fret prépayé/dû !== 선불후불운임구분코드 ==! */
               , #{cmdtAmt}                    /** Valeur de marchandise !== 물품금액 ==! */
               , #{cmdtAmtCurrCd}              /** Article Montant Code de devise !== 물품금액통화코드 ==! */
               , #{exppnTxprIdfyNo}            /** NIF de l'exportateur !== 수출자납세자식별번호 ==! */
               , #{exppnNm}                    /** Nom De L'Exportateur !== 수출자명 ==! */
               , #{exppnAddrNm}                /** Adresse De L'Exportateur !== 수출자주소명 ==! */
               , #{exppnTlphNo}                /** Téléphone De L'Exportateur !== 수출자전화번호 ==! */
               , #{exppnEml}                   /** Email De L'Exportateur !== 수출자이메일 ==! */
               , #{abrdFrwrNm}                 /** Nom De L'Expéditeur !== 국외포워더명 ==! */
               , #{abrdFrwrAddrNm}             /** Adresse De L'Expéditeur !== 국외포워더주소명 ==! */
               , #{abrdFrwrTlphNo}             /** Téléphone De L'Expéditeur !== 국외포워더전화번호 ==! */
               , #{abrdFrwrEml}                /** Email De L'Expéditeur !== 국외포워더이메일 ==! */
               , #{cnsiTxprIdfyNo}             /** Niu Du Destinataire !== 수하인납세자식별번호 ==! */
               , #{cnsiNm}                     /** Nom de destinataire !== 수하인명 ==! */
               , #{cnsiAddrNm}                 /** Adresse Du Destinataire !== 수하인주소명 ==! */
               , #{cnsiTlphNo}                 /** N° de téléphone de destinataire !== 수하인전화번호 ==! */
               , #{cnsiEml}                    /** E-mail de destinataire !== 수하인이메일 ==! */
               , #{ntprNm}                     /** Nom De La Partie À Notifier !== 통지처명 ==! */
               , #{ntprAddrNm}                 /** Adresse De La Partie À Notifier !== 통지처주소명 ==! */
               , #{ntprTlphNo}                 /** Téléphone De La Partie À Notifier !== 통지처전화번호 ==! */
               , #{ntprEml}                    /** Email De La Partie À Notifier !== 통지처이메일 ==! */
               , #{bfCagMgmtNo}                /** Crn Précédent !== 이전화물관리번호 ==! */
               , #{blMdfyTpCd}                 /** Code de catégorie de rectification de BL !== BL정정구분코드 ==! */
               , 'N'                           /** Suppression On !== 삭제여부 ==! */
               , #{frstRegstId}                /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , #{lastChprId}                 /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
               , #{coatTrnpYn}                 /** Cabotage On !== 연안운송여부 ==! */
               , #{alHblGcnt}                  /** Nombre Total De Sous Bl !== 전체HBL개수 ==! */
               , #{pckgUtCd}                   /** Code De L'Unité De Colis !== 포장단위코드 ==! */
               , #{ldunYn}                     /** TODO:번역필요LKS !== 하역여부 ==! */
               , #{cnsiTxprIdfyNoNin}          /** NIN de destinataire !== 수하인납세자식별번호(NIN) ==! */
               , #{exppnTxprIdfyNoNin}         /** NIN de l'exportateur !== 수출자납세자식별번호(NIN) ==! */
               , to_char(to_date(#{blPblsDt}, 'dd/mm/yyyy'), 'yyyymmdd') /** Date de délivrance du B/L(LTA) !== BL발행일자 ==! */
         , #{undgGdCd} /** Code de classe UNDG !== UNDG등급 ==! */
         , #{cherYn} /** affréteur d’espace/slot !== 용선여부 ==! */
         , #{cherGvnmNm} /** nom de l’affréteur/slotteur !== 용선이름 ==! */
         , #{cherAddrNm} /** adresse affréteur/slotteur !== 용선주소 ==! */
        )
  </insert>
  
  <!--
  Enregistrement de la Rectifier la déclaration de cargaison (BL) !==화물신고서 (BL) 등록 한다.==!
  (Shin Munsik)
  -->
  <update id="insertCarCagDcshMdfyBl" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo">
    /* CarCagDcshMdfyMapper.insertCarCagDcshMdfyBl */
        INSERT INTO alpassext.TB_CARE_CAG_DCSH_MDFY_BL
               ( bl_srno                       /** N° De Séquence De Bl !== N° De Séquence De Bl ==! */
               , cag_dcsh_mdfy_rqst_mgrn       /** Numéro de gestion de la demande de correction de la déclaration de fret !== Numéro de gestion de la demande de correction de la déclaration de fret ==! */
               , cag_mgmt_no                   /** N° Demande De La Création De Crn !== Crn ==! */
               , msn                           /** Msn !== Msn ==! */
               , hsn                           /** Hsn !== Hsn ==! */
               , bl_no                         /** N° De Bl !== N° De Bl ==! */
               , hbl_no                        /** N° de House B/L !== N° de House B/L ==! */
               , cag_tp_cd                     /** Type de flux !== Type de flux ==! */
               , bl_tp_cd                      /** Code De Catégorie De B/L !== Code De Catégorie De B/L ==! */
               , bl_pt_cd                      /** Code De Type De Bl !== Code De Type De Bl ==! */
               , frwr_cd                       /** Code De Groupeur !== Code De Groupeur ==! */
               , load_regn_cd                  /** Code De Lieu De Chargement !== Code De Lieu De Chargement ==! */
               , ldun_regn_cd                  /** Code De Lieu De Déchargement !== Code De Lieu De Déchargement ==! */
               , ibobz_cd                      /** Code de zone sous douane !== Code de zone sous douane ==! */
               , stvd_cd                       /** Code De Stevedoremanutentionnaire !== Code De Stevedoremanutentionnaire ==! */
<!--                , trns_regn_cd                  /** Code de lieu de transit international !== Code de lieu de transit international ==! */ -->
               , trnh_regn_cd                  /** Code De Région De Transbordement !== Code De Région De Transbordement ==! */
               , cag_chrc_cd                   /** Nature De Cargaison !== Nature De Cargaison ==! */
               , send_way                      /** Mode de livraison !== Mode de livraison ==! */
               , pdls_nm                       /** Nom De L'Article !== Nom De L'Article ==! */
               , cmdt_knd_cd                   /** Nature De Marchandise !== Nature De Marchandise ==! */
               , pckg_gcnt                     /** Nombre De Colis !== Nombre De Colis ==! */
               , ecntr_wght                    /** Tare De Conteneur(S) À Vide !== Tare De Conteneur(S) À Vide ==! */
               , ttwg                          /** Poids Brut !== Poids Brut ==! */
               , ntwg                          /** Poids Net !== Poids Net ==! */
               , cbm_vol                       /** Volume (Mtq) !== Volume (Mtq) ==! */
               , lir_vol                       /** Volume (Litre) !== Volume (Litre) ==! */
               , hdcb_tp_cd                    /** Code de type d'hydrocarbure !== Code de type d'hydrocarbure ==! */
               , cas_no                        /** Numero CAS !== Numero CAS ==! */
               , undg_id                        /** Identifiant UNDG !== Identifiant UNDG ==! */
               , hs_cd                         /** Code Sh !== Code Sh ==! */
               , shmr_cn                       /** Marque De Colis !== Marque De Colis ==! */
               , add_info_cn                   /** Info Supplémentaire  !== Info Supplémentaire  ==! */
               , cntr_gcnt                     /** Nombre De Conteneurs !== Nombre De Conteneurs ==! */
               , vhcl_gcnt                     /** Nombre De Véhicules !== Nombre De Véhicules ==! */
               , prpm_dfpm_cach_tp_cd          /** Ind. fret prépayé/dû !== Ind. fret prépayé/dû ==! */
               , cmdt_amt_curr_cd              /** Article Montant Code de devise !== Article Montant Code de devise ==! */
               , cmdt_amt                      /** Valeur de marchandise !== Valeur de marchandise ==! */
               , exppn_txpr_idfy_no            /** NIF de l'exportateur !== NIF de l'exportateur ==! */
               , exppn_nm                      /** Nom De L'Exportateur !== Nom De L'Exportateur ==! */
               , exppn_addr_nm                 /** Adresse De L'Exportateur !== Adresse De L'Exportateur ==! */
               , exppn_tlph_no                 /** Téléphone De L'Exportateur !== Téléphone De L'Exportateur ==! */
               , exppn_eml                     /** Email De L'Exportateur !== Email De L'Exportateur ==! */
               , abrd_frwr_nm                  /** Nom De L'Expéditeur !== Nom De L'Expéditeur ==! */
               , abrd_frwr_addr_nm             /** Adresse De L'Expéditeur !== Adresse De L'Expéditeur ==! */
               , abrd_frwr_tlph_no             /** Téléphone De L'Expéditeur !== Téléphone De L'Expéditeur ==! */
               , abrd_frwr_eml                 /** Email De L'Expéditeur !== Email De L'Expéditeur ==! */
               , cnsi_txpr_idfy_no             /** Niu Du Destinataire !== Niu Du Destinataire ==! */
               , cnsi_nm                       /** Nom de destinataire !== Nom de destinataire ==! */
               , cnsi_addr_nm                  /** Adresse Du Destinataire !== Adresse Du Destinataire ==! */
               , cnsi_tlph_no                  /** N° de téléphone de destinataire !== N° de téléphone de destinataire ==! */
               , cnsi_eml                      /** E-mail de destinataire !== E-mail de destinataire ==! */
               , ntpr_nm                       /** Nom De La Partie À Notifier !== Nom De La Partie À Notifier ==! */
               , ntpr_addr_nm                  /** Adresse De La Partie À Notifier !== Adresse De La Partie À Notifier ==! */
               , ntpr_tlph_no                  /** Téléphone De La Partie À Notifier !== Téléphone De La Partie À Notifier ==! */
               , ntpr_eml                      /** Email De La Partie À Notifier !== Email De La Partie À Notifier ==! */
               , bf_cag_mgmt_no                /** Crn Précédent !== Crn Précédent ==! */
               , bl_mdfy_tp_cd                 /** Code de catégorie de rectification de BL !== Code de catégorie de rectification de BL ==! */
               , del_yn                        /** Suppression On !== Suppression On ==! */
               , frst_regst_id                 /** Id Du Premier Enregistrant  !== Id Du Premier Enregistrant  ==! */
               , frst_rgsr_dttm                /** Date Et Heure De Premier Enregistrement !== Date Et Heure De Premier Enregistrement ==! */
               , last_chpr_id                  /** Id Du Modificateur Final !== Id Du Modificateur Final ==! */
               , last_chg_dttm                 /** Date Et Heure De Modification Finale !== Date Et Heure De Modification Finale ==! */
               , al_hbl_gcnt                   /** Nombre Total De Sous Bl !== Nombre Total De Sous Bl ==! */
               , pckg_ut_cd                    /** Code De L'Unité De Colis !== Code De L'Unité De Colis ==! */
               , coat_trnp_yn                  /** Cabotage On !== Cabotage On ==! */
               , ldun_yn                       /** TODO:번역필요LKS !== 하역여부 ==! */
               , cnsi_txpr_idfy_no_nin         /** NIN de destinataire !== 수하인납세자식별번호(NIN) ==! */
               , exppn_txpr_idfy_no_nin        /** NIN de l'exportateur !== 수출자납세자식별번호(NIN) ==! */
         , BL_PBLS_DT /** Date de délivrance du B/L(LTA) !== BL발행일자 ==! */
               , UNDG_GD_CD /** Code de classe UNDG !== UNDG등급 ==! */
               , CHER_YN /** affréteur d’espace/slot !== 용선여부 ==! */
               , CHER_GVNM_NM /** nom de l’affréteur/slotteur !== 용선이름 ==! */
               , CHER_ADDR_NM /** adresse affréteur/slotteur !== 용선주소 ==! */
        )  VALUES (
                 #{blSrno}                     /** N° De Séquence De Bl !== N° De Séquence De Bl ==! */
               , #{cagDcshMdfyRqstMgrn}        /** Numéro de gestion de la demande de correction de la déclaration de fret !== Numéro de gestion de la demande de correction de la déclaration de fret ==! */
               , #{cagMgmtNo}                  /** N° Demande De La Création De Crn !== Crn ==! */
               , #{msn}                        /** Msn !== Msn ==! */
               , #{hsn}                        /** Hsn !== Hsn ==! */
               , #{blNo}                       /** N° De Bl !== N° De Bl ==! */
               , #{hblNo}                      /** N° de House B/L !== N° de House B/L ==! */
               , #{cagTpCd}                    /** Type de flux !== Type de flux ==! */
               , #{blTpCd}                     /** Code De Catégorie De B/L !== Code De Catégorie De B/L ==! */
               , #{blPtCd}                     /** Code De Type De Bl !== Code De Type De Bl ==! */
               , #{frwrCd}                     /** Code De Groupeur !== Code De Groupeur ==! */
               , #{loadRegnCd}                 /** Code De Lieu De Chargement !== Code De Lieu De Chargement ==! */
               , #{ldunRegnCd}                 /** Code De Lieu De Déchargement !== Code De Lieu De Déchargement ==! */
               , #{ibobzCd}                    /** Code de zone sous douane !== Code de zone sous douane ==! */
               , #{stvdCd}                     /** Code De Stevedoremanutentionnaire !== Code De Stevedoremanutentionnaire ==! */
<!--                , #{trnsRegnCd}                 /** Code de lieu de transit international !== Code de lieu de transit international ==! */ -->
               , #{trnhRegnCd}                 /** Code De Région De Transbordement !== Code De Région De Transbordement ==! */
               , #{cagChrcCd}                  /** Nature De Cargaison !== Nature De Cargaison ==! */
               , #{sendWay}                    /** Mode de livraison !== Mode de livraison ==! */
               , #{pdlsNm}                     /** Nom De L'Article !== Nom De L'Article ==! */
               , #{cmdtKndCd}                  /** Nature De Marchandise !== Nature De Marchandise ==! */
               , #{pckgGcnt}                   /** Nombre De Colis !== Nombre De Colis ==! */
               , #{ecntrWght}                  /** Tare De Conteneur(S) À Vide !== Tare De Conteneur(S) À Vide ==! */
               , #{ttwg}                       /** Poids Brut !== Poids Brut ==! */
               , #{ntwg}                       /** Poids Net !== Poids Net ==! */
               , #{cbmVol}                     /** Volume (Mtq) !== Volume (Mtq) ==! */
               , #{lirVol}                     /** Volume (Litre) !== Volume (Litre) ==! */
               , #{hdcbTpCd}                   /** Code de type d'hydrocarbure !== Code de type d'hydrocarbure ==! */
               , #{casNo}                      /** Numero CAS !== Numero CAS ==! */
               , #{undgId}                      /** Identifiant UNDG !== Identifiant UNDG ==! */
               , #{hsCd}                       /** Code Sh !== Code Sh ==! */
               , #{shmrCn}                     /** Marque De Colis !== Marque De Colis ==! */
               , #{addInfoCn}                  /** Info Supplémentaire  !== Info Supplémentaire  ==! */
               , #{cntrGcnt}                   /** Nombre De Conteneurs !== Nombre De Conteneurs ==! */
               , #{vhclGcnt}                   /** Nombre De Véhicules !== Nombre De Véhicules ==! */
               , #{prpmDfpmCachTpCd}           /** Ind. fret prépayé/dû !== Ind. fret prépayé/dû ==! */
               , #{cmdtAmtCurrCd}              /** Article Montant Code de devise !== Article Montant Code de devise ==! */
               , #{cmdtAmt}                    /** Valeur de marchandise !== Valeur de marchandise ==! */
               , #{exppnTxprIdfyNo}            /** NIF de l'exportateur !== NIF de l'exportateur ==! */
               , #{exppnNm}                    /** Nom De L'Exportateur !== Nom De L'Exportateur ==! */
               , #{exppnAddrNm}                /** Adresse De L'Exportateur !== Adresse De L'Exportateur ==! */
               , #{exppnTlphNo}                /** Téléphone De L'Exportateur !== Téléphone De L'Exportateur ==! */
               , #{exppnEml}                   /** Email De L'Exportateur !== Email De L'Exportateur ==! */
               , #{abrdFrwrNm}                 /** Nom De L'Expéditeur !== Nom De L'Expéditeur ==! */
               , #{abrdFrwrAddrNm}             /** Adresse De L'Expéditeur !== Adresse De L'Expéditeur ==! */
               , #{abrdFrwrTlphNo}             /** Téléphone De L'Expéditeur !== Téléphone De L'Expéditeur ==! */
               , #{abrdFrwrEml}                /** Email De L'Expéditeur !== Email De L'Expéditeur ==! */
               , #{cnsiTxprIdfyNo}             /** Niu Du Destinataire !== Niu Du Destinataire ==! */
               , #{cnsiNm}                     /** Nom de destinataire !== Nom de destinataire ==! */
               , #{cnsiAddrNm}                 /** Adresse Du Destinataire !== Adresse Du Destinataire ==! */
               , #{cnsiTlphNo}                 /** N° de téléphone de destinataire !== N° de téléphone de destinataire ==! */
               , #{cnsiEml}                    /** E-mail de destinataire !== E-mail de destinataire ==! */
               , #{ntprNm}                     /** Nom De La Partie À Notifier !== Nom De La Partie À Notifier ==! */
               , #{ntprAddrNm}                 /** Adresse De La Partie À Notifier !== Adresse De La Partie À Notifier ==! */
               , #{ntprTlphNo}                 /** Téléphone De La Partie À Notifier !== Téléphone De La Partie À Notifier ==! */
               , #{ntprEml}                    /** Email De La Partie À Notifier !== Email De La Partie À Notifier ==! */
               , #{bfCagMgmtNo}                /** Crn Précédent !== Crn Précédent ==! */
               , #{blMdfyTpCd}                 /** Code de catégorie de rectification de BL !== Code de catégorie de rectification de BL ==! */
               , 'N'                           /** Suppression On !== Suppression On ==! */
               , #{frstRegstId}                /** Id Du Premier Enregistrant  !== Id Du Premier Enregistrant  ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Premier Enregistrement !== Date Et Heure De Premier Enregistrement ==! */
               , #{lastChprId}                 /** Id Du Modificateur Final !== Id Du Modificateur Final ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Modification Finale !== Date Et Heure De Modification Finale ==! */
               , #{alHblGcnt}                  /** Nombre Total De Sous Bl !== Nombre Total De Sous Bl ==! */
               , #{pckgUtCd}                   /** Code De L'Unité De Colis !== Code De L'Unité De Colis ==! */
               , #{coatTrnpYn}                 /** Cabotage On !== Cabotage On ==! */
               , #{ldunYn}                     /** TODO:번역필요LKS !== 하역여부 ==! */
               , #{cnsiTxprIdfyNoNin}          /** NIN de destinataire !== 수하인납세자식별번호(NIN) ==! */
               , #{exppnTxprIdfyNoNin}         /** NIN de l'exportateur !== 수출자납세자식별번호(NIN) ==! */
               , to_char(to_date(#{blPblsDt}, 'dd/mm/yyyy'), 'yyyymmdd') /** Date de délivrance du B/L(LTA) !== BL발행일자 ==! */
         , #{undgGdCd} /** Code de classe UNDG !== UNDG등급 ==! */
         , #{cherYn} /** affréteur d’espace/slot !== 용선여부 ==! */
         , #{cherGvnmNm} /** nom de l’affréteur/slotteur !== 용선이름 ==! */
         , #{cherAddrNm} /** adresse affréteur/slotteur !== 용선주소 ==! */
        )
  </update>
  <!--
    Voir la liste des la [  Rectifier la déclaration de cargaison (Infos sur le véhicule de transport terrestre) ]  !==화물신고서 정정(욱상운송 차량정보) 리스트를 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshMdfyTrnpList" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshTrnpVo">
           SELECT A.cag_dcsh_mdfy_rqst_no                                  AS cag_dcsh_mdfy_rqst_no/** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
                , A.vhcl_srno                                              AS vhcl_srno           /** Numéro De Séquence De Véhicule !== 차량일련번호 ==! */
                , A.vhcl_rgsr_no                                           AS vhcl_rgsr_no        /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */
                , A.chss_no                                                AS chss_no             /** N° De Châssis !== 차대번호 ==! */
                , A.vhcl_pt_cd                                             AS vhcl_pt_cd          /** Code de type de véhicule !== 차량유형코드 ==! */
                , A.vhcl_ttn                                               AS vhcl_ttn            /** Tonnage brut du véhicule !== 차량총톤수 ==! */
                , A.vhcl_nttn                                              AS vhcl_nttn           /** Tonnage net du véhicule !== 차량순톤수 ==! */
                , A.drvr_nm                                                AS drvr_nm             /** Nom de conducteur !== 운전자명 ==! */
                , A.drvr_pspr_no                                           AS drvr_pspr_no        /** N° de passeport de conducteur !== 운전자여권번호 ==! */
                , A.del_yn                                                 AS del_yn              /** Suppression On !== 삭제여부 ==! */
                , A.frst_regst_id                                          AS frst_regst_id       /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
                , TO_CHAR(A.frst_rgsr_dttm,'DD/MM/YYYY HH24:MI:SS')        AS frst_rgsr_dttm      /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
                , A.last_chpr_id                                           AS last_chpr_id        /** Id Du Modificateur Final !== 최종변경자ID ==! */
                , TO_CHAR(A.last_chg_dttm,'DD/MM/YYYY HH24:MI:SS')         AS last_chg_dttm       /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
                , (SELECT nvl(MAX(vhcl_srno),0) FROM TB_CARI_CAG_DCSH_TRNP WHERE MRN = #{mrn}) vhcl_srno_max
                , A.vhcl_mnur_cd                                           AS vhcl_mnur_cd        /** Code De Fabricant Du Véhicule !== Code De Fabricant Du Vehicule ==! */
                , A.trnp_meth_nat_cd                                       AS trnp_meth_nat_cd    /** Code de nationalité du moyen de transport !== Code de nationalite du moyen de transport ==! */
                , X.vhcl_mnur_nm AS vhcl_mnur_nm
                , FN_GET_CNTY_NM(a.trnp_meth_nat_cd ,  #{langCd})           AS trnp_meth_nat_nm
             FROM TB_CARI_CAG_DCSH_MDFY_TRNP A
             LEFT JOIN ALPASSINT.TB_COM_VHCL_MNUR X
               ON A.VHCL_MNUR_CD = X.VHCL_MNUR_CD
              AND X.DEL_YN = 'N'   
            WHERE A.del_yn = 'N'                                         /** Suppression ON !== 삭제여부 ==! */
              AND A.cag_dcsh_mdfy_rqst_no = #{cagDcshMdfyRqstNo}  /** Numéro de demande de correction de la déclaration de fret !== 화물신고서 ==! */
  </select>

  <!--
    Consulter les infos sur le transfert de la déclaration de cargaison      !== 화물신고서 운송 정보를 조회한다 ==!
    (Lee KyoungSung)
  -->
  <select id="selectCagDcshIptMdfyGnrl" parameterType="java.lang.String" resultType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo">
    /* CarCagDcshMdfyMapper.selectCagDcshIptMdfyGnrl*/
    SELECT    A.cag_dcsh_mdfy_rqst_no                                  AS cag_dcsh_mdfy_rqst_no/** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
                , A.mrn                                                    AS mrn                 /** Mrn !== MRN ==! */
                , A.al_bl_gcnt                                             AS al_bl_gcnt          /** Nombre Total De Bl !== 전체BL개수 ==! */
                , A.al_pckg_gcnt                                           AS al_pckg_gcnt        /** Nombre Total De Colis  !== 전체포장개수 ==! */
                , A.al_ttwg                                                AS al_ttwg             /** Poids Brut Total !== 전체총중량 ==! */
                , A.al_cntr_gcnt                                           AS al_cntr_gcnt        /** Nombre Total De Conteneurs !== 전체컨테이너개수 ==! */
                , A.al_ecntr_cnt                                           AS al_ecntr_cnt        /** Nombre total de conteneurs à vide !== 전체공컨테이너개수 ==! */
                , A.al_vhcl_gcnt                                           AS al_vhcl_gcnt        /** Nombre Total De Véhicules !== 전체차량개수 ==! */
                , A.trnp_mean_cd                                           AS trnp_mean_cd        /** Code de mode de transport !== 운송방법코드 ==! */
                , A.trnp_meth_nm                                           AS trnp_meth_nm        /** Nom De Moyen De Transport !== 운송수단명 ==! */
                , A.trnp_meth_idfy_no                                      AS trnp_meth_idfy_no   /** N° D'Identification Du Moyen De Transport !== 운송수단식별번호 ==! */
                , A.trnp_rfer_no                                           AS trnp_rfer_no        /** N° de référence de transport !== 운송참고번호 ==! */
                , TO_CHAR(TO_DATE(A.trnp_meth_rgsr_dt),'DD/MM/YYYY')                AS trnp_meth_rgsr_dt   /** Date D'Enregistrement De Moyen De Transport !== 운송수단등록일자 ==! */
                , TO_CHAR(A.dptr_dttm,'DD/MM/YYYY HH24:MI:SS')             AS dptr_dttm           /** Date Et Heure De Départ !== 출발일시 ==! */
                , TO_CHAR(A.arvl_dttm,'DD/MM/YYYY HH24:MI:SS')             AS arvl_dttm           /** Date Et Heure D'Arrivée !== 도착일시 ==! */
                , TO_CHAR(A.real_arvl_dttm,'DD/MM/YYYY HH24:MI:SS')        AS real_arvl_dttm      /** Date Et Heure D'Arrivée Effective !== 실제도착일시 ==! */
                , TO_CHAR(TO_DATE(A.last_ldun_dt),'DD/MM/YYYY')                     AS last_ldun_dt        /** Date De Déchargement Définitif !== 최종하역일자 ==! */
                , A.dptr_port_cd                                           AS dptr_port_cd        /** Code De Port De Départ !== 출발항구코드 ==! */
                , A.ldun_port_cd                                           AS ldun_port_cd        /** Code De Port De Déchargement !== 하역항구코드 ==! */
                , A.last_thrg_port_cd                                      AS last_thrg_port_cd   /** Code Du Dernier Port D'Escale !== 최종경유항구코드 ==! */
                , A.trnp_meth_loct_nm                                      AS trnp_meth_loct_nm   /** Emplacement De Moyen De Transport !== 운송수단위치명 ==! */
                , A.trnp_meth_nat_cd                                       AS trnp_meth_nat_cd    /** Code de nationalité du moyen de transport !== 운송수단국적코드 ==! */
                , A.ship_ttn                                               AS ship_ttn            /** Tonnage Brut Du Navire !== 선박총톤수 ==! */
                , A.ship_nttn                                              AS ship_nttn           /** Tonnage Net Du Navire !== 선박순톤수 ==! */
                , A.ltsp_yn                                                AS ltsp_yn             /** Nil !== 공선여부 ==! */
                , A.carr_cd                                                AS carr_cd             /** Code De Société De Transport !== 운송사코드 ==! */
                , A.carr_addr_nm                                           AS carr_addr_nm        /** Adresse De Société De Transport !== 운송사주소명 ==! */
                , A.imo_no                                                 AS imo_no              /** N° IMO !== IMO번호 ==! */
                , A.del_yn                                                 AS del_yn              /** Suppression On !== 삭제여부 ==! */
                , A.frst_regst_id                                          AS frst_regst_id       /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
                , TO_CHAR(A.frst_rgsr_dttm,'DD/MM/YYYY HH24:MI:SS')        AS frst_rgsr_dttm      /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
                , A.last_chpr_id                                           AS last_chpr_id        /** Id Du Modificateur Final !== 최종변경자ID ==! */
                , TO_CHAR(A.last_chg_dttm,'DD/MM/YYYY HH24:MI:SS')         AS last_chg_dttm       /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
                , A.atch_file_id                                           AS atch_file_id        /** Id Du Fichier Joint !== 첨부파일ID ==! */
                , A.al_ntwg                                                AS al_ntwg             /** Poids Net Total !== 전체순중량 ==! */
                , A.drvr_nm                           AS drvr_nm             /** Nom de conducteur !==운전자명==! */
             FROM TB_CARI_CAG_DCSH_MDFY_GNRL A
        WHERE 1=1
        AND A.DEL_YN = 'N'
        AND  A.cag_dcsh_mdfy_rqst_no = #{cagDcshMdfyRqstNo}  /** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
  </select>

  <!--
    Modifier la  déclaration de cargaison(infos sur le transfert ) !==화물신서고 정보를 수정한다.(운항정보)==!
    (Lee KyoungSung)
  -->
  <update id="updateCagDcshIptGnrlByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" >
    /* CarCagDcshMdfyMapper.updateCagDcshIptGnrlByMdfy */
    UPDATE TB_CARI_CAG_DCSH SET
         del_yn = 'N'                                  /** Suppression ON !== 삭제여부 ==! */
             , last_chpr_id = #{lastChprId}                  /** ID du modificateur final !== 최종변경자ID ==! */
             , last_chg_dttm = SYSTIMESTAMP                  /** Date et heure de modification finale !== 최종변경일시 ==! */
             <if test="alBlGcnt != null">
             , al_bl_gcnt = #{alBlGcnt}                       /** Nombre Total De Bl !== Nombre Total De Bl ==! */ 
             </if>
             <if test="alPckgGcnt != null">
             , al_pckg_gcnt = #{alPckgGcnt}                   /** Nombre Total De Colis  !== Nombre Total De Colis  ==! */ 
             </if>
             <if test="alTtwg != null">
             , al_ttwg = #{alTtwg}                            /** Poids Brut Total !== Poids Brut Total ==! */ 
             </if>
             <if test="alCntrGcnt != null">
             , al_cntr_gcnt = #{alCntrGcnt}                   /** Nombre Total De Conteneurs !== Nombre Total De Conteneurs ==! */ 
             </if>
             <if test="alEcntrCnt != null">
             , al_ecntr_cnt = #{alEcntrCnt}                   /** Nombre total de conteneurs à vide !== Nombre total de conteneurs à vide ==! */ 
             </if>
             <if test="alVhclGcnt != null">
             , al_vhcl_gcnt = #{alVhclGcnt}                   /** Nombre Total De Véhicules !== Nombre Total De Véhicules ==! */ 
             </if>
             <if test="trnpMeanCd != null">
             , trnp_mean_cd = #{trnpMeanCd}                   /** Code de mode de transport !== Code de mode de transport ==! */ 
             </if>
             <if test="trnpMethNm != null">
             , trnp_meth_nm = #{trnpMethNm}                   /** Nom De Moyen De Transport !== Nom De Moyen De Transport ==! */ 
             </if>
             <if test="trnpMethIdfyNo != null">
             , trnp_meth_idfy_no = #{trnpMethIdfyNo}          /** N° D'Identification Du Moyen De Transport !== N° D'Identification Du Moyen De Transport ==! */ 
             </if>
             <if test="trnpRferNo != null">
             , trnp_rfer_no = #{trnpRferNo}                   /** N° de référence de transport !== N° de référence de transport ==! */ 
             </if>
             <if test="trnpMethRgsrDt != null">
             , trnp_meth_rgsr_dt = TO_CHAR(TO_DATE( #{trnpMethRgsrDt}, 'DD/MM/YYYY'),'YYYYMMDD')  /** Date D'Enregistrement De Moyen De Transport !== Date D'Enregistrement De Moyen De Transport ==! */ 
             </if>
             <if test="dptrDttm != null">
             , dptr_dttm = TO_TIMESTAMP( #{dptrDttm}, 'DD/MM/YYYY HH24:MI:SS')  /** Date Et Heure De Départ !== Date Et Heure De Départ ==! */ 
             </if>
             <if test="arvlDttm != null">
             , arvl_dttm = TO_TIMESTAMP( #{arvlDttm}, 'DD/MM/YYYY HH24:MI:SS')  /** Date Et Heure D'Arrivée !== Date Et Heure D'Arrivée ==! */ 
             </if>
             <if test="realArvlDttm != null">
             , real_arvl_dttm = TO_TIMESTAMP( #{realArvlDttm}, 'DD/MM/YYYY HH24:MI:SS')  /** Date Et Heure D'Arrivée Effective !== Date Et Heure D'Arrivée Effective ==! */ 
             </if>
             <if test="lastLdunDt != null">
             , last_ldun_dt = TO_CHAR(TO_DATE( #{lastLdunDt}, 'DD/MM/YYYY'),'YYYYMMDD')  /** Date De Déchargement Définitif !== Date De Déchargement Définitif ==! */ 
             </if>
             <if test="dptrPortCd != null">
             , dptr_port_cd = #{dptrPortCd}                   /** Code De Port De Départ !== Code De Port De Départ ==! */ 
             </if>
             <if test="ldunPortCd != null">
             , ldun_port_cd = #{ldunPortCd}                   /** Code De Port De Déchargement !== Code De Port De Déchargement ==! */ 
             </if>
             <if test="lastThrgPortCd != null">
             , last_thrg_port_cd = #{lastThrgPortCd}          /** Code Du Dernier Port D'Escale !== Code Du Dernier Port D'Escale ==! */ 
             </if>
             <if test="trnpMethLoctNm != null">
             , trnp_meth_loct_nm = #{trnpMethLoctNm}          /** Emplacement De Moyen De Transport !== Emplacement De Moyen De Transport ==! */ 
             </if>
             <if test="trnpMethNatCd != null">
             , trnp_meth_nat_cd = #{trnpMethNatCd}            /** Code de nationalité du moyen de transport !== Code de nationalité du moyen de transport ==! */ 
             </if>
             <if test="shipTtn != null">
             , ship_ttn = #{shipTtn}                          /** Tonnage Brut Du Navire !== Tonnage Brut Du Navire ==! */ 
             </if>
             <if test="shipNttn != null">
             , ship_nttn = #{shipNttn}                        /** Tonnage Net Du Navire !== Tonnage Net Du Navire ==! */ 
             </if>
             <if test="ltspYn != null">
             , ltsp_yn = #{ltspYn}                            /** Nil !== Nil ==! */ 
             </if>
             <if test="carrCd != null">
             , carr_cd = #{carrCd}                            /** Code De Société De Transport !== Code De Société De Transport ==! */ 
             </if>
             <if test="carrAddrNm != null">
             , carr_addr_nm = #{carrAddrNm}                   /** Adresse De Société De Transport !== Adresse De Société De Transport ==! */ 
             </if>
             <if test="imoNo != null">
             , imo_no = #{imoNo}                              /** N° IMO !== N° IMO ==! */ 
             </if>
             <if test="atchFileId != null">
             , atch_file_id = #{atchFileId}                   /** Id Du Fichier Joint !== Id Du Fichier Joint ==! */ 
             </if>
             <if test="alNtwg != null">
             , al_ntwg = #{alNtwg}                            /** Poids Net Total !== 전체순중량 ==! */ 
             </if>
             <if test="drvrNm != null">
             , drvr_nm = #{drvrNm}                            /** Nom de conducteur */ 
             </if>
       WHERE 1=1
         AND DEL_YN = 'N'
       AND MRN = #{mrn}                                               /** MRN !==MRN==! */
  </update>
  <!--
    Modifier la  déclaration de cargaison  !==화물신서고 정보를 수정한다. ==!
    (Lee KyoungSung)
  -->
  <update id="updateCagDcshEptGnrlByMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" >
    /* CarCagDcshMdfyMapper.updateCagDcshEptGnrlByMdfy */
    UPDATE alpassext.TB_CARE_CAG_DCSH SET
         del_yn = 'N'                                  /** Suppression ON !== 삭제여부 ==! */
             , last_chpr_id = #{lastChprId}                  /** ID du modificateur final !== 최종변경자ID ==! */
             , last_chg_dttm = SYSTIMESTAMP                  /** Date et heure de modification finale !== 최종변경일시 ==! */
             <if test="alBlGcnt != null">
             , al_bl_gcnt = #{alBlGcnt}                       /** Nombre Total De Bl !== Nombre Total De Bl ==! */ 
             </if>
             <if test="alPckgGcnt != null">
             , al_pckg_gcnt = #{alPckgGcnt}                   /** Nombre Total De Colis  !== Nombre Total De Colis  ==! */ 
             </if>
             <if test="alTtwg != null">
             , al_ttwg = #{alTtwg}                            /** Poids Brut Total !== Poids Brut Total ==! */ 
             </if>
             <if test="alCntrGcnt != null">
             , al_cntr_gcnt = #{alCntrGcnt}                   /** Nombre Total De Conteneurs !== Nombre Total De Conteneurs ==! */ 
             </if>
             <if test="alEcntrCnt != null">
             , al_ecntr_cnt = #{alEcntrCnt}                   /** Nombre total de conteneurs à vide !== Nombre total de conteneurs à vide ==! */ 
             </if>
             <if test="alVhclGcnt != null">
             , al_vhcl_gcnt = #{alVhclGcnt}                   /** Nombre Total De Véhicules !== Nombre Total De Véhicules ==! */ 
             </if>
             <if test="trnpMeanCd != null">
             , trnp_mean_cd = #{trnpMeanCd}                   /** Code de mode de transport !== Code de mode de transport ==! */ 
             </if>
             <if test="trnpMethNm != null">
             , trnp_meth_nm = #{trnpMethNm}                   /** Nom De Moyen De Transport !== Nom De Moyen De Transport ==! */ 
             </if>
             <if test="trnpMethIdfyNo != null">
             , trnp_meth_idfy_no = #{trnpMethIdfyNo}          /** N° D'Identification Du Moyen De Transport !== N° D'Identification Du Moyen De Transport ==! */ 
             </if>
             <if test="trnpRferNo != null">
             , trnp_rfer_no = #{trnpRferNo}                   /** N° de référence de transport !== N° de référence de transport ==! */ 
             </if>
             <if test="trnpMethRgsrDt != null">
             , trnp_meth_rgsr_dt = TO_CHAR(TO_DATE( #{trnpMethRgsrDt}, 'DD/MM/YYYY'),'YYYYMMDD')  /** Date D'Enregistrement De Moyen De Transport !== Date D'Enregistrement De Moyen De Transport ==! */ 
             </if>
             <if test="dptrDttm != null">
             , dptr_dttm = TO_TIMESTAMP( #{dptrDttm}, 'DD/MM/YYYY HH24:MI:SS')  /** Date Et Heure De Départ !== Date Et Heure De Départ ==! */ 
             </if>
             <if test="arvlDttm != null">
             , arvl_dttm = TO_TIMESTAMP( #{arvlDttm}, 'DD/MM/YYYY HH24:MI:SS')  /** Date Et Heure D'Arrivée !== Date Et Heure D'Arrivée ==! */ 
             </if>
             <if test="realArvlDttm != null">
             , real_arvl_dttm = TO_TIMESTAMP( #{realArvlDttm}, 'DD/MM/YYYY HH24:MI:SS')  /** Date Et Heure D'Arrivée Effective !== Date Et Heure D'Arrivée Effective ==! */ 
             </if>
             <if test="lastLdunDt != null">
             , last_ldun_dt = TO_CHAR(TO_DATE( #{lastLdunDt}, 'DD/MM/YYYY'),'YYYYMMDD')  /** Date De Déchargement Définitif !== Date De Déchargement Définitif ==! */ 
             </if>
             <if test="dptrPortCd != null">
             , dptr_port_cd = #{dptrPortCd}                   /** Code De Port De Départ !== Code De Port De Départ ==! */ 
             </if>
             <if test="ldunPortCd != null">
             , ldun_port_cd = #{ldunPortCd}                   /** Code De Port De Déchargement !== Code De Port De Déchargement ==! */ 
             </if>
             <if test="lastThrgPortCd != null">
             , last_thrg_port_cd = #{lastThrgPortCd}          /** Code Du Dernier Port D'Escale !== Code Du Dernier Port D'Escale ==! */ 
             </if>
             <if test="trnpMethLoctNm != null">
             , trnp_meth_loct_nm = #{trnpMethLoctNm}          /** Emplacement De Moyen De Transport !== Emplacement De Moyen De Transport ==! */ 
             </if>
             <if test="trnpMethNatCd != null">
             , trnp_meth_nat_cd = #{trnpMethNatCd}            /** Code de nationalité du moyen de transport !== Code de nationalité du moyen de transport ==! */ 
             </if>
             <if test="shipTtn != null">
             , ship_ttn = #{shipTtn}                          /** Tonnage Brut Du Navire !== Tonnage Brut Du Navire ==! */ 
             </if>
             <if test="shipNttn != null">
             , ship_nttn = #{shipNttn}                        /** Tonnage Net Du Navire !== Tonnage Net Du Navire ==! */ 
             </if>
             <if test="ltspYn != null">
             , ltsp_yn = #{ltspYn}                            /** Nil !== Nil ==! */ 
             </if>
             <if test="carrCd != null">
             , carr_cd = #{carrCd}                            /** Code De Société De Transport !== Code De Société De Transport ==! */ 
             </if>
             <if test="carrAddrNm != null">
             , carr_addr_nm = #{carrAddrNm}                   /** Adresse De Société De Transport !== Adresse De Société De Transport ==! */ 
             </if>
             <if test="imoNo != null">
             , imo_no = #{imoNo}                              /** N° IMO !== N° IMO ==! */ 
             </if>
             <if test="atchFileId != null">
             , atch_file_id = #{atchFileId}                   /** Id Du Fichier Joint !== Id Du Fichier Joint ==! */ 
             </if>
             <if test="alNtwg != null">
             , al_ntwg = #{alNtwg}                            /** Poids Net Total !== 전체순중량 ==! */ 
             </if>
             <if test="drvrNm != null">
             , drvr_nm = #{drvrNm}                            /** Nom de conducteur */ 
             </if>
     WHERE 1=1
       AND DEL_YN = 'N'
       AND MRN = #{mrn}                                               /** MRN !==MRN==! */
  </update>

  <!--
    Modifier les infos sur 'B/L suivi de cargaison'. !== 화물추적 B/L정보을 수정한다. ==!
    (Lee KyoungSung)
  -->
  <update id="updateCgtrBlSlng" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo">
    /* CarCagDcshMdfyMapper.updateCgtrBlSlng */
    UPDATE TB_CARI_CGTR_BL SET 
               del_yn = 'N'                                  /** Suppression ON !== 삭제여부 ==! */
             , last_chpr_id = #{lastChprId}                  /** ID du modificateur final !== 최종변경자ID ==! */
             , last_chg_dttm = SYSTIMESTAMP                  /** Date et heure de modification finale !== 최종변경일시 ==! */
             <if test="trnpMethNm != null">
             , trnp_meth_nm = #{trnpMethNm}                   /** Nom De Moyen De Transport !== 운송수단명 ==! */ 
             </if>
             <if test="trnpMethIdfyNo != null">
             , trnp_meth_idfy_no = #{trnpMethIdfyNo}          /** N° D'Identification Du Moyen De Transport !== 운송수단식별번호 ==! */ 
             </if>
             <if test="trnpRferNo != null">
             , trnp_rfer_no = #{trnpRferNo}                   /** N° de référence de transport !== 운송참고번호 ==! */ 
             </if>
             <if test="arvlDttm != null">
               , arvl_dttm = TO_TIMESTAMP( #{arvlDttm}, 'DD/MM/YYYY HH24:MI:SS')  /** Date Et Heure D'Arrivée !== 도착일시 ==! */ 
             </if>
             <if test="dptrPortCd != null">
             , dptr_port_cd = #{dptrPortCd}                   /** Code De Port De Départ !== 출발항구코드 ==! */ 
             </if>
             <if test="ldunPortCd != null">
             , ldun_port_cd = #{ldunPortCd}                   /** Code De Port De Déchargement !== 하역항구코드 ==! */ 
             </if>
           WHERE 1=1 
             AND MRN = #{mrn}
  </update>

  <!--
    Supprimer la déclaration de cargaison (Infos sur le véhicule de transport terrestre) !==화물신고서  (육상 운송 차량 정보) 삭제 한다.==!
    (Lee KyoungSung)
  -->
  <update id="deleteCagDcshTrnpIpt" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" >
    /* CarCagDcshMdfyMapper.deleteCagDcshTrnpIpt */
    UPDATE TB_CARI_CAG_DCSH_TRNP
       SET DEL_YN        = 'Y'                    /** Suppression ON !==삭제여부==! */
             , last_chpr_id = #{lastChprId}                  /** ID du modificateur final !== 최종변경자ID ==! */
             , last_chg_dttm = SYSTIMESTAMP                  /** Date et heure de modification finale !== 최종변경일시 ==! */
     WHERE 1=1 
       AND MRN          = #{mrn}                       /** MRN !==MRN==! */
  </update>  

  <!--
    Supprimer la déclaration de cargaison (Infos sur le véhicule de transport terrestre) !==화물신고서  (육상 운송 차량 정보) 삭제 한다.==!
    (Lee KyoungSung)
  -->
  <update id="deleteCagDcshTrnpEpt" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" >
    /* CarCagDcshMdfyMapper."deleteCagDcshTrnpEpt" */
    UPDATE alpassext.TB_CARE_CAG_DCSH_TRNP
       SET DEL_YN        = 'Y'                     /** Suppression ON !==삭제여부==! */
         , last_chpr_id = #{lastChprId}                  /** ID du modificateur final !== 최종변경자ID ==! */
             , last_chg_dttm = SYSTIMESTAMP                  /** Date et heure de modification finale !== 최종변경일시 ==! */
      WHERE 1=1 
       AND CAG_DCSH_RGSR_MGMT_NO = (SELECT CAG_DCSH_RGSR_MGMT_NO FROM alpassext.TB_CARE_CAG_DCSH WHERE MRN = #{mrn} AND DEL_YN = 'N')
  </update>  

  <!--
    Enregistrement de la déclaration de cargaison (Infos sur le véhicule de transport terrestre) !==화물신고서  (육상 운송 차량 정보) 등록 한다.==!
    (Lee KyoungSung)
  -->
  <insert id="insertCagDcshTrnpIpt" parameterType="alpass.ipt.car.com.vo.CarCagDcshTrnpVo" >
    /* CarCagDcshMdfyMapper.insertCagDcshTrnpIpt */
    INSERT INTO TB_CARI_CAG_DCSH_TRNP
               ( mrn                           /** Mrn !== MRN ==! */
               , vhcl_srno                     /** Numéro De Séquence De Véhicule !== 차량일련번호 ==! */
               , vhcl_rgsr_no                  /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */
               , chss_no                       /** N° De Châssis !== 차대번호 ==! */
               , vhcl_pt_cd                    /** Code de type de véhicule !== 차량유형코드 ==! */
               , vhcl_ttn                      /** Tonnage brut du véhicule !== 차량총톤수 ==! */
               , vhcl_nttn                     /** Tonnage net du véhicule !== 차량순톤수 ==! */
               , drvr_nm                       /** Nom de conducteur !== 운전자명 ==! */
               , drvr_pspr_no                  /** N° de passeport de conducteur !== 운전자여권번호 ==! */
               , del_yn                        /** Suppression On !== 삭제여부 ==! */
               , frst_regst_id                 /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , frst_rgsr_dttm                /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , last_chpr_id                  /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , last_chg_dttm                 /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
               , vhcl_mnur_cd                  /** Code De Fabricant Du Véhicule !== Code De Fabricant Du Vehicule ==! */
               , trnp_meth_nat_cd              /** Code de nationalité du moyen de transport !== Code de nationalite du moyen de transport ==! */
        )  VALUES (
                 #{mrn}                        /** Mrn !== MRN ==! */
               , #{vhclSrno}           /** Numéro De Séquence De Véhicule !== 차량일련번호 ==! */
               , #{vhclRgsrNo}                 /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */
               , #{chssNo}                     /** N° De Châssis !== 차대번호 ==! */
               , #{vhclPtCd}                   /** Code de type de véhicule !== 차량유형코드 ==! */
               , #{vhclTtn}                    /** Tonnage brut du véhicule !== 차량총톤수 ==! */
               , #{vhclNttn}                   /** Tonnage net du véhicule !== 차량순톤수 ==! */
               , #{drvrNm}                     /** Nom de conducteur !== 운전자명 ==! */
               , #{drvrPsprNo}                 /** N° de passeport de conducteur !== 운전자여권번호 ==! */
               , 'N'                           /** Suppression On !== 삭제여부 ==! */
               , #{frstRegstId}                /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , #{lastChprId}                 /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
               , #{vhclMnurCd}                 /** Code De Fabricant Du Véhicule !== Code De Fabricant Du Vehicule ==! */
               , #{trnpMethNatCd}              /** Code de nationalité du moyen de transport !== Code de nationalite du moyen de transport ==! */
        )
  </insert>  
  <!--
    Enregistrement de la déclaration de cargaison (Infos sur le véhicule de transport terrestre) !==화물신고서  (육상 운송 차량 정보) 등록 한다.==!
    (Lee KyoungSung)
  -->
  <insert id="insertCagDcshTrnpEpt" parameterType="alpass.ipt.car.com.vo.CarCagDcshTrnpVo" >
    /* CarCagDcshMdfyMapper."insertCagDcshTrnpEpt" */
    INSERT INTO alpassext.TB_CARE_CAG_DCSH_TRNP
               ( cag_dcsh_rgsr_mgmt_no         /** Numéro de gestion de l'enregistrement de la déclaration de fret !== 화물신고서등록관리번호 ==! */
               , vhcl_srno                     /** Numéro De Séquence De Véhicule !== 차량일련번호 ==! */
               , chss_no                       /** N° De Châssis !== 차대번호 ==! */
               , vhcl_rgsr_no                  /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */
               , vhcl_pt_cd                    /** Code de type de véhicule !== 차량유형코드 ==! */
               , vhcl_ttn                      /** Tonnage brut du véhicule !== 차량총톤수 ==! */
               , vhcl_nttn                     /** Tonnage net du véhicule !== 차량순톤수 ==! */
               , drvr_nm                       /** Nom de conducteur !== 운전자명 ==! */
               , drvr_pspr_no                  /** N° de passeport de conducteur !== 운전자여권번호 ==! */
               , del_yn                        /** Suppression On !== 삭제여부 ==! */
               , frst_regst_id                 /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , frst_rgsr_dttm                /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , last_chpr_id                  /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , last_chg_dttm                 /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
               , vhcl_mnur_cd                  /** Code De Fabricant Du Vehicule !== Code De Fabricant Du Vehicule ==! */
               , trnp_meth_nat_cd              /** Code de nationalite du moyen de transport !== Code de nationalite du moyen de transport ==! */
        )  VALUES (
                 (SELECT CAG_DCSH_RGSR_MGMT_NO FROM alpassext.TB_CARE_CAG_DCSH WHERE MRN = #{mrn} AND DEL_YN = 'N')
                                               /** Numéro de gestion de l'enregistrement de la déclaration de fret !== 화물신고서등록관리번호 ==! */
               , #{vhclSrno}           /** Numéro De Séquence De Véhicule !== 차량일련번호 ==! */
               , #{chssNo}                     /** N° De Châssis !== 차대번호 ==! */
               , #{vhclRgsrNo}                 /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */
               , #{vhclPtCd}                   /** Code de type de véhicule !== 차량유형코드 ==! */
               , #{vhclTtn}                    /** Tonnage brut du véhicule !== 차량총톤수 ==! */
               , #{vhclNttn}                   /** Tonnage net du véhicule !== 차량순톤수 ==! */
               , #{drvrNm}                     /** Nom de conducteur !== 운전자명 ==! */
               , #{drvrPsprNo}                 /** N° de passeport de conducteur !== 운전자여권번호 ==! */
               , 'N'                           /** Suppression On !== 삭제여부 ==! */
               , #{frstRegstId}                /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
               , #{lastChprId}                 /** Id Du Modificateur Final !== 최종변경자ID ==! */
               , SYSTIMESTAMP                  /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
               , #{vhclMnurCd}                 /** Code De Fabricant Du Vehicule !== Code De Fabricant Du Vehicule ==! */
               , #{trnpMethNatCd}              /** Code de nationalite du moyen de transport !== Code de nationalite du moyen de transport ==! */
        )
  </insert>

  <!--
    Modifier l'état de traitement      !== 진행 상태를 수정한다 ==!
    (Lee KyoungSung)
  -->
  <update id="updateCagDcshCncl" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo">
    /* CarCagDcshMdfyMapper.insertCagDcshTrnpIpt */
    UPDATE ALPASSEXT.TB_CARE_CAG_DCSH
       SET PRCS_STTS_CD  = #{prcsSttsCd}
         , LAST_CHPR_ID  = #{lastChprId}
         , LAST_CHG_DTTM = SYSTIMESTAMP
     WHERE 1=1
       AND MRN = #{mrn}
  </update>
  <!--
    Consulter les infos sur le bureau compétent      !== 관할세관 정보를 조회한다 ==!
    (Lee KyoungSung)
  -->
  <select id="selectGetCstmCd" parameterType="string" resultType="string">
        /* CarCagDcshMdfyMapper.selectGetCstmCd */
    SELECT C2.ORGN_CD CSTM_CD
          FROM TB_POTI_ORGN C1
     LEFT JOIN TB_POTI_ORGN C2
            ON C1.UPR_ORGN_MGMT_CD = C2.ORGN_MGMT_CD
         WHERE C1.DEL_YN = 'N'
           and C1.ORGN_CD = #{value}
           AND ROWNUM = 1   
    </select>
    
  <!--
    Modifier l'état de traitement      !== 진행 상태를 수정한다 ==!
    (Lee KyoungSung)
  -->
  <update id="updateCagDcshMdfyPrcsSttsEpt" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" >
    /* updateCagDcshMdfyPrcsSttsEpt */
    UPDATE ALPASSEXT.TB_CARE_CAG_DCSH_MDFY
    SET   PRCS_STTS_CD = #{prcsSttsCd}      /** Code de statut de traitement !==처리상태코드==! */
          , PRCS_DTTM = SYSTIMESTAMP      /** Date et heure de traitement !==처리일시==! */
      , LAST_CHPR_ID = #{lastChprId}
      , LAST_CHG_DTTM = SYSTIMESTAMP
    WHERE  1=1 
      AND CAG_DCSH_MDFY_RQST_MGRN = #{cagDcshMdfyRqstMgrn} /** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
  </update>
  <!--
    Modifier l'état de traitement      !== 진행 상태를 수정한다 ==!
    (Lee KyoungSung)
  -->
  <update id="updateCagDcshMdfyPrcsSttsIpt" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" >
    /* updateCagDcshMdfyPrcsSttsIpt */
    UPDATE ALPASSINT.TB_CARI_CAG_DCSH_MDFY
    SET   PRCS_STTS_CD = #{prcsSttsCd}          /** Code de statut de traitement !==처리상태코드==! */
      , PRCS_DTTM = SYSTIMESTAMP        /** Date et heure de traitement !==처리일시==! */
      , LAST_CHPR_ID = #{lastChprId}
      , LAST_CHG_DTTM = SYSTIMESTAMP
    WHERE  1=1 
      AND CAG_DCSH_MDFY_RQST_MGRN = #{cagDcshMdfyRqstMgrn}  /** Numéro de demande de correction de la déclaration de fret !== 화물신고서정정신청번호 ==! */
  </update>

  <!--
    Modifier les infos sur la zone sous douane.      !== 보세구역 정보를 수정한다. ==!
    (Lee KyoungSung)
  -->
  <update id="updateEptMasterBlNo" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* updateEptMasterBlNo */
    UPDATE ALPASSEXT.TB_CARE_CAG_DCSH_BL
    SET BL_NO  = #{blNo}
      , IBOBZ_CD = #{ibobzCd}
      , LAST_CHPR_ID  = #{lastChprId}
      , LAST_CHG_DTTM = SYSTIMESTAMP
    WHERE 1=1
    AND CAG_DCSH_RGSR_MGMT_NO = #{cagDcshRgsrMgmtNo}
    <!-- AND MRN = #{mrn} -->
    AND CAG_MGMT_NO LIKE #{cagMgmtNo}||'%'
  </update>
  <!--
    Modifier les infos sur la zone sous douane.      !== 보세구역 정보를 수정한다. ==!
    (Lee KyoungSung)
  -->
  <update id="updateIptMasterBlNo" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlVo" >
    /* updateIptMasterBlNo */
    UPDATE ALPASSINT.TB_CARI_CAG_DCSH_BL
    SET BL_NO  = #{blNo}
      , IBOBZ_CD = #{ibobzCd}
      , LAST_CHPR_ID  = #{lastChprId}
      , LAST_CHG_DTTM = SYSTIMESTAMP
    WHERE 1=1
    AND MRN = #{mrn}
    AND CAG_MGMT_NO LIKE #{cagMgmtNo}||'%'
  </update>

    <!--
    Voir les détails de la [  Rectifier la déclaration de cargaison ]  !==화물신고서 정정을 상세 조회한다.==!
    (Lee KyoungSung)
  -->
  <select id="selectCareCnttCagDcshMdfy" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyVo" resultType="alpass.ipt.car.com.vo.CarCagDcshVo">
        /* CarCagDcshMdfyMapper.selectCareCnttCagDcshMdfy */
        SELECT A.CAG_DCSH_MDFY_RQST_NO
             , A.MRN
             , DECODE(A.CAG_RQST_TP_CD, 'IMS', '103', 'IMA', '104'
                                      , 'EMS', '103', 'EMA', '104' , '') AS ELCT_DOC_CD
             , B.MSG_ID
             , 'L04' AS MSG_PRCS_STTS_CD
             , (SELECT nvl(MAX(CNTT_POBX_ID),'')
                  FROM TB_POTE_POBX X
                 WHERE X.CO_DCLR_CD = #{trsnCoCd}
                   AND X.POBX_USG_TP_CD = '01'
                   AND X.DEL_YN = 'N') as POBX_ID
          FROM TB_CARI_CAG_DCSH_MDFY A
          LEFT JOIN ALPASSEXT.TB_CARE_CNTT_CAG_DCSH_MDFY B
            on A.TRSN_CO_CD = B.TRSN_CO_CD
           AND B.DEL_YN = 'N'
           AND A.CO_RQST_NO = B.CO_RQST_NO
           AND A.CAG_RQST_TP_CD = B.CAG_RQST_TP_CD
           AND B.MSG_PRCS_STTS_CD = 'O03'
         WHERE A.MRN = #{mrn}
           AND A.CAG_DCSH_MDFY_RQST_NO = #{cagDcshMdfyRqstNo}
         LIMIT 1
    </select>
  <!--
  Modifier la  déclaration de cargaison(Conteneur) !==화물신서고(컨테이너) 정보를 수정한다.==!
  (Lee, Dongho)
  -->
  <update id="updateCareDcshCntrNo" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlCntrVo">
      /* CarCagDcshMdfyMapper.updateCareDcshCntrNo */
      UPDATE ALPASSEXT.TB_CARE_CAG_DCSH_BL_CNTR a SET 
               a.del_yn = 'N'                                  /** Suppression ON !== 삭제여부 ==! */
             , a.last_chpr_id = #{lastChprId}                  /** ID du modificateur final !== 최종변경자ID ==! */
             , a.last_chg_dttm = SYSTIMESTAMP                  /** Date et heure de modification finale !== 최종변경일시 ==! */
             <if test="cntrNo != null">
             , a.cntr_no = #{cntrNo}                            /** N° De Conteneur !== N° De Conteneur ==! */ 
             </if>
             <if test="cntrTpCd != null">
             , a.cntr_tp_cd = #{cntrTpCd}                       /** Code De Type De Conteneur !== Code De Type De Conteneur ==! */ 
             </if>
             <!-- <if test="pckgGcnt != null">
             , a.pckg_gcnt = #{pckgGcnt}                        /** Nombre De Colis !== Nombre De Colis ==! */ 
             </if> -->
             <if test="pckgUtCd != null">
             , a.pckg_ut_cd = #{pckgUtCd}                       /** Code De L'Unité De Colis !== Code De L'Unité De Colis ==! */ 
             </if>
             <if test="ecntrWght != null">
             , a.ecntr_wght = #{ecntrWght}                      /** Tare De Conteneur(S) À Vide !== Tare De Conteneur(S) À Vide ==! */ 
             </if>
           WHERE 1=1
             <if test="cagDcshRgsrMgmtNo != null and cagDcshRgsrMgmtNo != ''">
             AND  A.cag_dcsh_rgsr_mgmt_no = #{cagDcshRgsrMgmtNo}  /** Numéro de gestion de l'enregistrement de la déclaration de fret !== Numéro de gestion de l'enregistrement de la déclaration de fret ==! */
             </if>
             <if test="bfCntrNo != null and bfCntrNo != ''">
             AND  A.cntr_no = #{bfCntrNo}
             </if>
  </update>
  <!--
  Modifier la  déclaration de cargaison(Conteneur) !==화물신서고(컨테이너) 정보를 수정한다.==!
  (Lee, Dongho)
  -->
  <update id="updateCariDcshCntrNo" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlCntrVo">
      /* CarCagDcshMdfyMapper.updateCariDcshCntrNo */
      UPDATE TB_CARI_CAG_DCSH_BL_CNTR a SET 
               a.del_yn = 'N'                                  /** Suppression ON !== 삭제여부 ==! */
             , a.last_chpr_id = #{lastChprId}                  /** ID du modificateur final !== 최종변경자ID ==! */
             , a.last_chg_dttm = SYSTIMESTAMP                  /** Date et heure de modification finale !== 최종변경일시 ==! */
             <if test="cntrNo != null">
             , a.cntr_no = #{cntrNo}                            /** N° De Conteneur !== 컨테이너번호 ==! */ 
             </if>
             <if test="cntrTpCd != null">
             , a.cntr_tp_cd = #{cntrTpCd}                       /** Code De Type De Conteneur !== 컨테이너구분코드 ==! */ 
             </if>
             <if test="pckgUtCd != null">
             , a.pckg_ut_cd = #{pckgUtCd}                       /** Code De L'Unité De Colis !== 포장단위코드 ==! */ 
             </if>
             <if test="ecntrWght != null">
             , a.ecntr_wght = #{ecntrWght}                      /** Tare De Conteneur(S) À Vide !== 공컨테이너중량 ==! */ 
             </if>
           WHERE 1=1
             <if test="mrn != null and mrn != ''">
             AND  A.mrn = #{mrn}  /** Mrn !== MRN ==! */
             </if>
             <if test="bfCntrNo != null and bfCntrNo != ''">
             AND  A.cntr_no = #{bfCntrNo}
             </if>
  </update>

  <!--
  Modifier la  déclaration de cargaison(remorque) !==화물신서고(트레일러) 정보를 수정한다.==!
  (Lee, Dongho)
  -->
  <update id="updateCareDcshTrlrVhclRgsrNo" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlTrlrVo">
      /* CarCagDcshMdfyMapper.updateCareDcshTrlrVhclRgsrNo */
      UPDATE ALPASSEXT.TB_CARE_CAG_DCSH_BL_TRLR a SET 
               a.del_yn = 'N'                                  /** Suppression ON !== 삭제여부 ==! */
             , a.last_chpr_id = #{lastChprId}                  /** ID du modificateur final !== 최종변경자ID ==! */
             , a.last_chg_dttm = SYSTIMESTAMP                  /** Date et heure de modification finale !== 최종변경일시 ==! */
             <if test="vhclRgsrNo != null">
             , a.vhcl_rgsr_no = #{vhclRgsrNo}                   /** N° d'immatriculation du véhicule !== N° d'immatriculation du véhicule ==! */ 
             </if>
             <if test="chssNo != null">
             , a.chss_no = #{chssNo}                            /** N° De Châssis !== N° De Châssis ==! */ 
             </if>
             <if test="trlrStsz != null">
             , a.trlr_stsz = #{trlrStsz}                        /** Gabarit De Remorque !== Gabarit De Remorque ==! */ 
             </if>
           WHERE 1=1 
             <if test="cagDcshRgsrMgmtNo != null and cagDcshRgsrMgmtNo != ''">
             AND  A.cag_dcsh_rgsr_mgmt_no = #{cagDcshRgsrMgmtNo}  /** Numéro de gestion de l'enregistrement de la déclaration de fret !== Numéro de gestion de l'enregistrement de la déclaration de fret ==! */
             </if>
             <if test="bfVhclRgsrNo != null and bfVhclRgsrNo != ''">
             AND  A.vhcl_rgsr_no = #{bfVhclRgsrNo}
             </if>
  </update>
  <!--
  Modifier la  déclaration de cargaison(remorque) !==화물신서고(트레일러) 정보를 수정한다.==!
  (Lee, Dongho)
  -->
  <update id="updateCariDcshTrlrVhclRgsrNo" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlTrlrVo">
      /* CarCagDcshMdfyMapper.updateCariDcshTrlrVhclRgsrNo */
      UPDATE TB_CARI_CAG_DCSH_BL_TRLR a SET 
               a.del_yn = 'N'                                  /** Suppression ON !== 삭제여부 ==! */
             , a.last_chpr_id = #{lastChprId}                  /** ID du modificateur final !== 최종변경자ID ==! */
             , a.last_chg_dttm = SYSTIMESTAMP                  /** Date et heure de modification finale !== 최종변경일시 ==! */
             <if test="vhclRgsrNo != null">
             , a.vhcl_rgsr_no = #{vhclRgsrNo}                   /** N° d'immatriculation du véhicule !== 차량등록번호 ==! */ 
             </if>
             <if test="chssNo != null">
             , a.chss_no = #{chssNo}                            /** N° De Châssis !== 차대번호 ==! */ 
             </if>
             <if test="trlrStsz != null">
             , a.trlr_stsz = #{trlrStsz}                        /** Gabarit De Remorque !== 트레일러규격 ==! */ 
             </if>
           WHERE 1=1 
             <if test="mrn != null and mrn != ''">
             AND  A.mrn = #{mrn}  /** Mrn !== MRN ==! */
             </if>
             <if test="bfVhclRgsrNo != null and bfVhclRgsrNo != ''">
             AND  A.vhcl_rgsr_no = #{bfVhclRgsrNo}
             </if>
  </update>
  <!--
  Modifier la  déclaration de cargaison(train) !==화물신서고(열차) 정보를 수정한다.==!
  (Lee, Dongho)
  -->
  <update id="updateCareDcshWgnNo" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlTrnVo">
      /* CarCagDcshMdfyMapper.updateCareDcshWgnNo */
      UPDATE ALPASSEXT.TB_CARE_CAG_DCSH_BL_TRN a SET 
               a.del_yn = 'N'                                  /** Suppression ON !== 삭제여부 ==! */
             , a.last_chpr_id = #{lastChprId}                  /** ID du modificateur final !== 최종변경자ID ==! */
             , a.last_chg_dttm = SYSTIMESTAMP                  /** Date et heure de modification finale !== 최종변경일시 ==! */
             <if test="wgnNo != null">
             , a.wgn_no = #{wgnNo}                              /** N° De Wagon !== N° De Wagon ==! */ 
             </if>
             <if test="wgnType != null">
             , a.wgn_type = #{wgnType}                          /** type de wagon !== type de wagon ==! */ 
             </if>
             <if test="trnRgsrNo != null">
             , a.trn_rgsr_no = #{trnRgsrNo}                     /** N° enregistrement du train !== N° enregistrement du train ==! */ 
             </if>
           WHERE 1=1 
             <if test="cagDcshRgsrMgmtNo != null and cagDcshRgsrMgmtNo != ''">
             AND  A.cag_dcsh_rgsr_mgmt_no = #{cagDcshRgsrMgmtNo}  /** Numéro de gestion de l'enregistrement de la déclaration de fret !== Numéro de gestion de l'enregistrement de la déclaration de fret ==! */
             </if>
             <if test="bfWgnNo != null and bfWgnNo != ''">
             AND  A.wgn_no = #{bfWgnNo}
             </if>
  </update>
  <!--
  Modifier la  déclaration de cargaison(train) !==화물신서고(열차) 정보를 수정한다.==!
  (Lee, Dongho)
  -->
  <update id="updateCariDcshWgnNo" parameterType="alpass.ipt.car.com.vo.CarCagDcshMdfyBlTrnVo">
      /* CarCagDcshMdfyMapper.updateCariDcshWgnNo */
      UPDATE TB_CARI_CAG_DCSH_BL_TRN a SET 
               a.del_yn = 'N'                                  /** Suppression ON !== 삭제여부 ==! */
             , a.last_chpr_id = #{lastChprId}                  /** ID du modificateur final !== 최종변경자ID ==! */
             , a.last_chg_dttm = SYSTIMESTAMP                  /** Date et heure de modification finale !== 최종변경일시 ==! */
             <if test="wgnNo != null">
             , a.wgn_no = #{wgnNo}                              /** N° De Wagon !== 왜건번호 ==! */ 
             </if>
             <if test="wgnType != null">
             , a.wgn_type = #{wgnType}                          /** type de wagon !== 왜건타입 ==! */ 
             </if>
             <if test="trnRgsrNo != null">
             , a.trn_rgsr_no = #{trnRgsrNo}                     /** N° enregistrement du train !== 열차등록번호 ==! */ 
             </if>
           WHERE 1=1 
             <if test="mrn != null and mrn != ''">
             AND  A.mrn = #{mrn}  /** Mrn !== MRN ==! */
             </if>
             <if test="bfWgnNo != null and bfWgnNo != ''">
             AND  A.wgn_no = #{bfWgnNo}
             </if>
  </update>
</mapper>
