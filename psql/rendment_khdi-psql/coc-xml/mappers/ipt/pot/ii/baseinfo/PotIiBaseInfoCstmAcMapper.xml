<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="alpass.ipt.pot.ii.baseinfo.mapper.PotIiBaseInfoCstmAcMapper">

  <!--
		 Consulter la liste des comptes bancaires de bureau de douane !==세관계좌 목록을 조회한다.==!
	-->
  <select id="selectCstmAcList"
    parameterType="alpass.ipt.pot.ii.baseinfo.vo.PotIiBaseInfoCstmAcVo"
    resultType="alpass.ipt.pot.ii.baseinfo.vo.PotIiBaseInfoCstmAcVo">
    /** selecHldyInqtList */
    <include refid="pagination.header"/>
    SELECT
    A.ORGN_MGMT_CD
    , A.ORGN_NM
    , B.AC_SRNO
    , B.AC_NM
    , B.AC_NO
    , B.AC_USG_NM
    , B.USE_YN
    , C.BNK_CD
    , C.BNK_NM
    , B.FRST_REGST_ID
    , TO_CHAR(B.FRST_RGSR_DTTM, 'DD/MM/YYYY') AS FRST_RGSR_DTTM
    , B.LAST_CHPR_ID
    , TO_CHAR(B.LAST_CHG_DTTM, 'DD/MM/YYYY') AS LAST_CHG_DTTM
    FROM TB_POTI_ORGN A, TB_POTI_ORGN_AC B, TB_COM_BNK_CD C
    WHERE A.ORGN_MGMT_CD = B.ORGN_MGMT_CD
    AND   B.BNK_CD = C.BNK_CD
    AND   A.DEL_YN = 'N'
    AND   B.DEL_YN = 'N'
    AND   C.DEL_YN = 'N'
    <if test="orgnMgmtCd != null and orgnMgmtCd != ''">
      AND A.ORGN_MGMT_CD = #{orgnMgmtCd}
    </if>
    <if test="acNo != null and acNo != ''">
      AND B.AC_NO LIKE '%'||#{acNo}||'%'
    </if>
    ORDER BY A.ORGN_MGMT_CD
    <include refid="pagination.footer"/>
  </select>

</mapper>
