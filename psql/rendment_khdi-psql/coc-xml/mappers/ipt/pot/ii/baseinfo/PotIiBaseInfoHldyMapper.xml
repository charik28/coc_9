<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="alpass.ipt.pot.ii.baseinfo.mapper.PotIiBaseInfoHldyMapper">

  <!--
		 Consulter la liste des jours fériés !==공휴일 목록을 조회한다==!
	-->
  <select id="selecHldyList"
    parameterType="alpass.ipt.pot.ii.baseinfo.vo.PotIiBaseInfoHldyVo"
    resultType="alpass.ipt.pot.ii.baseinfo.vo.PotIiBaseInfoHldyVo">
    /** selecHldyInqtList */
    <include refid="pagination.header"/>
    SELECT
    TO_CHAR(TO_DATE(A.BASE_DT, 'YYYYMMDD'), 'DD/MM/YYYY') AS BASE_DT
    , A.HLDY_TP_CD
    , FN_GET_CD_VDVAL_NM('POT_0008', A.HLDY_TP_CD, #{langCd}) AS HLDY_TP_NM
    , A.ORGN_CD
    , (SELECT ORGN_NM FROM TB_POTI_ORGN WHERE ORGN_CD = A.ORGN_CD) AS ORG_NM
    , FN_GET_CD_VDVAL_NM('COM_0037', A.WKDY_CD, #{langCd}) AS WKDY_NM
    , A.WKDY_CD
    , A.HLDY_NM
    , A.FRST_REGST_ID
    , TO_CHAR(A.FRST_RGSR_DTTM, 'DD/MM/YYYY') AS FRST_RGSR_DTTM
    , A.LAST_CHPR_ID
    , TO_CHAR(A.LAST_CHG_DTTM, 'DD/MM/YYYY') AS LAST_CHG_DTTM
    FROM TB_COM_HLDY A
    WHERE A.DEL_YN = 'N'
    <if test="baseYy != null and baseYy != ''">
      AND SUBSTR(A.BASE_DT, 0, 4) = #{baseYy}
    </if>
    <if test="orgCd != null and orgCd != ''">
      AND A.ORGN_CD = #{orgCd}
    </if>
    <if test="hldyNm != null and hldyNm != ''">
      AND UPPER(A.HLDY_NM) LIKE '%'||UPPER(#{hldyNm})||'%'
    </if>
    <if test="hldyTpCd != null and hldyTpCd != ''">
      AND A.HLDY_TP_CD = #{hldyTpCd}
    </if>
    ORDER BY A.BASE_DT
    <include refid="pagination.footer"/>
  </select>

</mapper>
