<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="alpass.ipt.psc.blgg.rgsr.mapper.PscRlseDcshPdlsMapper">

   <!--
   @TODO:번역필요 !== GeneratorComments 목록 조회 ==!
   -->
   <select id="selectPscRlseDcshPdlsList"
     parameterType="alpass.ipt.psc.blgg.rgsr.vo.PscRlseDcshPdlsVo" resultType="alpass.ipt.psc.blgg.rgsr.vo.PscRlseDcshPdlsVo">
       /* selectPscRlseDcshPdlsList */
       <include refid="pagination.header" ></include>
			 SELECT
			 A.DPST_TEMP_NO               /** Numéro provisoire de mise en dépôt !== 예치임시번호 ==! */
			 , A.DPST_PDLS_SRNO             /** N° de série de l'article en dépôt !== 예치품목일련번호 ==! */
			 , A.SCTR_CD                    /** Code De Secteur !== 섹터코드 ==! */
			 , A.RLSE_QTY                   /** Quantité de sortie !== 반출수량 ==! */
			 , A.QTY_UT_CD                  /** Code De L'Unité De Quantité !== 수량단위코드 ==! */
			 , A.RLSE_WGHT                  /** Poids sorti !== 반출중량 ==! */
			 , A.WGHT_UT_CD                 /** Unité De Poids !== 중량단위코드 ==! */
			 , A.CLT_NO                     /** N° bon à enlever !== 반출증번호 ==! */
			 , A.DEL_YN                     /** Suppression On !== 삭제여부 ==! */
			 , A.FRST_REGST_ID              /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
			 , A.FRST_RGSR_DTTM             /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
			 , A.LAST_CHPR_ID               /** Id Du Modificateur Final !== 최종변경자ID ==! */
			 , A.LAST_CHG_DTTM              /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
		   , A.BRNG_RLSE_TP_CD            /** Code De Catégorie D'Entrée Et De Sortie !==  ==! */
		   , A.INVN_WGHT                  /** Poids Du Stock !==  ==! */
		   , A.INVN_QTY                   /** Nombre du stock !==  ==! */
		   , A.BRNG_RLSE_TP_CD            /** Code De Catégorie D'Entrée Et De Sortie !==  ==! */
			 FROM   TB_PSCI_PSNR_BRNG_RLSE_PDLS A
			 WHERE  DEL_YN = 'N'                                /** Suppression ON !== 삭제여부 ==! */
			 AND  A.DPST_TEMP_NO = #{dpstTempNo}              /** Numéro provisoire de mise en dépôt !== 예치임시번호 ==! */
		 <if test='dpstPdlsSrno != null and dpstPdlsSrno != ""'>
			 AND  A.DPST_PDLS_SRNO = #{dpstPdlsSrno}          /** N° de série de l'article en dépôt !== 예치품목일련번호 ==! */
		 </if>
		 ORDER
		 BY A.DPST_PDLS_SRNO
		 	<include refid="pagination.footer" ></include>
   </select>


   <!--
   @TODO:번역필요 !== GeneratorComments 등록 ==!
   (Generated)
   -->
   	<insert id="insertPscRlseDcshPdls" parameterType="alpass.ipt.psc.blgg.rgsr.vo.PscRlseDcshPdlsVo">
			/* insertPscRlseDcshPdls */
			<selectKey keyProperty="dpstPdlsSrno" order="BEFORE" resultType="java.math.BigDecimal">
				SELECT NVL(MAX(DPST_PDLS_SRNO),0)+1 FROM ALPASSINT.TB_PSCI_PSNR_BRNG_RLSE_PDLS WHERE DPST_TEMP_NO = #{dpstTempNo}
			</selectKey>
		 INSERT INTO ALPASSINT.TB_PSCI_PSNR_BRNG_RLSE_PDLS
			(
			DPST_TEMP_NO                 /** Numéro provisoire de mise en dépôt !== 예치임시번호 ==! */
			, DPST_PDLS_SRNO               /** N° de série de l'article en dépôt !== 예치품목일련번호 ==! */
			, SCTR_CD                      /** Code De Secteur !== 섹터코드 ==! */
			, RLSE_QTY                     /** Quantité de sortie !== 반출수량 ==! */
			, QTY_UT_CD                    /** Code De L'Unité De Quantité !== 수량단위코드 ==! */
			, RLSE_WGHT                    /** Poids sorti !== 반출중량 ==! */
			, WGHT_UT_CD                   /** Unité De Poids !== 중량단위코드 ==! */
			, CLT_NO                       /** N° bon à enlever !== 반출증번호 ==! */
			, DEL_YN                       /** Suppression On !== 삭제여부 ==! */
			, FRST_REGST_ID                /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
			, FRST_RGSR_DTTM               /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
			, LAST_CHPR_ID                 /** Id Du Modificateur Final !== 최종변경자ID ==! */
			, LAST_CHG_DTTM                /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
			, BRNG_RLSE_TP_CD              /** Code De Catégorie D'Entrée Et De Sortie !==  ==! */
			, INVN_WGHT                    /** Poids Du Stock !==  ==! */
			, INVN_QTY                     /** Nombre du stock !==  ==! */
			)
			VALUES
			(
			#{dpstTempNo}                /** Numéro provisoire de mise en dépôt !== 예치임시번호 ==! */
			, #{dpstPdlsSrno}              /** N° de série de l'article en dépôt !== 예치품목일련번호 ==! */
			, #{sctrCd}                    /** Code De Secteur !== 섹터코드 ==! */
			, #{rlseQty}                   /** Quantité de sortie !== 반출수량 ==! */
			, #{qtyUtCd}                   /** Code De L'Unité De Quantité !== 수량단위코드 ==! */
			, #{rlseWght}                  /** Poids sorti !== 반출중량 ==! */
			, #{wghtUtCd}                  /** Unité De Poids !== 중량단위코드 ==! */
			, #{cltNo}                     /** N° bon à enlever !== 반출증번호 ==! */
			, 'N'                          /** Suppression On !== 삭제여부 ==! */
			, #{frstRegstId}               /** Id Du Premier Enregistrant  !== 최초등록자ID ==! */
			, CURRENT_TIMESTAMP                 /** Date Et Heure De Premier Enregistrement !== 최초등록일시 ==! */
			, #{lastChprId}                /** Id Du Modificateur Final !== 최종변경자ID ==! */
			, CURRENT_TIMESTAMP                 /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
			, #{brngRlseTpCd}              /** Code De Catégorie D'Entrée Et De Sortie !==  ==! */
			, #{invnWght}                  /** Poids Du Stock !==  ==! */
			, #{invnQty}                   /** Nombre du stock !==  ==! */
			)
   </insert>


   <!--
   @TODO:번역필요 !== GeneratorComments 수정 ==!
   (Generated)
   -->
   <update id="updatePscRlseDcshPdls" parameterType="alpass.ipt.psc.blgg.rgsr.vo.PscRlseDcshPdlsVo">
       /* updatePscRlseDcshPdls */
		 UPDATE  ALPASSINT.TB_PSCI_PSNR_BRNG_RLSE_PDLS SET
			 SCTR_CD = #{sctrCd}                         /** Code De Secteur !== 섹터코드 ==! */
			 , RLSE_QTY = #{rlseQty}                       /** Quantité de sortie !== 반출수량 ==! */
			 , QTY_UT_CD = #{qtyUtCd}                      /** Code De L'Unité De Quantité !== 수량단위코드 ==! */
			 , RLSE_WGHT = #{rlseWght}                     /** Poids sorti !== 반출중량 ==! */
			 , WGHT_UT_CD = #{wghtUtCd}                    /** Unité De Poids !== 중량단위코드 ==! */
			 , CLT_NO = #{cltNo}                           /** N° bon à enlever !== 반출증번호 ==! */
			 , LAST_CHPR_ID = #{lastChprId}                /** Id Du Modificateur Final !== 최종변경자ID ==! */
			 , LAST_CHG_DTTM = CURRENT_TIMESTAMP                /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
		   , INVN_WGHT = #{invnWght}                     /** Poids Du Stock !==  ==! */
		   , INVN_QTY = #{invnQty}                       /** Nombre du stock !==  ==! */
		   , BRNG_RLSE_TP_CD = #{brngRlseTpCd}           /** Code De Catégorie D'Entrée Et De Sortie !==  ==! */
		 WHERE  DEL_YN = 'N'                                /** Suppression ON !== 삭제여부 ==! */
		 AND  DPST_TEMP_NO = #{dpstTempNo}                /** Numéro provisoire de mise en dépôt !== 예치임시번호 ==! */
		 AND  DPST_PDLS_SRNO = #{dpstPdlsSrno}            /** N° de série de l'article en dépôt !== 예치품목일련번호 ==! */
   </update>


   <!--
   @TODO:번역필요 !== GeneratorComments 삭제 ==!
   (Generated)
   -->
   <update id="deletePscRlseDcshPdls" parameterType="alpass.ipt.psc.blgg.rgsr.vo.PscRlseDcshPdlsVo">
       /* deletePscRlseDcshPdls */
       UPDATE  ALPASSINT.TB_PSCI_PSNR_BRNG_RLSE_PDLS SET
               DEL_YN = 'Y'                                  /** Suppression ON !== 삭제여부 ==! */
            ,  LAST_CHPR_ID = #{lastChprId}                  /** ID du modificateur final !== 최종변경자ID ==! */
            ,  LAST_CHG_DTTM = CURRENT_TIMESTAMP                  /** Date et heure de modification finale !== 최종변경일시 ==! */
        WHERE  DEL_YN = 'N'                                  /** Suppression ON !== 삭제여부 ==! */
		 		AND  DPST_TEMP_NO = #{dpstTempNo}                /** Numéro provisoire de mise en dépôt !== 예치임시번호 ==! */
		 		AND  DPST_PDLS_SRNO = #{dpstPdlsSrno}            /** N° de série de l'article en dépôt !== 예치품목일련번호 ==! */
   </update>
   
   <!--
  @TODO:번역필요 !== 외환신고서금액관리 수정 ==!
  -->
  <update id="updatePscRlseDcshPdlsMgmt" parameterType="alpass.ipt.psc.blgg.rgsr.vo.PscRlseDcshPdlsVo">
	/* updatePscRlseDcshPdlsMgmt */
    UPDATE  ALPASSINT.TB_PSCI_PSNR_BRNG_RLSE_PDLS SET
      LAST_CHPR_ID = #{lastChprId}                /** Id Du Modificateur Final !== 최종변경자ID ==! */
    , LAST_CHG_DTTM = CURRENT_TIMESTAMP           /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
    <if test='dpstMgmtNo != null and dpstMgmtNo != ""'>
    , DPST_MGMT_NO = #{dpstMgmtNo}                /** Numéro De Série De Transit/Correspondance !== 예치관리번호 ==! */
    </if>
		<if test='invnWght != null and invnWght != ""'>
		, INVN_WGHT = #{invnWght}                     /** Poids Du Stock !==  ==! */
		</if>
		<if test='invnQty != null and invnQty != ""'>
		, INVN_QTY = #{invnQty}                       /** Nombre du stock !==  ==! */
		</if>
    WHERE  DEL_YN = 'N'                                	/** Suppression ON !== 삭제여부 ==! */
		AND  DPST_TEMP_NO = #{dpstTempNo}                /** Numéro provisoire de mise en dépôt !== 예치임시번호 ==! */
  </update>
  
  <!--
   @TODO:번역필요 !== GeneratorComments 목록 조회 ==!
   -->
   <select id="selectPscRlseDcshPdlsSum" parameterType="alpass.ipt.psc.blgg.rgsr.vo.PscRlseDcshPdlsVo" resultType="alpass.ipt.psc.blgg.rgsr.vo.PscRlseDcshPdlsVo">
	/* selectPscRlseDcshPdlsSum */
	SELECT NVL(SUM(AMT),0) AS AMT
	  FROM ALPASSINT.TB_PSCI_PSNR_BRNG_RLSE_PDLS A
	 WHERE DEL_YN = 'N'                                		/** Suppression ON !== 삭제여부 ==! */
		 AND  DPST_TEMP_NO = #{dpstTempNo}                /** Numéro provisoire de mise en dépôt !== 예치임시번호 ==! */
   </select>
   
	
</mapper>

