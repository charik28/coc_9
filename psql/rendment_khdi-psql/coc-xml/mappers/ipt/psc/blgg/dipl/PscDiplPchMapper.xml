<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="alpass.ipt.psc.blgg.dipl.mapper.PscDiplPchMapper">

  <!--
  @TODO:번역필요 !== 외교행낭 목록 조회 ==!
  -->
  <select id="selectPscDiplPchDcshList"  parameterType="alpass.ipt.psc.blgg.dipl.vo.PscDiplPchMgmtVo"
    resultType="alpass.ipt.psc.blgg.dipl.vo.PscDiplPchMgmtVo">
      /* selectPscDiplPchDcshList */
      <include refid="pagination.header" ></include>
      SELECT
      A.DIPL_PCH_NO                /** @TODO : 번역필요 !==  ==! */
      , A.DIPL_ITT_NM                /** @TODO : 번역필요 !==  ==! */
      , TO_CHAR(TO_DATE(A.RGSR_DT, 'YYYYMMDD'), 'DD/MM/YYYY') AS RGSR_DT /** Date D'Enregistrement !== 등록일자 ==! */
      , A.DPTR_CNTY_CD               /** Code De Pays De Départ !==  ==! */
      , FN_GET_CNTY_NM(A.DPTR_CNTY_CD, #{langCd}) AS DPTR_CNTY_CD_NM /**  !== 국가명 ==! */
      , A.DEL_YN                     /** Suppression On !==  ==! */
      , A.FRST_REGST_ID              /** Id Du Premier Enregistrant  !==  ==! */
      , A.FRST_RGSR_DTTM             /** Date Et Heure De Premier Enregistrement !==  ==! */
      , A.LAST_CHPR_ID               /** Id Du Modificateur Final !==  ==! */
      , A.LAST_CHG_DTTM              /** Date Et Heure De Modification Finale !==  ==! */
      , A.ATCH_FILE_ID               /** Id Du Fichier Joint !==  ==! */
      FROM   ALPASSINT.TB_PSCI_DIPL_PCH A
      WHERE  DEL_YN = 'N'                                /** Suppression ON !== 삭제여부 ==! */
      <if test='diplPchNo != null and diplPchNo != ""'>
      AND  A.DIPL_PCH_NO = #{diplPchNo}                /** @TODO : 번역필요 !==  ==! */
      </if>
      <if test='(dclrDtFrom != null and !"".equals(dclrDtFrom)) and (dclrDtTo != null and !"".equals(dclrDtTo))'>
      AND A.RGSR_DT BETWEEN TO_CHAR(TO_DATE(REPLACE(#{dclrDtFrom}, '/', ''), 'DDMMYYYY'), 'YYYYMMDD') AND TO_CHAR(TO_DATE(REPLACE(#{dclrDtTo}, '/', ''), 'DDMMYYYY'), 'YYYYMMDD')
      </if>
      <if test='diplIttNm != null and diplIttNm != ""'>
      AND  A.DIPL_ITT_NM = #{diplIttNm}         /** @TODO : 번역필요 !==  ==! */
      </if>
      <if test='dptrCntyCd != null and dptrCntyCd != ""'>
        AND  A.DPTR_CNTY_CD = #{dptrCntyCd}         /** Code De Pays De Départ !==  ==! */
      </if>
      ORDER BY A.FRST_RGSR_DTTM DESC
      <include refid="pagination.footer" ></include>
  </select>

  <select id="selectPscDiplPchDcsh"  parameterType="alpass.ipt.psc.blgg.dipl.vo.PscDiplPchMgmtVo"
    resultType="alpass.ipt.psc.blgg.dipl.vo.PscDiplPchMgmtVo">
      /* selectPscDiplPchDcsh */
      SELECT
      A.DIPL_PCH_NO                /** @TODO : 번역필요 !==  ==! */
      , A.DIPL_ITT_NM                /** @TODO : 번역필요 !==  ==! */
      , TO_CHAR(TO_DATE(A.RGSR_DT, 'YYYYMMDD'), 'DD/MM/YYYY') AS RGSR_DT /** Date D'Enregistrement !== 등록일자 ==! */
      , A.DPTR_CNTY_CD               /** Code De Pays De Départ !==  ==! */
      , A.DEL_YN                     /** Suppression On !==  ==! */
      , A.FRST_REGST_ID              /** Id Du Premier Enregistrant  !==  ==! */
      , A.FRST_RGSR_DTTM             /** Date Et Heure De Premier Enregistrement !==  ==! */
      , A.LAST_CHPR_ID               /** Id Du Modificateur Final !==  ==! */
      , A.LAST_CHG_DTTM              /** Date Et Heure De Modification Finale !==  ==! */
      , A.ATCH_FILE_ID               /** Id Du Fichier Joint !==  ==! */
      FROM   ALPASSINT.TB_PSCI_DIPL_PCH A
      WHERE  DEL_YN = 'N'                                /** Suppression ON !== 삭제여부 ==! */
      AND  A.DIPL_PCH_NO = #{diplPchNo}                /** @TODO : 번역필요 !==  ==! */
  </select>
  

  <!--
  @TODO:번역필요 !== 외교행낭 등록 ==!
  (deKim)
  -->
  <insert id="insertPscDiplPchDcsh" parameterType="alpass.ipt.psc.blgg.dipl.vo.PscDiplPchMgmtVo">
      /* insertPscDiplPchDcsh */

        INSERT INTO ALPASSINT.TB_PSCI_DIPL_PCH
        (
          DIPL_PCH_NO                  /** @TODO : 번역필요 !==  ==! */
          , DIPL_ITT_NM                  /** @TODO : 번역필요 !==  ==! */
          , RGSR_DT                      /** Date D'Enregistrement !==  ==! */
          , DPTR_CNTY_CD                 /** Code De Pays De Départ !==  ==! */
          , DEL_YN                       /** Suppression On !==  ==! */
          , FRST_REGST_ID                /** Id Du Premier Enregistrant  !==  ==! */
          , FRST_RGSR_DTTM               /** Date Et Heure De Premier Enregistrement !==  ==! */
          , LAST_CHPR_ID                 /** Id Du Modificateur Final !==  ==! */
          , LAST_CHG_DTTM                /** Date Et Heure De Modification Finale !==  ==! */
          , ATCH_FILE_ID                 /** Id Du Fichier Joint !==  ==! */
        )
        VALUES
        (
          #{diplPchNo}                 /** @TODO : 번역필요 !==  ==! */
          , #{diplIttNm}                 /** @TODO : 번역필요 !==  ==! */
          , #{rgsrDt}                    /** Date D'Enregistrement !==  ==! */
          , #{dptrCntyCd}                /** Code De Pays De Départ !==  ==! */
          , 'N'                          /** Suppression On !==  ==! */
          , #{frstRegstId}               /** Id Du Premier Enregistrant  !==  ==! */
          , SYSTIMESTAMP                 /** Date Et Heure De Premier Enregistrement !==  ==! */
          , #{lastChprId}                /** Id Du Modificateur Final !==  ==! */
          , SYSTIMESTAMP                 /** Date Et Heure De Modification Finale !==  ==! */
          , #{atchFileId}                /** Id Du Fichier Joint !==  ==! */
        )
  </insert>


  <!--
  @TODO:번역필요 !== 외교행낭 수정 ==!
  (deKim)
  -->
  <update id="updatePscDiplPchDcsh" parameterType="alpass.ipt.psc.blgg.dipl.vo.PscDiplPchMgmtVo">
      /* updatePscDiplPchDcsh */
      UPDATE  ALPASSINT.TB_PSCI_DIPL_PCH SET
                LAST_CHPR_ID = #{lastChprId}                /** Id Du Modificateur Final !== 최종변경자ID ==! */
              , LAST_CHG_DTTM = CURRENT_TIMESTAMP                /** Date Et Heure De Modification Finale !== 최종변경일시 ==! */
              <if test='diplIttNm != null and diplIttNm != ""'>
              , DIPL_ITT_NM = #{diplIttNm}           /** @TODO : 번역필요 !==  ==! */
              </if>
              <if test='dptrCntyCd != null and dptrCntyCd != ""'>
                , DPTR_CNTY_CD  = #{dptrCntyCd}                         /** Code De Pays De Départ !==  ==! */
              </if>
              <if test='atchFileId != null and atchFileId != ""'>
                , ATCH_FILE_ID  = #{atchFileId}                         /** Id Du Fichier Joint !==  ==! */
              </if>
         WHERE  DEL_YN = 'N'                                /** Suppression ON !== 삭제여부 ==! */
          AND  DIPL_PCH_NO = #{diplPchNo}                  /** @TODO : 번역필요 !==  ==! */

           
  </update>


  <!--
  @TODO:번역필요 !== 외교행낭 삭제 ==!
  (deKim)
  -->
  <update id="deletePscDiplPchDcsh" parameterType="alpass.ipt.psc.blgg.dipl.vo.PscDiplPchMgmtVo">
      /* deletePscDiplPchDcsh */
      UPDATE  ALPASSINT.TB_PSCI_DIPL_PCH SET
              DEL_YN = 'Y'                                  /** Suppression ON !== 삭제여부 ==! */
           ,  LAST_CHPR_ID = #{lastChprId}                  /** ID du modificateur final !== 최종변경자ID ==! */
           ,  LAST_CHG_DTTM = CURRENT_TIMESTAMP                  /** Date et heure de modification finale !== 최종변경일시 ==! */
       WHERE  DEL_YN = 'N'                                  /** Suppression ON !== 삭제여부 ==! */
        AND  DIPL_PCH_NO = #{diplPchNo}                  /** @TODO : 번역필요 !==  ==! */
  </update>


</mapper>