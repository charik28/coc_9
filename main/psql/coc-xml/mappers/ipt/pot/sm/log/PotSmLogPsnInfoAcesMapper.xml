<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="alpass.ipt.pot.sm.log.mapper.PotSmPsnInfoAcesLogMapper">

	<!-- 
		 Consulter la liste des accès aux informations personnelles !==  개인정보접근 리스트를 조회 ==!
	 -->
	<select id="selectPsnInfoAcesLogList" parameterType="alpass.ipt.pot.sm.log.vo.PotSmPsnInfoAcesLogVo" resultType="alpass.ipt.pot.sm.log.vo.PotSmPsnInfoAcesLogVo">
		/** selectPsnInfoAcesLogList */
		<include refid="pagination.header"/>
			SELECT
				     LOG_ID        
					,USER_ID         
					,TO_CHAR(ACES_DTTM,'DD/MM/YYYY HH24:MI:SS') AS ACES_DTTM
					,ACES_TP_CD      
					,(SELECT FN_GET_CD_VDVAL_NM('POT_0059', ACES_TP_CD, #{langCd}) FROM DUAL) AS ACES_TP_CD_NM
					,(SELECT FN_GET_CD_VDVAL_NM('COM_0016', ACES_YN, #{langCd}) FROM DUAL) AS ACES_YN
					,ACES_URL        
					,QURY_CN         
					,COL_VAL         
					,RFUN_VAL        
					,DB_NM           
					,SCHM_NM         
					,USER_NM         
					,CNET_IP         
					,DEL_YN          
					,FRST_REGST_ID   
					,FRST_RGSR_DTTM  
					,LAST_CHPR_ID    
					,LAST_CHG_DTTM  	
			FROM  TB_COM_SYS_PSN_INFO_ACES_LOG
			WHERE DEL_YN = 'N'
			<if test="searUserId != null and searUserId != ''">
			AND   USER_ID =  #{searUserId}
			</if>	
		    <if test="searchKeywordFrom != null and searchKeywordFrom != ''">
		    AND  TO_CHAR(ACES_DTTM, 'YYYYMMDD') BETWEEN TO_CHAR(TO_DATE(#{searchKeywordFrom}, 'DD/MM/YYYY'), 'YYYYMMDD') AND TO_CHAR(TO_DATE(#{searchKeywordTo}, 'DD/MM/YYYY'), 'YYYYMMDD')
		    </if>
			<if test="searAcesTpCd != null and searAcesTpCd != ''">
			AND   ACES_TP_CD =  #{searAcesTpCd}
			</if>		    	    	    
			ORDER BY ACES_DTTM DESC		    	    			    	    	    
		<include refid="pagination.footer"/>
	</select>
																						
</mapper>
